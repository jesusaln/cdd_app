import{r as Z,T as dt,c as y,p as ut,H as ct,w as E,i as r,o as n,g as M,f as e,u as a,Z as ft,s as J,k as c,l as u,t as d,e as B,A as X,F as k,m as w,I as N,J as vt,q as Y,v as h,z as S,n as p,x as $,N as bt}from"./vendor-d19pJyVS.js";import{A as mt}from"./AppLayout-CcnrZQKI.js";import{_ as pt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Dq7h7Pqt.js";import"./app-BcT2PLJy.js";const xt={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8"},gt={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},yt={class:"mb-8"},ht={class:"flex items-start justify-between gap-4"},kt={class:"flex-1"},wt={class:"flex items-center gap-4 text-xs text-gray-500 bg-gray-50 px-3 py-2 rounded-lg"},_t={class:"flex items-center"},Ct={key:0,class:"text-gray-400"},Mt={key:1,class:"flex items-center"},jt={class:"flex gap-2"},zt={class:"space-y-4 mb-6"},Dt={key:0,class:"rounded-xl border border-red-200 bg-red-50 p-4 shadow-sm"},Et={class:"flex items-start"},Bt={class:"ml-3"},St={class:"mt-2 text-sm text-red-700"},Tt={class:"space-y-1"},$t={key:0,class:"rounded-xl border border-amber-200 bg-amber-50 p-4 shadow-sm"},At={class:"flex items-center justify-between"},Vt={class:"flex items-center"},Lt={class:"ml-3"},Ft={class:"text-xs text-amber-700 mt-0.5"},Nt={class:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm"},Ht={class:"flex items-center justify-between mb-2"},Ot={class:"text-sm text-gray-500"},Ut={class:"w-full bg-gray-200 rounded-full h-2"},qt={class:"p-8"},It={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Pt={class:"md:col-span-2"},Kt={class:"relative"},Rt={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},Wt={class:"flex justify-between mt-2"},Gt={key:0,class:"text-sm text-red-600 flex items-center"},Zt={class:"text-xs text-gray-400 ml-auto"},Jt={class:"relative"},Xt=["value"],Yt={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},Qt={class:"relative"},te=["value"],ee={key:0,class:"mt-2 text-sm text-red-600"},se={class:"relative"},oe=["value"],ie={key:0,class:"mt-2 text-sm text-red-600"},ae={class:"relative"},re=["value"],ne={class:"mt-2 flex items-center justify-between"},le={class:"flex items-center"},de={class:"text-xs text-gray-600"},ue={key:0,class:"text-xs text-blue-600 font-medium bg-blue-50 px-2 py-1 rounded"},ce={key:0,class:"mt-2 text-sm text-red-600"},fe={class:"flex items-center justify-between mb-2"},ve={class:"flex gap-1"},be={key:0,class:"mt-2 text-sm text-red-600"},me={class:"flex items-center justify-between mb-2"},pe={class:"flex gap-1 flex-wrap"},xe={class:"mt-2 space-y-1"},ge={key:0,class:"text-sm text-red-600"},ye={key:1,class:"text-xs text-gray-600 flex items-center"},he={class:"font-medium text-gray-800 ml-1"},ke={key:2,class:"text-xs text-amber-600 flex items-center bg-amber-50 px-2 py-1 rounded"},we={class:"md:col-span-2"},_e={class:"relative"},Ce={class:"flex justify-between mt-2"},Me={key:0,class:"text-sm text-red-600"},je={class:"text-xs text-gray-400 ml-auto"},ze={class:"md:col-span-2"},De={class:"flex items-center justify-between mb-2"},Ee={class:"text-xs text-gray-400"},Be={class:"relative"},Se={key:0,class:"mt-2 text-sm text-red-600"},Te={class:"mt-3"},$e={class:"flex flex-wrap gap-2"},Ae=["onClick"],Ve={class:"px-8 py-6 bg-gray-50 border-t border-gray-200 rounded-b-2xl"},Le={class:"flex flex-col sm:flex-row gap-4 sm:items-center sm:justify-between"},Fe={class:"flex gap-3"},Ne=["disabled"],He=["disabled"],Oe={key:0,class:"flex items-center"},Ue={key:1,class:"flex items-center"},qe={class:"px-6 py-4 border-b border-gray-200"},Ie={class:"flex items-center justify-between"},Pe={class:"px-6 py-4 max-h-96 overflow-y-auto"},Ke={class:"space-y-3"},Re={class:"text-sm font-medium text-amber-800 mb-1"},We={class:"text-xs text-amber-700"},Ge={class:"mb-1"},Ze={class:"font-mono"},Je={class:"font-mono"},Xe={class:"px-6 py-4 border-t border-gray-200"},Ye=Object.assign({layout:mt},{__name:"Edit",props:{actividad:Object,usuarios:{type:Array,default:()=>[]},clientes:{type:Array,default:()=>[]},tipos:{type:Array,default:()=>[]},estados:{type:Array,default:()=>["pendiente","en_proceso","completado","cancelado"]}},setup(f){const v=f,j=Z(!1),b=Z({}),Q=["Materiales utilizados:","Tiempo estimado:","Pendientes:","Observaciones:","Estado del equipo:","Próximos pasos:","Dificultades encontradas:","Recomendaciones:"];function H(i){if(!i)return"";const t=new Date(i),o=D=>D.toString().padStart(2,"0"),l=t.getFullYear(),_=o(t.getMonth()+1),C=o(t.getDate()),L=o(t.getHours()),F=o(t.getMinutes());return`${l}-${_}-${C}T${L}:${F}`}function O(i){return i?new Date(i).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}const x={titulo:v.actividad.titulo,user_id:v.actividad.user_id,cliente_id:v.actividad.cliente_id,tipo:v.actividad.tipo,estado:v.actividad.estado,inicio_at:H(v.actividad.inicio_at),fin_at:H(v.actividad.fin_at),ubicacion:v.actividad.ubicacion,descripcion:v.actividad.descripcion},s=dt({...x}),tt=y(()=>Object.keys(s.errors||{}).length>0),U=y(()=>s.titulo&&s.user_id&&s.tipo&&s.estado&&s.inicio_at),z=y(()=>Object.keys(x).some(i=>s[i]!==x[i])),q=y(()=>{const i={};return Object.keys(x).forEach(t=>{s[t]!==x[t]&&(i[t]={original:x[t],current:s[t]})}),i}),et=y(()=>Object.keys(q.value).length),st=y(()=>s.estado!==x.estado),I=y(()=>{const i=["titulo","user_id","tipo","estado","inicio_at"],t=["cliente_id","fin_at","ubicacion","descripcion"];let o=i.filter(D=>s[D]).length,l=t.filter(D=>s[D]).length;const _=.7,C=.3,L=o/i.length*_*100,F=l/t.length*C*100;return Math.min(L+F,100)}),P=y(()=>{if(!s.inicio_at||!s.fin_at)return"";const i=new Date(s.inicio_at),o=new Date(s.fin_at)-i;if(isNaN(o))return"";if(o<0)return"La fecha de fin no puede ser anterior al inicio";const l=o/(1e3*60*60);return l>12?"Duración muy larga, verifica las fechas":l<.25?"Duración muy corta (menos de 15 minutos)":""}),K=y(()=>{if(!s.inicio_at||!s.fin_at)return"";const i=new Date(s.inicio_at),o=new Date(s.fin_at)-i;if(isNaN(o)||o<=0)return"";const l=Math.round(o/6e4),_=Math.floor(l/60),C=l%60;return _?`${_}h ${C}m`:`${C}m`});function g(i){var l;const t=((l=s.errors)==null?void 0:l[i])||b.value[i],o=s[i]&&s[i]!=="";return t?"border-red-300 focus:ring-red-500 bg-red-50":o?"border-green-300 focus:ring-green-500 bg-green-50":"border-gray-300 hover:border-gray-400"}function m(i){b.value={...b.value},delete b.value[i],i==="titulo"&&(!s.titulo||s.titulo.trim().length<3)&&(b.value[i]="El título debe tener al menos 3 caracteres"),i==="user_id"&&!s.user_id&&(b.value[i]="Debe seleccionar un empleado"),i==="tipo"&&!s.tipo&&(b.value[i]="Debe seleccionar un tipo"),i==="estado"&&!s.estado&&(b.value[i]="Debe seleccionar un estado"),i==="inicio_at"&&!s.inicio_at&&(b.value[i]="La fecha de inicio es obligatoria")}function A(i){return i.replace(/_/g," ").toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())}function ot(i){return{titulo:"Título",user_id:"Empleado",cliente_id:"Cliente",tipo:"Tipo",estado:"Estado",inicio_at:"Fecha de inicio",fin_at:"Fecha de fin",ubicacion:"Ubicación",descripcion:"Descripción"}[i]||i}function it(i){return{pendiente:"bg-yellow-400",en_proceso:"bg-blue-400",completado:"bg-green-400",cancelado:"bg-red-400"}[i]||"bg-gray-400"}function at(i){return{pendiente:"Por iniciar",en_proceso:"En progreso",completado:"Finalizada",cancelado:"No realizada"}[i]||""}function V(i){const t=new Date;t.setMinutes(t.getMinutes()-t.getTimezoneOffset());const o=t.toISOString().slice(0,16);s[i]=o}function T(i){if(!s.inicio_at)return;const t=new Date(s.inicio_at),o=new Date(t.getTime()-t.getTimezoneOffset()*6e4);o.setMinutes(o.getMinutes()+i);const l=new Date(o.getTime()+o.getTimezoneOffset()*6e4);l.setMinutes(l.getMinutes()-l.getTimezoneOffset()),s.fin_at=l.toISOString().slice(0,16)}function rt(i){const t=s.descripcion||"",o=t&&!t.endsWith(`
`)?`
`:"";s.descripcion=t+o+i+` 
`,nextTick(()=>{const l=document.getElementById("descripcion");l&&(l.focus(),l.setSelectionRange(l.value.length,l.value.length))})}function nt(i){const t=i.target;t.style.height="auto",t.style.height=t.scrollHeight+"px"}function R(){confirm("¿Estás seguro de que quieres deshacer todos los cambios?")&&(Object.keys(x).forEach(i=>{s[i]=x[i]}),b.value={})}function lt(){return{...s.data()}}function W(){const i=lt();s.put(route("bitacora.update",v.actividad.id),{preserveScroll:!0,data:i,onSuccess:()=>{bt.visit(route("bitacora.index"))}})}function G(i){if(i.ctrlKey&&i.key==="s"&&(i.preventDefault(),U.value&&z.value&&!s.processing&&W()),i.ctrlKey&&i.key==="z"&&!i.shiftKey&&(i.preventDefault(),z.value&&R()),i.ctrlKey&&i.key==="n"){const t=document.activeElement;if(t&&t.type==="datetime-local"){i.preventDefault();const o=t.id;V(o)}}if(i.ctrlKey&&i.key==="h"){const t=document.activeElement;t&&t.id==="fin_at"&&(i.preventDefault(),T(60))}}return ut(()=>{document.addEventListener("keydown",G),document.querySelectorAll("textarea").forEach(t=>{t.style.height="auto",t.style.height=t.scrollHeight+"px"})}),ct(()=>{document.removeEventListener("keydown",G)}),E(()=>s.titulo,()=>m("titulo"),{immediate:!0}),E(()=>s.user_id,()=>m("user_id"),{immediate:!0}),E(()=>s.tipo,()=>m("tipo"),{immediate:!0}),E(()=>s.estado,()=>m("estado"),{immediate:!0}),E(()=>s.inicio_at,()=>m("inicio_at"),{immediate:!0}),(i,t)=>(n(),r(k,null,[M(a(ft),{title:"Editar Actividad"}),e("div",xt,[e("div",gt,[e("div",yt,[e("div",ht,[e("div",kt,[t[26]||(t[26]=J('<div class="flex items-center gap-3 mb-2" data-v-bffa3511><div class="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center" data-v-bffa3511><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-bffa3511><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" data-v-bffa3511></path></svg></div><div data-v-bffa3511><h1 class="text-3xl font-bold text-gray-900 tracking-tight" data-v-bffa3511>Editar Actividad</h1><p class="text-sm text-gray-600" data-v-bffa3511>Actualiza los detalles de tu actividad</p></div></div>',1)),e("div",wt,[e("div",_t,[t[24]||(t[24]=e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),u(" Creada: "+d(O(f.actividad.created_at)),1)]),f.actividad.updated_at!==f.actividad.created_at?(n(),r("span",Ct,"•")):c("",!0),f.actividad.updated_at!==f.actividad.created_at?(n(),r("div",Mt,[t[25]||(t[25]=e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),u(" Actualizada: "+d(O(f.actividad.updated_at)),1)])):c("",!0)])]),e("div",jt,[M(a(X),{href:i.route("bitacora.show",f.actividad.id),class:"inline-flex items-center px-4 py-2.5 bg-white border border-gray-200 rounded-xl text-sm font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 shadow-sm"},{default:B(()=>t[27]||(t[27]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),u(" Ver detalles ")])),_:1},8,["href"]),M(a(X),{href:i.route("bitacora.index"),class:"inline-flex items-center px-4 py-2.5 bg-gray-100 hover:bg-gray-200 border border-gray-200 rounded-xl text-sm font-medium text-gray-700 transition-all duration-200"},{default:B(()=>t[28]||(t[28]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),u(" Volver al listado ")])),_:1},8,["href"])])])]),e("div",zt,[M(N,{name:"slide-down"},{default:B(()=>[tt.value?(n(),r("div",Dt,[e("div",Et,[t[31]||(t[31]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Bt,[t[30]||(t[30]=e("h3",{class:"text-sm font-semibold text-red-800"},"Por favor, corrige los siguientes errores:",-1)),e("div",St,[e("ul",Tt,[(n(!0),r(k,null,w(a(s).errors,(o,l)=>(n(),r("li",{key:l,class:"flex items-center"},[t[29]||(t[29]=e("svg",{class:"w-3 h-3 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 8 8"},[e("circle",{cx:"4",cy:"4",r:"3"})],-1)),u(" "+d(o),1)]))),128))])])])])])):c("",!0)]),_:1}),M(N,{name:"slide-down"},{default:B(()=>[z.value?(n(),r("div",$t,[e("div",At,[e("div",Vt,[t[33]||(t[33]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-5 h-5 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1)),e("div",Lt,[t[32]||(t[32]=e("span",{class:"font-medium text-amber-800 text-sm"},"Hay cambios sin guardar",-1)),e("p",Ft,d(et.value)+" campo(s) modificado(s)",1)])]),e("button",{type:"button",onClick:t[0]||(t[0]=o=>j.value=!0),class:"text-xs text-amber-700 hover:text-amber-800 underline"}," Ver cambios ")])])):c("",!0)]),_:1}),e("div",Nt,[e("div",Ht,[t[34]||(t[34]=e("span",{class:"text-sm font-medium text-gray-700"},"Completitud del formulario",-1)),e("span",Ot,d(Math.round(I.value))+"%",1)]),e("div",Ut,[e("div",{class:"bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full transition-all duration-300",style:vt({width:`${I.value}%`})},null,4)])])]),e("form",{onSubmit:Y(W,["prevent"]),class:"bg-white rounded-2xl shadow-lg border border-gray-200"},[e("div",qt,[e("div",It,[e("div",Pt,[t[37]||(t[37]=e("label",{for:"titulo",class:"block text-sm font-semibold text-gray-700 mb-2"},[u(" Título de la actividad "),e("span",{class:"text-red-500 ml-1"},"*")],-1)),e("div",Kt,[h(e("input",{id:"titulo","onUpdate:modelValue":t[1]||(t[1]=o=>a(s).titulo=o),type:"text",class:p(["w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",g("titulo")]),placeholder:"Ej. Instalación minisplit sucursal Centro",maxlength:"150",autocomplete:"off",onInput:t[2]||(t[2]=o=>m("titulo"))},null,34),[[S,a(s).titulo,void 0,{trim:!0}]]),a(s).titulo&&!a(s).errors.titulo?(n(),r("div",Rt,t[35]||(t[35]=[e("svg",{class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]))):c("",!0)]),e("div",Wt,[a(s).errors.titulo?(n(),r("p",Gt,[t[36]||(t[36]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),u(" "+d(a(s).errors.titulo),1)])):c("",!0),e("span",Zt,d((a(s).titulo||"").length)+" / 150",1)])]),e("div",null,[t[41]||(t[41]=e("label",{for:"user_id",class:"block text-sm font-semibold text-gray-700 mb-2"},[u(" Empleado responsable "),e("span",{class:"text-red-500 ml-1"},"*")],-1)),e("div",Jt,[h(e("select",{id:"user_id","onUpdate:modelValue":t[3]||(t[3]=o=>a(s).user_id=o),class:p(["w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 appearance-none",g("user_id")]),onChange:t[4]||(t[4]=o=>m("user_id"))},[t[38]||(t[38]=e("option",{value:"",disabled:""},"Selecciona un empleado",-1)),(n(!0),r(k,null,w(f.usuarios,o=>(n(),r("option",{key:o.id,value:o.id},d(o.name),9,Xt))),128))],34),[[$,a(s).user_id]]),t[39]||(t[39]=e("svg",{class:"w-5 h-5 text-gray-400 absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),a(s).errors.user_id?(n(),r("p",Yt,[t[40]||(t[40]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),u(" "+d(a(s).errors.user_id),1)])):c("",!0)]),e("div",null,[t[44]||(t[44]=e("label",{for:"cliente_id",class:"block text-sm font-semibold text-gray-700 mb-2"},"Cliente",-1)),e("div",Qt,[h(e("select",{id:"cliente_id","onUpdate:modelValue":t[5]||(t[5]=o=>a(s).cliente_id=o),class:p(["w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 appearance-none",g("cliente_id")])},[t[42]||(t[42]=e("option",{value:null},"— Sin cliente específico —",-1)),(n(!0),r(k,null,w(f.clientes,o=>(n(),r("option",{key:o.id,value:o.id},d(o.nombre_razon_social),9,te))),128))],2),[[$,a(s).cliente_id]]),t[43]||(t[43]=e("svg",{class:"w-5 h-5 text-gray-400 absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),a(s).errors.cliente_id?(n(),r("p",ee,d(a(s).errors.cliente_id),1)):c("",!0)]),e("div",null,[t[47]||(t[47]=e("label",{for:"tipo",class:"block text-sm font-semibold text-gray-700 mb-2"},[u(" Tipo de actividad "),e("span",{class:"text-red-500 ml-1"},"*")],-1)),e("div",se,[h(e("select",{id:"tipo","onUpdate:modelValue":t[6]||(t[6]=o=>a(s).tipo=o),class:p(["w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 appearance-none",g("tipo")]),onChange:t[7]||(t[7]=o=>m("tipo"))},[t[45]||(t[45]=e("option",{value:"",disabled:""},"Selecciona un tipo",-1)),(n(!0),r(k,null,w(f.tipos,o=>(n(),r("option",{key:o,value:o,class:"capitalize"},d(A(o)),9,oe))),128))],34),[[$,a(s).tipo]]),t[46]||(t[46]=e("svg",{class:"w-5 h-5 text-gray-400 absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),a(s).errors.tipo?(n(),r("p",ie,d(a(s).errors.tipo),1)):c("",!0)]),e("div",null,[t[49]||(t[49]=e("label",{for:"estado",class:"block text-sm font-semibold text-gray-700 mb-2"},[u(" Estado actual "),e("span",{class:"text-red-500 ml-1"},"*")],-1)),e("div",ae,[h(e("select",{id:"estado","onUpdate:modelValue":t[8]||(t[8]=o=>a(s).estado=o),class:p(["w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 appearance-none",g("estado")]),onChange:t[9]||(t[9]=o=>m("estado"))},[(n(!0),r(k,null,w(f.estados,o=>(n(),r("option",{key:o,value:o},d(A(o)),9,re))),128))],34),[[$,a(s).estado]]),t[48]||(t[48]=e("svg",{class:"w-5 h-5 text-gray-400 absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),e("div",ne,[e("div",le,[e("div",{class:p(["w-2 h-2 rounded-full mr-2",it(a(s).estado)])},null,2),e("span",de,d(at(a(s).estado)),1)]),st.value?(n(),r("span",ue," Antes: "+d(A(f.actividad.estado)),1)):c("",!0)]),a(s).errors.estado?(n(),r("p",ce,d(a(s).errors.estado),1)):c("",!0)]),e("div",null,[e("div",fe,[t[50]||(t[50]=e("label",{for:"inicio_at",class:"block text-sm font-semibold text-gray-700"},[u(" Fecha y hora de inicio "),e("span",{class:"text-red-500 ml-1"},"*")],-1)),e("div",ve,[e("button",{type:"button",onClick:t[10]||(t[10]=o=>V("inicio_at")),class:"text-xs px-3 py-1.5 bg-blue-50 text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors"}," Ahora ")])]),h(e("input",{id:"inicio_at","onUpdate:modelValue":t[11]||(t[11]=o=>a(s).inicio_at=o),type:"datetime-local",class:p(["w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",g("inicio_at")]),onChange:t[12]||(t[12]=o=>m("inicio_at"))},null,34),[[S,a(s).inicio_at]]),a(s).errors.inicio_at?(n(),r("p",be,d(a(s).errors.inicio_at),1)):c("",!0)]),e("div",null,[e("div",me,[t[51]||(t[51]=e("label",{for:"fin_at",class:"block text-sm font-semibold text-gray-700"},"Fecha y hora de fin",-1)),e("div",pe,[e("button",{type:"button",onClick:t[13]||(t[13]=o=>V("fin_at")),class:"text-xs px-2 py-1 bg-gray-50 text-gray-600 border border-gray-200 rounded hover:bg-gray-100 transition-colors"}," Ahora "),e("button",{type:"button",onClick:t[14]||(t[14]=o=>T(30)),class:"text-xs px-2 py-1 bg-gray-50 text-gray-600 border border-gray-200 rounded hover:bg-gray-100 transition-colors"}," +30m "),e("button",{type:"button",onClick:t[15]||(t[15]=o=>T(60)),class:"text-xs px-2 py-1 bg-gray-50 text-gray-600 border border-gray-200 rounded hover:bg-gray-100 transition-colors"}," +1h "),e("button",{type:"button",onClick:t[16]||(t[16]=o=>T(120)),class:"text-xs px-2 py-1 bg-gray-50 text-gray-600 border border-gray-200 rounded hover:bg-gray-100 transition-colors"}," +2h ")])]),h(e("input",{id:"fin_at","onUpdate:modelValue":t[17]||(t[17]=o=>a(s).fin_at=o),type:"datetime-local",class:p(["w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",g("fin_at")])},null,2),[[S,a(s).fin_at]]),e("div",xe,[a(s).errors.fin_at?(n(),r("p",ge,d(a(s).errors.fin_at),1)):c("",!0),K.value?(n(),r("p",ye,[t[52]||(t[52]=e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[53]||(t[53]=u(" Duración: ")),e("span",he,d(K.value),1)])):c("",!0),P.value?(n(),r("p",ke,[t[54]||(t[54]=e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L3.339 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),u(" "+d(P.value),1)])):c("",!0)])]),e("div",we,[t[56]||(t[56]=e("label",{for:"ubicacion",class:"block text-sm font-semibold text-gray-700 mb-2"},"Ubicación",-1)),e("div",_e,[h(e("input",{id:"ubicacion","onUpdate:modelValue":t[18]||(t[18]=o=>a(s).ubicacion=o),type:"text",class:p(["w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",g("ubicacion")]),placeholder:"Ej. Sucursal Centro, Blvd. X, #123",maxlength:"255"},null,2),[[S,a(s).ubicacion,void 0,{trim:!0}]]),t[55]||(t[55]=e("svg",{class:"w-5 h-5 text-gray-400 absolute right-3 top-1/2 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1))]),e("div",Ce,[a(s).errors.ubicacion?(n(),r("p",Me,d(a(s).errors.ubicacion),1)):c("",!0),e("span",je,d((a(s).ubicacion||"").length)+" / 255",1)])]),e("div",ze,[e("div",De,[t[57]||(t[57]=e("label",{for:"descripcion",class:"block text-sm font-semibold text-gray-700"},"Descripción detallada",-1)),e("span",Ee,d((a(s).descripcion||"").length)+" / 5000",1)]),e("div",Be,[h(e("textarea",{id:"descripcion","onUpdate:modelValue":t[19]||(t[19]=o=>a(s).descripcion=o),rows:"5",class:p(["w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none",g("descripcion")]),placeholder:"Detalle las actividades realizadas, materiales usados, pendientes, observaciones, etc.",maxlength:"5000",onInput:nt},null,34),[[S,a(s).descripcion,void 0,{trim:!0}]])]),a(s).errors.descripcion?(n(),r("p",Se,d(a(s).errors.descripcion),1)):c("",!0),e("div",Te,[t[58]||(t[58]=e("p",{class:"text-xs text-gray-500 mb-2"},"Plantillas rápidas:",-1)),e("div",$e,[(n(),r(k,null,w(Q,o=>e("button",{key:o,type:"button",onClick:l=>rt(o),class:"text-xs px-3 py-1.5 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors border border-blue-200"}," + "+d(o),9,Ae)),64))])])])])]),e("div",Ve,[e("div",Le,[t[62]||(t[62]=e("div",{class:"text-xs text-gray-500 flex items-start"},[e("svg",{class:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",null,"Se registrará automáticamente el usuario que actualiza y la fecha/hora del cambio.")],-1)),e("div",Fe,[e("button",{type:"button",onClick:R,disabled:a(s).processing||!z.value,class:"px-6 py-2.5 rounded-xl border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium shadow-sm"},t[59]||(t[59]=[e("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),u(" Deshacer cambios ")]),8,Ne),e("button",{type:"submit",disabled:a(s).processing||!U.value||!z.value,class:"px-6 py-2.5 rounded-xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium shadow-lg"},[a(s).processing?(n(),r("span",Ue,t[61]||(t[61]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})],-1),u(" Guardando cambios... ")]))):(n(),r("span",Oe,t[60]||(t[60]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),u(" Actualizar actividad ")])))],8,He)])])])],32),M(N,{name:"modal"},{default:B(()=>[j.value?(n(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:t[23]||(t[23]=o=>j.value=!1)},[e("div",{class:"bg-white rounded-2xl shadow-2xl max-w-md w-full",onClick:t[22]||(t[22]=Y(()=>{},["stop"]))},[e("div",qe,[e("div",Ie,[t[64]||(t[64]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Cambios realizados",-1)),e("button",{onClick:t[20]||(t[20]=o=>j.value=!1),class:"text-gray-400 hover:text-gray-600"},t[63]||(t[63]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),e("div",Pe,[e("div",Ke,[(n(!0),r(k,null,w(q.value,(o,l)=>(n(),r("div",{key:l,class:"p-3 bg-amber-50 rounded-lg border border-amber-200"},[e("div",Re,d(ot(l)),1),e("div",We,[e("div",Ge,[t[65]||(t[65]=u("Antes: ")),e("span",Ze,d(o.original||"(vacío)"),1)]),e("div",null,[t[66]||(t[66]=u("Ahora: ")),e("span",Je,d(o.current||"(vacío)"),1)])])]))),128))])]),e("div",Xe,[e("button",{onClick:t[21]||(t[21]=o=>j.value=!1),class:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors"}," Cerrar ")])])])):c("",!0)]),_:1}),t[67]||(t[67]=J('<div class="mt-8 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-2xl p-6 shadow-sm" data-v-bffa3511><div class="flex items-start" data-v-bffa3511><div class="flex-shrink-0" data-v-bffa3511><div class="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center" data-v-bffa3511><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-bffa3511><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-bffa3511></path></svg></div></div><div class="ml-4 flex-1" data-v-bffa3511><h3 class="text-sm font-semibold text-blue-900 mb-3" data-v-bffa3511>Consejos para una mejor edición</h3><div class="grid md:grid-cols-2 gap-4" data-v-bffa3511><div data-v-bffa3511><h4 class="text-xs font-medium text-blue-800 mb-2" data-v-bffa3511>🎯 Seguimiento</h4><ul class="text-xs text-blue-700 space-y-1" data-v-bffa3511><li data-v-bffa3511>• Los cambios se resaltan automáticamente</li><li data-v-bffa3511>• Puedes ver un resumen de modificaciones</li><li data-v-bffa3511>• El progreso se muestra en tiempo real</li></ul></div><div data-v-bffa3511><h4 class="text-xs font-medium text-blue-800 mb-2" data-v-bffa3511>⚡ Productividad</h4><ul class="text-xs text-blue-700 space-y-1" data-v-bffa3511><li data-v-bffa3511>• Usa las plantillas para descripciones</li><li data-v-bffa3511>• Los botones rápidos facilitan las fechas</li><li data-v-bffa3511>• Validación en tiempo real</li></ul></div></div></div></div></div><div class="mt-4 text-center" data-v-bffa3511><details class="group" data-v-bffa3511><summary class="text-xs text-gray-500 cursor-pointer hover:text-gray-700 transition-colors" data-v-bffa3511> 💡 Mostrar atajos de teclado </summary><div class="mt-3 bg-gray-900 text-gray-300 rounded-xl p-4 text-xs" data-v-bffa3511><div class="grid md:grid-cols-3 gap-4" data-v-bffa3511><div data-v-bffa3511><div class="font-medium text-white mb-2" data-v-bffa3511>Navegación</div><div class="space-y-1" data-v-bffa3511><div data-v-bffa3511><kbd class="bg-gray-800 px-1 rounded" data-v-bffa3511>Tab</kbd> Siguiente campo</div><div data-v-bffa3511><kbd class="bg-gray-800 px-1 rounded" data-v-bffa3511>Shift+Tab</kbd> Campo anterior</div></div></div><div data-v-bffa3511><div class="font-medium text-white mb-2" data-v-bffa3511>Acciones</div><div class="space-y-1" data-v-bffa3511><div data-v-bffa3511><kbd class="bg-gray-800 px-1 rounded" data-v-bffa3511>Ctrl+S</kbd> Guardar</div><div data-v-bffa3511><kbd class="bg-gray-800 px-1 rounded" data-v-bffa3511>Ctrl+Z</kbd> Deshacer</div></div></div><div data-v-bffa3511><div class="font-medium text-white mb-2" data-v-bffa3511>Tiempo</div><div class="space-y-1" data-v-bffa3511><div data-v-bffa3511><kbd class="bg-gray-800 px-1 rounded" data-v-bffa3511>Ctrl+N</kbd> Fecha actual</div><div data-v-bffa3511><kbd class="bg-gray-800 px-1 rounded" data-v-bffa3511>Ctrl+H</kbd> +1 hora</div></div></div></div></div></details></div>',2))])])],64))}}),is=pt(Ye,[["__scopeId","data-v-bffa3511"]]);export{is as default};
