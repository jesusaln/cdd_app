import{r as v,c as U,i,o as r,g as K,f as t,u as h,Z as X,t as o,v as y,z as q,P as Z,x as w,F as f,m as _,k,l as M,n as z,b as E,e as O,A as P,N as G}from"./vendor-d19pJyVS.js";import{A as J}from"./AppLayout-CcnrZQKI.js";import{N as Q}from"./app-BcT2PLJy.js";import"./utils-Dq7h7Pqt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"min-h-screen bg-gray-50"},W={class:"max-w-7xl mx-auto px-6 py-8"},Y={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},$={class:"bg-white rounded-lg shadow p-6"},tt={class:"flex items-center"},et={class:"ml-4"},st={class:"text-2xl font-bold text-gray-900"},ot={class:"bg-white rounded-lg shadow p-6"},at={class:"flex items-center"},rt={class:"ml-4"},lt={class:"text-2xl font-bold text-gray-900"},it={class:"bg-white rounded-lg shadow p-6"},dt={class:"flex items-center"},nt={class:"ml-4"},ut={class:"text-2xl font-bold text-gray-900"},pt={class:"bg-white rounded-lg shadow p-6"},xt={class:"flex items-center"},ct={class:"ml-4"},mt={class:"text-2xl font-bold text-gray-900"},gt={class:"bg-white rounded-lg shadow mb-6 p-6"},vt={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},yt=["value"],ft=["value"],bt={class:"bg-white rounded-lg shadow overflow-hidden"},ht={class:"overflow-x-auto"},wt={class:"min-w-full divide-y divide-gray-200"},_t={class:"bg-white divide-y divide-gray-200"},kt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Mt={class:"text-xs text-gray-500"},Ct={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Vt={class:"px-6 py-4 whitespace-nowrap"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},jt=["title"],Bt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},At={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},Ft={class:"flex items-center justify-between"},Nt={class:"text-sm text-gray-700"},Dt={class:"flex space-x-1"},Pt=Object.assign({layout:J},{__name:"Index",props:{movimientos:{type:[Object,Array],required:!0},stats:{type:Object,default:()=>({})},productos:{type:Array,default:()=>[]},almacenes:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(b){var T,V,S,j;new Q({duration:4e3,position:{x:"right",y:"top"},types:[{type:"success",background:"#10b981",icon:!1},{type:"error",background:"#ef4444",icon:!1},{type:"warning",background:"#f59e0b",icon:!1}]});const a=b,p=v(((T=a.filters)==null?void 0:T.search)??""),x=v(((V=a.filters)==null?void 0:V.producto_id)??""),c=v(((S=a.filters)==null?void 0:S.almacen_id)??""),m=v(((j=a.filters)==null?void 0:j.tipo)??""),I=U(()=>{var l;return((l=a.movimientos)==null?void 0:l.data)||[]}),g=U(()=>{var l,e,n,u;return{total:((l=a.stats)==null?void 0:l.total_movimientos)??0,entradas:((e=a.stats)==null?void 0:e.entradas)??0,salidas:((n=a.stats)==null?void 0:n.salidas)??0,traspasos:((u=a.stats)==null?void 0:u.traspasos)??0}});function d(){G.get(route("movimientos-inventario.index"),{search:p.value,producto_id:x.value,almacen_id:c.value,tipo:m.value},{preserveState:!0,preserveScroll:!0})}function H(){p.value="",x.value="",c.value="",m.value="",d()}function C(l){return l==="entrada"?{text:"Entrada",class:"bg-green-100 text-green-800"}:{text:"Salida",class:"bg-red-100 text-red-800"}}return(l,e)=>{var n,u,B,A,F,N,D,L;return r(),i(f,null,[K(h(X),{title:"Movimientos de Inventario"}),t("div",R,[t("div",W,[e[22]||(e[22]=t("div",{class:"mb-8"},[t("div",{class:"flex items-center justify-between"},[t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Movimientos de Inventario"),t("p",{class:"text-gray-600 mt-1"},"Historial completo de entradas, salidas y traspasos")])])],-1)),t("div",Y,[t("div",$,[t("div",tt,[e[5]||(e[5]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),t("div",et,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Movimientos",-1)),t("p",st,o(g.value.total),1)])])]),t("div",ot,[t("div",at,[e[7]||(e[7]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1)),t("div",rt,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-600"},"Entradas",-1)),t("p",lt,o(g.value.entradas),1)])])]),t("div",it,[t("div",dt,[e[9]||(e[9]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-8 w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})])],-1)),t("div",nt,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-600"},"Salidas",-1)),t("p",ut,o(g.value.salidas),1)])])]),t("div",pt,[t("div",xt,[e[11]||(e[11]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-8 w-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})])],-1)),t("div",ct,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-gray-600"},"Traspasos",-1)),t("p",mt,o(g.value.traspasos),1)])])])]),t("div",gt,[t("div",vt,[t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Buscar",-1)),y(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>p.value=s),type:"text",placeholder:"Producto, almacén, motivo...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",onKeyup:Z(d,["enter"])},null,544),[[q,p.value]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Producto",-1)),y(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>x.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",onChange:d},[e[13]||(e[13]=t("option",{value:""},"Todos los productos",-1)),(r(!0),i(f,null,_(b.productos,s=>(r(),i("option",{key:s.id,value:s.id},o(s.nombre),9,yt))),128))],544),[[w,x.value]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Almacén",-1)),y(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>c.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",onChange:d},[e[15]||(e[15]=t("option",{value:""},"Todos los almacenes",-1)),(r(!0),i(f,null,_(b.almacenes,s=>(r(),i("option",{key:s.id,value:s.id},o(s.nombre),9,ft))),128))],544),[[w,c.value]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tipo",-1)),y(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>m.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",onChange:d},e[17]||(e[17]=[t("option",{value:""},"Todos los tipos",-1),t("option",{value:"entrada"},"Entradas",-1),t("option",{value:"salida"},"Salidas",-1)]),544),[[w,m.value]])]),t("div",{class:"flex items-end"},[t("button",{onClick:H,class:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors"}," Limpiar ")])])]),t("div",bt,[t("div",ht,[t("table",wt,[e[19]||(e[19]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Fecha "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Producto "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Almacén "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tipo "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Cantidad "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Motivo "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Usuario ")])],-1)),t("tbody",_t,[(r(!0),i(f,null,_(I.value,s=>(r(),i("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",kt,[M(o(new Date(s.created_at).toLocaleDateString("es-MX"))+" ",1),t("div",Mt,o(new Date(s.created_at).toLocaleTimeString("es-MX",{hour:"2-digit",minute:"2-digit"})),1)]),t("td",Ct,o(s.producto_nombre),1),t("td",Tt,o(s.almacen_nombre),1),t("td",Vt,[t("span",{class:z([C(s.tipo).class,"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},o(C(s.tipo).text),3)]),t("td",St,[t("span",{class:z(s.tipo==="entrada"?"text-green-600":"text-red-600")},o(s.tipo==="entrada"?"+":"-")+o(s.cantidad),3)]),t("td",{class:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",title:s.motivo},o(s.motivo),9,jt),t("td",Bt,o(s.usuario_nombre||"Sistema"),1)]))),128))])])]),((n=a.movimientos)==null?void 0:n.last_page)>1?(r(),i("div",At,[t("div",Ft,[t("div",Nt," Mostrando "+o((u=a.movimientos)==null?void 0:u.from)+" a "+o((B=a.movimientos)==null?void 0:B.to)+" de "+o((A=a.movimientos)==null?void 0:A.total)+" resultados ",1),t("div",Dt,[(F=a.movimientos)!=null&&F.prev_page_url?(r(),E(h(P),{key:0,href:(N=a.movimientos)==null?void 0:N.prev_page_url,class:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},{default:O(()=>e[20]||(e[20]=[M(" Anterior ")])),_:1},8,["href"])):k("",!0),(D=a.movimientos)!=null&&D.next_page_url?(r(),E(h(P),{key:1,href:(L=a.movimientos)==null?void 0:L.next_page_url,class:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},{default:O(()=>e[21]||(e[21]=[M(" Siguiente ")])),_:1},8,["href"])):k("",!0)])])])):k("",!0)])])])],64)}}});export{Pt as default};
