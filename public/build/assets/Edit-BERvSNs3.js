import{T as E,r as h,c as w,i as l,o as d,g as U,f as e,u as a,Z as q,q as F,k as i,v as u,x as f,F as C,m as P,t as s,z as b,s as v,N as V}from"./vendor-d19pJyVS.js";import{A as D}from"./AppLayout-CcnrZQKI.js";import{N as j}from"./app-BcT2PLJy.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Dq7h7Pqt.js";const I={class:"cobranza-edit min-h-screen bg-gray-50"},O={class:"max-w-4xl mx-auto px-6 py-8"},T={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},B={class:"md:col-span-2"},R=["value"],$={key:0,class:"mt-1 text-sm text-red-600"},L={key:0,class:"mt-1 text-sm text-red-600"},G={key:0,class:"mt-1 text-sm text-red-600"},Z={class:"relative"},H={key:0,class:"mt-1 text-sm text-red-600"},J={key:0,class:"mt-1 text-sm text-red-600"},K={key:0,class:"md:col-span-2"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},W={key:0,class:"mt-1 text-sm text-red-600"},X={class:"relative"},Y={key:0,class:"mt-1 text-sm text-red-600"},oo={key:0,class:"mt-1 text-sm text-red-600"},eo={key:0,class:"mt-1 text-sm text-red-600"},to={key:1,class:"md:col-span-2 bg-blue-50 border border-blue-200 rounded-lg p-4"},ao={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},ro={class:"text-blue-900 ml-2"},so={class:"text-blue-900 ml-2"},no={class:"text-blue-900 ml-2 capitalize"},lo={class:"md:col-span-2"},io={key:0,class:"mt-1 text-sm text-red-600"},uo={class:"flex justify-end gap-4 mt-8 pt-6 border-t border-gray-200"},po=["disabled"],M=g=>g?new Intl.NumberFormat("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2}).format(g):"0",bo=Object.assign({layout:D},{__name:"Edit",props:{cobranza:{type:Object,required:!0},rentas:{type:Array,default:()=>[]}},setup(g){const x=new j({duration:4e3,position:{x:"right",y:"top"},types:[{type:"success",background:"#10b981",icon:!1},{type:"error",background:"#ef4444",icon:!1},{type:"warning",background:"#f59e0b",icon:!1}]}),n=g,t=E({renta_id:n.cobranza.renta_id||"",fecha_cobro:n.cobranza.fecha_cobro?new Date(n.cobranza.fecha_cobro).toISOString().split("T")[0]:"",monto_cobrado:n.cobranza.monto_cobrado||"",concepto:n.cobranza.concepto||"mensualidad",estado:n.cobranza.estado||"pendiente",fecha_pago:n.cobranza.fecha_pago?new Date(n.cobranza.fecha_pago).toISOString().split("T")[0]:"",monto_pagado:n.cobranza.monto_pagado||"",metodo_pago:n.cobranza.metodo_pago||"",referencia_pago:n.cobranza.referencia_pago||"",notas:n.cobranza.notas||""}),c=h(!1),S=w(()=>n.rentas.filter(m=>m.estado==="activo")),p=w(()=>n.rentas.find(m=>m.id==t.renta_id)),N=()=>{c.value=!0,t.put(route("cobranza.update",n.cobranza.id),{onSuccess:()=>{x.success("Cobranza actualizada exitosamente"),V.visit(route("cobranza.index"))},onError:m=>{x.error("Error al actualizar la cobranza"),c.value=!1},onFinish:()=>{c.value=!1}})},y=()=>{p.value&&t.concepto==="mensualidad"&&(t.monto_cobrado=p.value.monto_mensual||"")},_=()=>{V.visit(route("cobranza.index"))};return(m,o)=>{var k;return d(),l(C,null,[U(a(q),{title:"Editar Cobranza"}),e("div",I,[e("div",O,[e("div",{class:"bg-white border border-slate-200 rounded-xl shadow-sm p-8 mb-6"},[e("div",{class:"flex items-center gap-3"},[e("button",{onClick:_,class:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors"},o[10]||(o[10]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),o[11]||(o[11]=e("div",null,[e("h1",{class:"text-2xl font-bold text-slate-900"},"Editar Cobranza"),e("p",{class:"text-slate-600 mt-1"},"Modifica los datos de la cobranza")],-1))])]),e("form",{onSubmit:F(N,["prevent"]),class:"bg-white rounded-xl shadow-sm border border-gray-100 p-8"},[e("div",T,[e("div",B,[o[13]||(o[13]=e("label",{for:"renta_id",class:"block text-sm font-medium text-gray-700 mb-2"}," Renta * ",-1)),u(e("select",{"onUpdate:modelValue":o[0]||(o[0]=r=>a(t).renta_id=r),onChange:y,id:"renta_id",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},[o[12]||(o[12]=e("option",{value:""},"Selecciona una renta",-1)),(d(!0),l(C,null,P(S.value,r=>{var z;return d(),l("option",{key:r.id,value:r.id},s(r.numero_contrato)+" - "+s((z=r.cliente)==null?void 0:z.nombre_razon_social)+" ($"+s(M(r.monto_mensual))+"/mes) ",9,R)}),128))],544),[[f,a(t).renta_id]]),a(t).errors.renta_id?(d(),l("p",$,s(a(t).errors.renta_id),1)):i("",!0)]),e("div",null,[o[14]||(o[14]=e("label",{for:"fecha_cobro",class:"block text-sm font-medium text-gray-700 mb-2"}," Fecha de Cobro * ",-1)),u(e("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>a(t).fecha_cobro=r),id:"fecha_cobro",type:"date",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},null,512),[[b,a(t).fecha_cobro]]),a(t).errors.fecha_cobro?(d(),l("p",L,s(a(t).errors.fecha_cobro),1)):i("",!0)]),e("div",null,[o[16]||(o[16]=e("label",{for:"concepto",class:"block text-sm font-medium text-gray-700 mb-2"}," Concepto * ",-1)),u(e("select",{"onUpdate:modelValue":o[2]||(o[2]=r=>a(t).concepto=r),onChange:y,id:"concepto",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},o[15]||(o[15]=[v('<option value="mensualidad" data-v-43b706ab>Mensualidad</option><option value="deposito_garantia" data-v-43b706ab>Depósito de Garantía</option><option value="mora" data-v-43b706ab>Mora</option><option value="reparacion" data-v-43b706ab>Reparación</option><option value="otro" data-v-43b706ab>Otro</option>',5)]),544),[[f,a(t).concepto]]),a(t).errors.concepto?(d(),l("p",G,s(a(t).errors.concepto),1)):i("",!0)]),e("div",null,[o[18]||(o[18]=e("label",{for:"monto_cobrado",class:"block text-sm font-medium text-gray-700 mb-2"}," Monto a Cobrar * ",-1)),e("div",Z,[o[17]||(o[17]=e("span",{class:"absolute left-3 top-3 text-gray-500"},"$",-1)),u(e("input",{"onUpdate:modelValue":o[3]||(o[3]=r=>a(t).monto_cobrado=r),id:"monto_cobrado",type:"number",step:"0.01",min:"0",class:"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",required:""},null,512),[[b,a(t).monto_cobrado]])]),a(t).errors.monto_cobrado?(d(),l("p",H,s(a(t).errors.monto_cobrado),1)):i("",!0)]),e("div",null,[o[20]||(o[20]=e("label",{for:"estado",class:"block text-sm font-medium text-gray-700 mb-2"}," Estado * ",-1)),u(e("select",{"onUpdate:modelValue":o[4]||(o[4]=r=>a(t).estado=r),id:"estado",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},o[19]||(o[19]=[v('<option value="pendiente" data-v-43b706ab>Pendiente</option><option value="pagado" data-v-43b706ab>Pagado</option><option value="parcial" data-v-43b706ab>Parcial</option><option value="vencido" data-v-43b706ab>Vencido</option><option value="cancelado" data-v-43b706ab>Cancelado</option>',5)]),512),[[f,a(t).estado]]),a(t).errors.estado?(d(),l("p",J,s(a(t).errors.estado),1)):i("",!0)]),a(t).estado==="pagado"||a(t).estado==="parcial"?(d(),l("div",K,[o[27]||(o[27]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Información de Pago",-1)),e("div",Q,[e("div",null,[o[21]||(o[21]=e("label",{for:"fecha_pago",class:"block text-sm font-medium text-gray-700 mb-2"}," Fecha de Pago ",-1)),u(e("input",{"onUpdate:modelValue":o[5]||(o[5]=r=>a(t).fecha_pago=r),id:"fecha_pago",type:"date",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[b,a(t).fecha_pago]]),a(t).errors.fecha_pago?(d(),l("p",W,s(a(t).errors.fecha_pago),1)):i("",!0)]),e("div",null,[o[23]||(o[23]=e("label",{for:"monto_pagado",class:"block text-sm font-medium text-gray-700 mb-2"}," Monto Pagado ",-1)),e("div",X,[o[22]||(o[22]=e("span",{class:"absolute left-3 top-3 text-gray-500"},"$",-1)),u(e("input",{"onUpdate:modelValue":o[6]||(o[6]=r=>a(t).monto_pagado=r),id:"monto_pagado",type:"number",step:"0.01",min:"0",class:"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"},null,512),[[b,a(t).monto_pagado]])]),a(t).errors.monto_pagado?(d(),l("p",Y,s(a(t).errors.monto_pagado),1)):i("",!0)]),e("div",null,[o[25]||(o[25]=e("label",{for:"metodo_pago",class:"block text-sm font-medium text-gray-700 mb-2"}," Método de Pago ",-1)),u(e("select",{"onUpdate:modelValue":o[7]||(o[7]=r=>a(t).metodo_pago=r),id:"metodo_pago",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},o[24]||(o[24]=[v('<option value="" data-v-43b706ab>Selecciona método</option><option value="efectivo" data-v-43b706ab>Efectivo</option><option value="transferencia" data-v-43b706ab>Transferencia</option><option value="tarjeta" data-v-43b706ab>Tarjeta</option><option value="cheque" data-v-43b706ab>Cheque</option>',5)]),512),[[f,a(t).metodo_pago]]),a(t).errors.metodo_pago?(d(),l("p",oo,s(a(t).errors.metodo_pago),1)):i("",!0)]),e("div",null,[o[26]||(o[26]=e("label",{for:"referencia_pago",class:"block text-sm font-medium text-gray-700 mb-2"}," Referencia de Pago ",-1)),u(e("input",{"onUpdate:modelValue":o[8]||(o[8]=r=>a(t).referencia_pago=r),id:"referencia_pago",type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Número de recibo, folio, etc."},null,512),[[b,a(t).referencia_pago]]),a(t).errors.referencia_pago?(d(),l("p",eo,s(a(t).errors.referencia_pago),1)):i("",!0)])])])):i("",!0),p.value?(d(),l("div",to,[o[31]||(o[31]=e("h3",{class:"text-sm font-medium text-blue-900 mb-2"},"Información de la Renta",-1)),e("div",ao,[e("div",null,[o[28]||(o[28]=e("span",{class:"text-blue-700 font-medium"},"Cliente:",-1)),e("span",ro,s((k=p.value.cliente)==null?void 0:k.nombre_razon_social),1)]),e("div",null,[o[29]||(o[29]=e("span",{class:"text-blue-700 font-medium"},"Monto Mensual:",-1)),e("span",so,"$"+s(M(p.value.monto_mensual)),1)]),e("div",null,[o[30]||(o[30]=e("span",{class:"text-blue-700 font-medium"},"Estado:",-1)),e("span",no,s(p.value.estado),1)])])])):i("",!0),e("div",lo,[o[32]||(o[32]=e("label",{for:"notas",class:"block text-sm font-medium text-gray-700 mb-2"}," Notas ",-1)),u(e("textarea",{"onUpdate:modelValue":o[9]||(o[9]=r=>a(t).notas=r),id:"notas",rows:"3",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-vertical",placeholder:"Observaciones adicionales sobre este cobro..."},null,512),[[b,a(t).notas]]),a(t).errors.notas?(d(),l("p",io,s(a(t).errors.notas),1)):i("",!0)])]),e("div",uo,[e("button",{type:"button",onClick:_,class:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-medium"}," Cancelar "),e("button",{type:"submit",disabled:c.value,class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium"},s(c.value?"Actualizando...":"Actualizar Cobranza"),9,po)])],32)])])],64)}}}),xo=A(bo,[["__scopeId","data-v-43b706ab"]]);export{xo as default};
