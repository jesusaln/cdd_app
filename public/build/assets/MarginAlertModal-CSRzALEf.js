import{b as x,o as a,e as l,f as e,i as r,F as g,m as y,t as n,g as u,l as _,n as b}from"./vendor-d19pJyVS.js";import{_ as w}from"./Modal-DXOFbFUN.js";import{_ as v}from"./PrimaryButton-D_2lIeSZ.js";import{_ as h}from"./SecondaryButton-BHgzZ2Qe.js";const k={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},j={class:"sm:flex sm:items-start"},B={class:"mt-3 text-center sm:mt-0 sm:ms-4 sm:text-start flex-1"},M={class:"mt-4 text-sm text-gray-600 dark:text-gray-400"},C={class:"space-y-3 max-h-60 overflow-y-auto"},$={class:"flex justify-between items-start"},z={class:"flex-1"},A={class:"font-medium text-gray-900 dark:text-gray-100"},F={class:"mt-2 space-y-1 text-xs text-gray-600 dark:text-gray-400"},N={class:"flex justify-between"},D={class:"font-medium"},L={class:"flex justify-between"},P={class:"font-medium text-green-600"},V={class:"flex justify-between"},I={class:"font-medium text-red-600"},S={class:"flex justify-between"},W={class:"flex flex-col sm:flex-row justify-end gap-3 px-6 py-4 bg-gray-100 dark:bg-gray-800"},q={key:0},E={key:1},G={__name:"MarginAlertModal",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},productosBajoMargen:{type:Array,default:()=>[]},processing:{type:Boolean,default:!1}},emits:["close","ajustar-automaticamente"],setup(s,{emit:f}){const d=f,c=()=>{d("close")},p=()=>{d("ajustar-automaticamente")},i=m=>new Intl.NumberFormat("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2}).format(m);return(m,t)=>(a(),x(w,{show:s.show,"max-width":s.maxWidth,closeable:s.closeable,onClose:c},{default:l(()=>[e("div",k,[e("div",j,[t[6]||(t[6]=e("div",{class:"mx-auto shrink-0 flex items-center justify-center size-12 rounded-full bg-yellow-100 sm:mx-0 sm:size-10"},[e("svg",{class:"size-6 text-yellow-600 dark:text-yellow-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})])],-1)),e("div",B,[t[5]||(t[5]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," ⚠️ Productos con Margen Insuficiente ",-1)),e("div",M,[t[4]||(t[4]=e("p",{class:"mb-4"}," Los siguientes productos tienen un margen de ganancia por debajo del mínimo requerido (5% adicional al costo de compra). Puedes ajustar automáticamente los precios o revisarlos manualmente. ",-1)),e("div",C,[(a(!0),r(g,null,y(s.productosBajoMargen,o=>(a(),r("div",{key:o.producto.id,class:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3"},[e("div",$,[e("div",z,[e("h4",A,n(o.producto.nombre),1),e("div",F,[e("div",N,[t[0]||(t[0]=e("span",null,"Precio actual:",-1)),e("span",D,"$"+n(i(o.precio_actual)),1)]),e("div",L,[t[1]||(t[1]=e("span",null,"Precio sugerido:",-1)),e("span",P,"$"+n(i(o.precio_sugerido)),1)]),e("div",V,[t[2]||(t[2]=e("span",null,"Diferencia:",-1)),e("span",I,"$"+n(i(o.diferencia)),1)]),e("div",S,[t[3]||(t[3]=e("span",null,"Costo de compra:",-1)),e("span",null,"$"+n(i(o.producto.precio_compra||0)),1)])])])])]))),128))])])])])]),e("div",W,[u(h,{onClick:c},{default:l(()=>t[7]||(t[7]=[_(" Revisar Manualmente ")])),_:1}),u(v,{onClick:p,class:b({"opacity-25":s.processing}),disabled:s.processing},{default:l(()=>[s.processing?(a(),r("span",q,"Ajustando...")):(a(),r("span",E,"Ajustar Automáticamente"))]),_:1},8,["class","disabled"])])]),_:1},8,["show","max-width","closeable"]))}};export{G as _};
