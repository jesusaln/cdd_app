import{Q as C,p as $,c as y,i as n,o as i,g as w,f as t,u as P,Z as z,e as D,l as m,A as T,t as e,n as b,F as f,m as k,k as j,J as B}from"./vendor-d19pJyVS.js";import{A as E}from"./AppLayout-CcnrZQKI.js";import{N as I}from"./app-BcT2PLJy.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Dq7h7Pqt.js";const V={class:"prestamos-show min-h-screen bg-gray-50"},L={class:"max-w-6xl mx-auto px-6 py-8"},A={class:"mb-8"},q={class:"flex items-center justify-between"},O={class:"flex items-center space-x-3"},R={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},H={class:"lg:col-span-2"},X={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},J={class:"p-6 space-y-4"},Q={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Z={class:"text-sm text-gray-600"},G={class:"text-sm text-gray-600"},K={class:"text-sm text-gray-600"},U={class:"text-sm text-gray-600"},W={class:"text-sm text-gray-600"},Y={class:"text-sm text-gray-600"},tt={class:"text-sm text-gray-600"},st={class:"bg-gray-50 rounded-lg p-4"},et={class:"grid grid-cols-2 gap-4 text-sm"},ot={class:"text-lg font-semibold text-gray-900"},at={class:"text-lg font-semibold text-green-600"},rt={class:"text-lg font-semibold text-orange-600"},nt={class:"text-lg font-semibold text-blue-600"},it={class:"bg-white border border-gray-200 rounded-lg"},dt={class:"p-4"},lt={key:0,class:"space-y-3"},mt={class:"flex justify-between items-start mb-2"},ct={class:"font-medium text-gray-900"},gt={class:"text-sm text-gray-600"},ut={class:"text-right"},xt={class:"text-sm font-medium text-gray-900"},pt={class:"text-xs text-gray-500"},yt={key:0,class:"mt-3 pl-4 border-l-2 border-gray-200"},bt={class:"space-y-2"},ft={class:"font-medium"},vt={class:"text-gray-500 ml-2"},_t={class:"text-right"},ht={class:"text-gray-600"},wt={key:0,class:"text-gray-500 ml-2"},Pt={key:1,class:"text-center py-8"},kt={class:"lg:col-span-1"},jt={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-6"},Mt={class:"p-6"},Ft={class:"text-center mb-4"},Nt={class:"text-3xl font-bold text-gray-900 mb-2"},Ct={class:"w-full bg-gray-200 rounded-full h-2"},$t={class:"text-sm text-gray-600 mt-2"},zt={class:"space-y-3"},Dt={class:"flex justify-between items-center"},Tt={class:"flex justify-between items-center"},Bt={class:"text-sm font-medium text-orange-600"},Et={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},It={class:"p-6"},St={key:0,class:"text-center"},Vt={class:"text-2xl font-bold text-green-600 mb-2"},Lt={class:"text-sm text-gray-600 mb-4"},At={class:"text-sm text-gray-600"},qt={key:1,class:"text-center py-8"},Ot=Object.assign({layout:E},{__name:"Show",props:{prestamo:{type:Object,required:!0}},setup(a){const l=a,v=new I({duration:4e3,position:{x:"right",y:"top"},types:[{type:"success",background:"#10b981",icon:!1},{type:"error",background:"#ef4444",icon:!1},{type:"warning",background:"#f59e0b",icon:!1}]}),M=C();$(()=>{const o=M.props.flash;o!=null&&o.success&&v.success(o.success),o!=null&&o.error&&v.error(o.error)});const r=o=>{const s=parseFloat(o),u=Number.isFinite(s)?s:0;return new Intl.NumberFormat("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2}).format(u)},g=o=>{if(!o)return"Fecha no disponible";try{const s=new Date(o).getTime();return Number.isNaN(s)?"Fecha inválida":new Date(s).toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return"Fecha inválida"}},x=o=>({activo:"Activo",completado:"Completado",cancelado:"Cancelado"})[o]||o,_=o=>({activo:"bg-green-100 text-green-800",completado:"bg-blue-100 text-blue-800",cancelado:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",F=o=>({efectivo:"Efectivo",transferencia:"Transferencia Bancaria",tarjeta_debito:"Tarjeta de Débito",tarjeta_credito:"Tarjeta de Crédito",cheque:"Cheque",otro:"Otro"})[o]||"No especificado",p=y(()=>l.prestamo.numero_pagos==0?0:Math.round(l.prestamo.pagos_realizados/l.prestamo.numero_pagos*100)),N=y(()=>Math.max(0,l.prestamo.monto_total_pagar-l.prestamo.monto_pagado)),h=y(()=>l.prestamo.pagos?l.prestamo.pagos.map(o=>({...o,historial_pagos:o.historial_pagos||[]})):[]);return(o,s)=>{var u;return i(),n(f,null,[w(P(z),{title:"Detalles de Préstamo"}),t("div",V,[t("div",L,[t("div",A,[t("div",q,[s[1]||(s[1]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900 tracking-tight"},"Detalles de Préstamo"),t("p",{class:"text-gray-600 mt-2"},"Información completa del préstamo y su historial de pagos")],-1)),t("div",O,[w(P(T),{href:"/prestamos",class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200"},{default:D(()=>s[0]||(s[0]=[m(" ← Volver a Préstamos ")])),_:1})])])]),t("div",R,[t("div",H,[t("div",X,[s[17]||(s[17]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h2",{class:"text-lg font-semibold text-gray-900"},"Información del Préstamo")],-1)),t("div",J,[t("div",Q,[t("div",null,[t("p",Z,[s[2]||(s[2]=t("strong",null,"Cliente:",-1)),m(" "+e(((u=a.prestamo.cliente)==null?void 0:u.nombre_razon_social)||"Sin cliente"),1)]),t("p",G,[s[3]||(s[3]=t("strong",null,"Monto Prestado:",-1)),m(" $"+e(r(a.prestamo.monto_prestado)),1)]),t("p",K,[s[4]||(s[4]=t("strong",null,"Tasa Mensual:",-1)),m(" "+e(a.prestamo.tasa_interes_mensual)+"% ",1)]),t("p",U,[s[5]||(s[5]=t("strong",null,"Pago Periódico:",-1)),m(" $"+e(r(a.prestamo.pago_periodico)),1)])]),t("div",null,[t("p",W,[s[6]||(s[6]=t("strong",null,"Estado:",-1)),t("span",{class:b([_(a.prestamo.estado),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ml-2"])},e(x(a.prestamo.estado)),3)]),t("p",Y,[s[7]||(s[7]=t("strong",null,"Pagos Realizados:",-1)),m(" "+e(a.prestamo.pagos_realizados)+" / "+e(a.prestamo.numero_pagos),1)]),t("p",tt,[s[8]||(s[8]=t("strong",null,"Fecha de Inicio:",-1)),m(" "+e(g(a.prestamo.fecha_inicio)),1)])])]),t("div",st,[s[13]||(s[13]=t("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Resumen Financiero",-1)),t("div",et,[t("div",null,[s[9]||(s[9]=t("p",{class:"text-gray-600"},"Total a Pagar:",-1)),t("p",ot,"$"+e(r(a.prestamo.monto_total_pagar)),1)]),t("div",null,[s[10]||(s[10]=t("p",{class:"text-gray-600"},"Total Pagado:",-1)),t("p",at,"$"+e(r(a.prestamo.monto_pagado)),1)]),t("div",null,[s[11]||(s[11]=t("p",{class:"text-gray-600"},"Monto Pendiente:",-1)),t("p",rt,"$"+e(r(a.prestamo.monto_pendiente)),1)]),t("div",null,[s[12]||(s[12]=t("p",{class:"text-gray-600"},"Interés Total:",-1)),t("p",nt,"$"+e(r(a.prestamo.monto_interes_total)),1)])])]),t("div",it,[s[16]||(s[16]=t("div",{class:"px-4 py-3 border-b border-gray-200"},[t("h4",{class:"text-sm font-medium text-gray-900"},"Historial de Pagos"),t("p",{class:"text-sm text-gray-600 mt-1"},"Registro completo de todos los pagos realizados")],-1)),t("div",dt,[h.value.length>0?(i(),n("div",lt,[(i(!0),n(f,null,k(h.value,d=>(i(),n("div",{key:d.id,class:"border border-gray-200 rounded-lg p-3"},[t("div",mt,[t("div",null,[t("div",ct,"Pago #"+e(d.numero_pago),1),t("div",gt,e(g(d.fecha_programada)),1)]),t("div",ut,[t("div",xt," $"+e(r(d.monto_pagado))+" / $"+e(r(d.monto_programado)),1),t("div",pt,e(x(d.estado)),1)])]),d.historial_pagos&&d.historial_pagos.length>0?(i(),n("div",yt,[s[14]||(s[14]=t("div",{class:"text-xs text-gray-600 mb-2 font-medium"},"Pagos individuales:",-1)),t("div",bt,[(i(!0),n(f,null,k(d.historial_pagos,c=>(i(),n("div",{key:c.id,class:"flex justify-between items-center text-xs bg-gray-50 p-2 rounded"},[t("div",null,[t("span",ft,"$"+e(r(c.monto_pagado)),1),t("span",vt,e(g(c.fecha_pago)),1)]),t("div",_t,[t("span",ht,e(F(c.metodo_pago)),1),c.referencia?(i(),n("span",wt,e(c.referencia),1)):j("",!0)])]))),128))])])):j("",!0)]))),128))])):(i(),n("div",Pt,s[15]||(s[15]=[t("div",{class:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3"},[t("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1),t("p",{class:"text-sm text-gray-500"},"No hay pagos registrados aún",-1)])))])])])])]),t("div",kt,[t("div",jt,[s[20]||(s[20]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Progreso del Préstamo")],-1)),t("div",Mt,[t("div",Ft,[t("div",Nt,e(p.value)+"%",1),t("div",Ct,[t("div",{class:b(["h-2 rounded-full transition-all duration-300",p.value===100?"bg-green-500":"bg-blue-500"]),style:B({width:p.value+"%"})},null,6)]),t("div",$t,e(a.prestamo.pagos_realizados)+" de "+e(a.prestamo.numero_pagos)+" pagos ",1)]),t("div",zt,[t("div",Dt,[s[18]||(s[18]=t("span",{class:"text-sm text-gray-600"},"Estado:",-1)),t("span",{class:b(["text-sm font-medium",_(a.prestamo.estado)])},e(x(a.prestamo.estado)),3)]),t("div",Tt,[s[19]||(s[19]=t("span",{class:"text-sm text-gray-600"},"Pendiente:",-1)),t("span",Bt,"$"+e(r(N.value)),1)])])])]),t("div",Et,[s[22]||(s[22]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Próximo Pago")],-1)),t("div",It,[a.prestamo.proximo_pago?(i(),n("div",St,[t("div",Vt," $"+e(r(a.prestamo.proximo_pago.monto_programado)),1),t("div",Lt," Pago #"+e(a.prestamo.proximo_pago.numero_pago),1),t("div",At,e(g(a.prestamo.proximo_pago.fecha_programada)),1)])):(i(),n("div",qt,s[21]||(s[21]=[t("div",{class:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3"},[t("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),t("p",{class:"text-sm text-gray-500"},"Préstamo completado",-1)])))])])])])])])],64)}}}),Zt=S(Ot,[["__scopeId","data-v-9d66430f"]]);export{Zt as default};
