import{r as m,c as $,i,o as a,g,f as e,k as w,u as d,Z as G,e as x,l as b,A as c,t as o,v as _,z as I,P as Z,x as j,s as J,F as k,m as M,n as z,b as Q,N as W}from"./vendor-d19pJyVS.js";import{A as X}from"./AppLayout-CcnrZQKI.js";import"./utils-Dq7h7Pqt.js";import"./app-BcT2PLJy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"flex items-center justify-between mb-6"},ee={class:"flex gap-3"},te={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-6"},se={class:"bg-white p-4 rounded-lg shadow-sm border"},oe={class:"text-2xl font-bold text-blue-600"},ae={class:"bg-white p-4 rounded-lg shadow-sm border"},ie={class:"text-2xl font-bold text-green-600"},le={class:"bg-white p-4 rounded-lg shadow-sm border"},re={class:"text-2xl font-bold text-blue-600"},ne={class:"bg-white p-4 rounded-lg shadow-sm border"},de={class:"text-2xl font-bold text-yellow-600"},ue={class:"bg-white p-4 rounded-lg shadow-sm border"},me={class:"text-2xl font-bold text-red-600"},ge={class:"bg-white p-4 rounded-lg shadow-sm border"},ce={class:"text-2xl font-bold text-red-600"},ve={class:"bg-white p-4 rounded-lg shadow-sm border"},xe={class:"text-2xl font-bold text-orange-600"},be={class:"bg-white p-4 rounded-lg shadow-sm border mb-6"},pe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},fe=["value"],ye={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},he={class:"flex items-start gap-3 mb-3"},we=["src"],_e={key:1,class:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center"},ke={class:"flex-1"},je={class:"font-semibold text-lg"},Me={class:"text-sm text-gray-600"},Ne={key:0,class:"text-sm text-blue-600"},Ce={class:"space-y-2 mb-3"},Ve={key:0,class:"text-xs text-gray-600"},De={key:0,class:"text-red-600 font-medium"},Ae={key:1,class:"text-orange-600"},Se={key:1,class:"text-xs text-blue-600"},Ee={class:"flex items-center justify-between text-sm"},Be={class:"flex gap-2"},He={class:"flex gap-2 mt-6 justify-center"},Te={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40"},qe={class:"bg-white w-full max-w-xl rounded shadow-lg"},Fe={class:"p-4 grid gap-4 md:grid-cols-2"},Le={class:"font-medium"},$e={class:"font-medium"},ze={class:"font-medium capitalize"},Oe={class:"font-medium whitespace-pre-wrap"},Pe=["src"],Ue={key:1,class:"text-gray-500"},Je=Object.assign({layout:X},{__name:"Index",props:{herramientas:{type:Object,required:!0},estadisticas:{type:Object,default:()=>({})},categorias:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(r){var V,D,A,S;const u=r,p=m(((V=u.filters)==null?void 0:V.search)||""),f=m(((D=u.filters)==null?void 0:D.estado)||""),y=m(((A=u.filters)==null?void 0:A.categoria)||""),h=m(((S=u.filters)==null?void 0:S.mantenimiento)||""),O=$(()=>{var l;return((l=u.herramientas)==null?void 0:l.data)||[]}),N=m(!1),n=m(null),C=()=>{N.value=!1,n.value=null},v=()=>{W.get("/herramientas",{search:p.value,estado:f.value,categoria:y.value,mantenimiento:h.value},{preserveState:!0,preserveScroll:!0})},P=()=>{p.value="",f.value="",y.value="",h.value="",v()},U=l=>({disponible:"bg-green-100 text-green-800",asignada:"bg-blue-100 text-blue-800",mantenimiento:"bg-yellow-100 text-yellow-800",baja:"bg-red-100 text-red-800",perdida:"bg-red-100 text-red-800"})[l]||"bg-gray-100 text-gray-800",R=l=>l?new Date(l).toLocaleDateString("es-ES"):"N/A",K=$(()=>{var l;return((l=u.herramientas)==null?void 0:l.links)||[]});return(l,t)=>{var E,B,H,T,q;return a(),i(k,null,[g(d(G),{title:"Herramientas"}),e("div",Y,[t[6]||(t[6]=e("h1",{class:"text-3xl font-bold text-slate-900"},"Gestión de Herramientas",-1)),e("div",ee,[g(d(c),{class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",href:"/herramientas/create"},{default:x(()=>t[4]||(t[4]=[b(" Nueva Herramienta ")])),_:1}),g(d(c),{class:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",href:"/herramientas-dashboard"},{default:x(()=>t[5]||(t[5]=[b(" Dashboard ")])),_:1})])]),e("div",te,[e("div",se,[e("div",oe,o(r.estadisticas.total||0),1),t[7]||(t[7]=e("div",{class:"text-sm text-gray-600"},"Total",-1))]),e("div",ae,[e("div",ie,o(r.estadisticas.disponibles||0),1),t[8]||(t[8]=e("div",{class:"text-sm text-gray-600"},"Disponibles",-1))]),e("div",le,[e("div",re,o(r.estadisticas.asignadas||0),1),t[9]||(t[9]=e("div",{class:"text-sm text-gray-600"},"Asignadas",-1))]),e("div",ne,[e("div",de,o(r.estadisticas.mantenimiento||0),1),t[10]||(t[10]=e("div",{class:"text-sm text-gray-600"},"En Mant.",-1))]),e("div",ue,[e("div",me,o(r.estadisticas.baja||0),1),t[11]||(t[11]=e("div",{class:"text-sm text-gray-600"},"De Baja",-1))]),e("div",ge,[e("div",ce,o(r.estadisticas.perdida||0),1),t[12]||(t[12]=e("div",{class:"text-sm text-gray-600"},"Perdidas",-1))]),e("div",ve,[e("div",xe,o(r.estadisticas.requieren_mantenimiento||0),1),t[13]||(t[13]=e("div",{class:"text-sm text-gray-600"},"Req. Mant.",-1))])]),e("div",be,[e("div",pe,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Buscar",-1)),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),onKeyup:Z(v,["enter"]),type:"search",placeholder:"Nombre, serie o descripción",class:"w-full border rounded px-3 py-2"},null,544),[[I,p.value]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Estado",-1)),_(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),onChange:v,class:"w-full border rounded px-3 py-2"},t[15]||(t[15]=[J('<option value="">Todos los estados</option><option value="disponible">Disponible</option><option value="asignada">Asignada</option><option value="mantenimiento">En Mantenimiento</option><option value="baja">De Baja</option><option value="perdida">Perdida</option>',6)]),544),[[j,f.value]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Categoría",-1)),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>y.value=s),onChange:v,class:"w-full border rounded px-3 py-2"},[t[17]||(t[17]=e("option",{value:""},"Todas las categorías",-1)),t[18]||(t[18]=e("option",{value:"sin_categoria"},"Sin categoría",-1)),(a(!0),i(k,null,M(r.categorias,s=>(a(),i("option",{key:s.id,value:s.id},o(s.nombre),9,fe))),128))],544),[[j,y.value]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Mantenimiento",-1)),_(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>h.value=s),onChange:v,class:"w-full border rounded px-3 py-2"},t[20]||(t[20]=[e("option",{value:""},"Todos",-1),e("option",{value:"requiere"},"Requiere mantenimiento",-1),e("option",{value:"proximo"},"Próximo mantenimiento",-1),e("option",{value:"vencida"},"Mantenimiento vencido",-1)]),544),[[j,h.value]])]),e("div",{class:"flex items-end"},[e("button",{onClick:P,class:"w-full px-3 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," Limpiar Filtros ")])])]),e("div",ye,[(a(!0),i(k,null,M(O.value,s=>{var F,L;return a(),i("div",{key:s.id,class:"border rounded-lg p-4 bg-white shadow-sm hover:shadow-md transition-shadow"},[e("div",he,[s.foto?(a(),i("img",{key:0,src:`/storage/${s.foto}`,alt:"Foto",class:"w-16 h-16 object-cover rounded"},null,8,we)):(a(),i("div",_e,t[22]||(t[22]=[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)]))),e("div",ke,[e("h3",je,o(s.nombre),1),e("p",Me,"Serie: "+o(s.numero_serie||"N/A"),1),(F=s.categoria_herramienta)!=null&&F.nombre?(a(),i("p",Ne,o(s.categoria_herramienta.nombre),1)):w("",!0)])]),e("div",Ce,[e("span",{class:z(["px-2 py-1 rounded-full text-xs font-medium",U(s.estado)])},o(s.estado),3),s.requiere_mantenimiento&&s.fecha_ultimo_mantenimiento?(a(),i("div",Ve,[s.necesita_mantenimiento?(a(),i("span",De," ¡Requiere mantenimiento! ")):(a(),i("span",Ae," Último mant.: "+o(R(s.fecha_ultimo_mantenimiento)),1))])):w("",!0),(L=s.tecnico)!=null&&L.nombre?(a(),i("div",Se," Asignada a: "+o(s.tecnico.nombre),1)):w("",!0)]),e("div",Ee,[e("div",Be,[g(d(c),{href:`/herramientas/${s.id}`,class:"text-blue-600 hover:underline"},{default:x(()=>t[23]||(t[23]=[b("Ver")])),_:2},1032,["href"]),g(d(c),{href:`/herramientas/${s.id}/edit`,class:"text-green-600 hover:underline"},{default:x(()=>t[24]||(t[24]=[b("Editar")])),_:2},1032,["href"])]),g(d(c),{as:"button",method:"delete",href:`/herramientas/${s.id}`,class:"text-red-600 hover:underline","preserve-scroll":""},{default:x(()=>t[25]||(t[25]=[b(" Eliminar ")])),_:2},1032,["href"])])])}),128))]),e("div",He,[(a(!0),i(k,null,M(K.value,s=>(a(),Q(d(c),{key:s.url+s.label,href:s.url||"#","preserve-scroll":"",class:z(["px-4 py-2 border rounded-lg",s.active?"bg-blue-600 text-white border-blue-600":"bg-white hover:bg-gray-50"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))]),N.value?(a(),i("div",Te,[e("div",qe,[e("div",{class:"flex items-center justify-between px-4 py-3 border-b"},[t[26]||(t[26]=e("h2",{class:"text-lg font-semibold"},"Detalle de Herramienta",-1)),e("button",{onClick:C,class:"text-slate-500 hover:text-slate-700"},"✕")]),e("div",Fe,[e("div",null,[t[27]||(t[27]=e("div",{class:"text-sm text-gray-500"},"Nombre",-1)),e("div",Le,o((E=n.value)==null?void 0:E.nombre),1),t[28]||(t[28]=e("div",{class:"mt-3 text-sm text-gray-500"},"Número de serie",-1)),e("div",$e,o(((B=n.value)==null?void 0:B.numero_serie)||"N/A"),1),t[29]||(t[29]=e("div",{class:"mt-3 text-sm text-gray-500"},"Estado",-1)),e("div",ze,o((H=n.value)==null?void 0:H.estado),1),t[30]||(t[30]=e("div",{class:"mt-3 text-sm text-gray-500"},"Descripción / Alerta",-1)),e("div",Oe,o(((T=n.value)==null?void 0:T.descripcion)||"—"),1)]),e("div",null,[t[31]||(t[31]=e("div",{class:"text-sm text-gray-500 mb-2"},"Foto de condición",-1)),(q=n.value)!=null&&q.foto?(a(),i("img",{key:0,src:`/storage/${n.value.foto}`,class:"w-full h-auto max-h-64 object-cover rounded"},null,8,Pe)):(a(),i("div",Ue,"Sin imagen"))])]),e("div",{class:"px-4 py-3 border-t flex justify-end"},[e("button",{onClick:C,class:"px-4 py-2 bg-slate-600 text-white rounded hover:bg-slate-700"},"Cerrar")])])])):w("",!0)],64)}}});export{Je as default};
