import{r as x,c as _e,K as he,p as ye,H as xe,i as n,o as l,g as te,f as o,u as we,Z as qe,l as re,q as ke,k as c,v as p,z as w,n as f,L as ie,F as z,m as se,t as d,x as O,s as je,N as $}from"./vendor-d19pJyVS.js";import{n as m}from"./app-BcT2PLJy.js";import{A as Ee}from"./AppLayout-CcnrZQKI.js";import{_ as Ce}from"./BuscarServicios-CIRBLENw.js";import{_ as Se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Dq7h7Pqt.js";const De={class:"max-w-4xl mx-auto p-6"},Fe={class:"bg-white shadow-lg rounded-lg overflow-hidden"},$e={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Le={class:"space-y-4"},ze={class:"block text-sm font-medium text-gray-700 mb-2",for:"cliente_id"},Oe={class:"form-group"},Ue={class:"search-container"},Ie={class:"search-dropdown"},Te=["onMousedown"],Me={class:"client-name"},Ve={key:0,class:"client-details"},Be={key:1,class:"client-details"},Re={class:"search-dropdown"},Ae={class:"search-no-results"},He={key:0,class:"selected-client"},Pe={class:"client-info"},We={class:"client-name"},Ge={key:0,class:"client-details"},Ne={key:1,class:"client-details"},Je={key:0,class:"error-message"},Ke={key:0,class:"text-red-500 text-sm mt-1"},Qe=["value"],Ze={key:0,class:"text-red-500 text-sm mt-1"},Xe={class:"space-y-4"},Ye={key:0,class:"text-red-500 text-sm mt-1"},eo=["min"],oo={key:0,class:"text-red-500 text-sm mt-1"},to={key:0,class:"text-red-500 text-sm mt-1"},ro={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},io={key:0,class:"text-red-500 text-sm mt-1"},so={key:0,class:"text-red-500 text-sm mt-1"},ao={key:0,class:"text-red-500 text-sm mt-1"},no={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},lo={key:0,class:"text-red-500 text-sm mt-1"},co={key:0,class:"text-red-500 text-sm mt-1"},uo={class:"mt-4"},fo={key:0,class:"text-red-500 text-sm mt-1"},mo={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},bo={class:"space-y-2"},po={class:"relative"},vo={key:0,class:"mb-3"},go=["src"],_o={key:0,class:"text-red-500 text-sm"},ho={class:"space-y-2"},yo={class:"relative"},xo={key:0,class:"mb-3"},wo=["src"],qo={key:0,class:"text-red-500 text-sm"},ko={class:"space-y-2"},jo={class:"relative"},Eo={key:0,class:"mb-3"},Co=["src"],So={key:0,class:"text-red-500 text-sm"},Do={class:"flex items-center justify-between pt-6 border-t border-gray-200"},Fo=["disabled"],$o={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},Lo=Object.assign({layout:Ee},{__name:"Edit",props:{cita:{type:Object,required:!0},tecnicos:{type:Array,default:()=>[]},clientes:{type:Array,default:()=>[]},servicios:{type:Array,default:()=>[]},errors:{type:Object,default:()=>({})}},setup(s,{expose:ae}){var A,H,P,W,G,N,J,K,Q,Z,X,Y,ee,oe;const a=s,q=x(!1),v=x(!1),k=x({}),ne=_e(()=>{const r=new Date;return r.setMinutes(r.getMinutes()-r.getTimezoneOffset()),r.toISOString().slice(0,16)}),U=r=>{if(!r)return"";try{const e=new Date(r);if(isNaN(e.getTime()))return console.warn("Fecha inv√°lida:",r),"";const t=e.getTimezoneOffset();return new Date(e.getTime()-t*60*1e3).toISOString().slice(0,16)}catch(e){return console.error("Error al formatear fecha:",e),""}},i=he({tecnico_id:((A=a.cita)==null?void 0:A.tecnico_id)||"",cliente_id:((H=a.cita)==null?void 0:H.cliente_id)||"",tipo_servicio:((P=a.cita)==null?void 0:P.tipo_servicio)||"",fecha_hora:U((W=a.cita)==null?void 0:W.fecha_hora),descripcion:((G=a.cita)==null?void 0:G.descripcion)||"",tipo_equipo:((N=a.cita)==null?void 0:N.tipo_equipo)||"",marca_equipo:((J=a.cita)==null?void 0:J.marca_equipo)||"",modelo_equipo:((K=a.cita)==null?void 0:K.modelo_equipo)||"",problema_reportado:((Q=a.cita)==null?void 0:Q.problema_reportado)||"",estado:((Z=a.cita)==null?void 0:Z.estado)||"pendiente",evidencias:((X=a.cita)==null?void 0:X.evidencias)||"",foto_equipo:null,foto_hoja_servicio:null,foto_identificacion:null,foto_equipo_url:(Y=a.cita)!=null&&Y.foto_equipo?`/storage/${a.cita.foto_equipo}`:null,foto_hoja_servicio_url:(ee=a.cita)!=null&&ee.foto_hoja_servicio?`/storage/${a.cita.foto_hoja_servicio}`:null,foto_identificacion_url:(oe=a.cita)!=null&&oe.foto_identificacion?`/storage/${a.cita.foto_identificacion}`:null}),g=x(""),j=x(!1),E=x([]),_=x(null),I=x(null),le=()=>{if(g.value.length<2){E.value=[];return}const r=g.value.toLowerCase();E.value=a.clientes.filter(e=>e.nombre_razon_social.toLowerCase().includes(r)||e.email&&e.email.toLowerCase().includes(r)||e.telefono&&e.telefono.includes(r)).slice(0,8)},de=r=>{i.cliente_id=r.id,_.value=r,g.value=r.nombre_razon_social,j.value=!1,v.value=!0},ce=()=>{i.cliente_id="",_.value=null,g.value="",v.value=!0},ue=()=>{setTimeout(()=>{j.value=!1},200)},fe=r=>{r&&(i.tipo_servicio=r.nombre,i.descripcion=r.descripcion||"",r.precio&&(i.costo_estimado=r.precio),showNotification(`Servicio seleccionado: ${r.nombre}`,"success"))},S={maxSize:5*1024*1024,allowedTypes:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],quality:.8},me=[{key:"cliente_id",label:"Cliente"},{key:"tecnico_id",label:"T√©cnico"},{key:"tipo_servicio",label:"Tipo de Servicio"},{key:"fecha_hora",label:"Fecha y Hora"},{key:"tipo_equipo",label:"Tipo de Equipo"},{key:"marca_equipo",label:"Marca del Equipo"},{key:"modelo_equipo",label:"Modelo del Equipo"},{key:"estado",label:"Estado"}],be=r=>{const e=[];return r.size>S.maxSize&&e.push(`El archivo es demasiado grande. Tama√±o m√°ximo: ${S.maxSize/(1024*1024)}MB`),S.allowedTypes.includes(r.type)||e.push("Tipo de archivo no permitido. Solo se aceptan im√°genes (JPEG, PNG, GIF, WebP)"),e},pe=(r,e=S.quality)=>new Promise(t=>{const u=document.createElement("canvas"),b=u.getContext("2d"),F=new Image;F.onload=()=>{let{width:h,height:y}=F;h>y?h>1200&&(y=y*1200/h,h=1200):y>1200&&(h=h*1200/y,y=1200),u.width=h,u.height=y,b.drawImage(F,0,0,h,y),u.toBlob(t,r.type,e)},F.src=URL.createObjectURL(r)}),D=async(r,e)=>{const t=e.target.files[0];if(!t){C(r);return}const u=be(t);if(u.length>0){m.error(u[0]),e.target.value="";return}try{m.success("Procesando imagen...");let b=t;t.size>1024*1024&&(b=await pe(t),console.log(`Imagen comprimida: ${t.size} -> ${b.size} bytes`)),i[`${r}_url`]&&i[`${r}_url`].startsWith("blob:")&&URL.revokeObjectURL(i[`${r}_url`]),i[r]=b,i[`${r}_url`]=URL.createObjectURL(b),v.value=!0,m.success("Imagen cargada correctamente")}catch(b){console.error("Error al procesar imagen:",b),m.error("Error al procesar la imagen"),e.target.value=""}},C=r=>{var t;i[`${r}_url`]&&i[`${r}_url`].startsWith("blob:")&&URL.revokeObjectURL(i[`${r}_url`]),i[r]=null,i[`${r}_url`]=(t=a.cita)!=null&&t[r]?`/storage/${a.cita[r]}`:null;const e=document.getElementById(r);e&&(e.value=""),v.value=!0},T=()=>{const r=[];return me.forEach(e=>{const t=i[e.key];(!t||String(t).trim()==="")&&r.push(`${e.label} es obligatorio`)}),i.fecha_hora&&new Date(i.fecha_hora)<new Date&&i.estado==="pendiente"&&m.warning("‚ö†Ô∏è La fecha seleccionada es anterior a la fecha actual"),r.length>0?(m.error(`‚ùå ${r[0]}`),!1):!0},ve=()=>{const r={...i};delete r.foto_equipo,delete r.foto_hoja_servicio,delete r.foto_identificacion;const e=JSON.stringify(r)!==JSON.stringify(k.value),t=i.foto_equipo||i.foto_hoja_servicio||i.foto_identificacion;v.value=e||t},M=()=>{v.value?confirm("Tienes cambios sin guardar. ¬øEst√°s seguro de que quieres salir?")&&V():V()},V=()=>{L(),window.history.length>1?window.history.back():$.get(route("citas.index"))},L=()=>{["foto_equipo_url","foto_hoja_servicio_url","foto_identificacion_url"].forEach(r=>{i[r]&&i[r].startsWith("blob:")&&URL.revokeObjectURL(i[r])})},B=async()=>{if(T()){q.value=!0;try{const r=new FormData;Object.entries(i).forEach(([e,t])=>{!e.endsWith("_url")&&t!==null&&t!==void 0&&(t instanceof File?r.append(e,t):(typeof t=="string"||typeof t=="number")&&r.append(e,String(t).trim()))}),r.append("_method","PUT"),await $.post(route("citas.update",a.cita.id),r,{forceFormData:!0,preserveScroll:!0,preserveState:!1,onStart:()=>{try{m.success("üì§ Enviando datos...")}catch(e){console.error("Error en",e)}},onSuccess:e=>{v.value=!1,m.success("‚úÖ La cita ha sido actualizada exitosamente"),L(),setTimeout(()=>{$.get(route("citas.index",a.cita.id))},1500)},onError:e=>{console.error("Errores de validaci√≥n:",e);const t=Object.values(e)[0];Array.isArray(t)?m.error(`‚ùå ${t[0]}`):m.error(`‚ùå ${t}`);const u=Object.keys(e)[0],b=document.getElementById(u);b&&(b.scrollIntoView({behavior:"smooth",block:"center"}),b.focus())},onFinish:()=>{q.value=!1}})}catch(r){console.error("Error inesperado:",r),m.error("üí• Ocurri√≥ un error inesperado. Por favor, intenta nuevamente."),q.value=!1}}},ge=()=>{k.value={...i},delete k.value.foto_equipo,delete k.value.foto_hoja_servicio,delete k.value.foto_identificacion,Object.keys(i).filter(e=>!e.endsWith("_url")&&!e.includes("foto")).forEach(e=>{const t=i[e];Object.defineProperty(i,e,{get(){return this[`_${e}`]||t},set(u){this[`_${e}`]=u,ve()}})})},R=r=>{if(v.value)return r.preventDefault(),r.returnValue="",""};return ye(()=>{var r,e;if(ge(),window.addEventListener("beforeunload",R),(r=a.cita)!=null&&r.cliente_id){const t=a.clientes.find(u=>u.id===a.cita.cliente_id);t&&(_.value=t,g.value=t.nombre_razon_social,i.cliente_id=t.id)}if((e=a.cita)!=null&&e.tipo_servicio){const t=a.servicios.find(u=>u.nombre===a.cita.tipo_servicio);t&&(i.tipo_servicio=t.nombre,i.descripcion=t.descripcion||a.cita.descripcion)}Object.keys(a.errors).length>0&&m.error("Por favor, revisa los errores en el formulario")}),xe(()=>{L(),window.removeEventListener("beforeunload",R)}),ae({submit:B,goBack:M,resetForm:()=>{var r,e,t;confirm("¬øEst√°s seguro de que quieres resetear el formulario?")&&(Object.assign(i,{...k.value,foto_equipo:null,foto_hoja_servicio:null,foto_identificacion:null}),i.foto_equipo_url=(r=a.cita)!=null&&r.foto_equipo?`/storage/${a.cita.foto_equipo}`:null,i.foto_hoja_servicio_url=(e=a.cita)!=null&&e.foto_hoja_servicio?`/storage/${a.cita.foto_hoja_servicio}`:null,i.foto_identificacion_url=(t=a.cita)!=null&&t.foto_identificacion?`/storage/${a.cita.foto_identificacion}`:null,I.value,v.value=!1,m.success("Formulario restablecido"))},duplicateAppointment:()=>{const r={...i};delete r.foto_equipo,delete r.foto_hoja_servicio,delete r.foto_identificacion;const e=new Date;e.setDate(e.getDate()+1),r.fecha_hora=U(e.toISOString()),r.estado="pendiente",$.get(route("citas.create"),{duplicate:r})},handleFileChange:D,clearFile:C,validateForm:T}),(r,e)=>(l(),n(z,null,[te(we(qe),{title:"Editar Cita"}),o("div",De,[o("div",Fe,[e[41]||(e[41]=o("div",{class:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4"},[o("h1",{class:"text-2xl font-bold text-white flex items-center"},[o("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})]),re(" Editar Cita ")])],-1)),o("form",{onSubmit:ke(B,["prevent"]),class:"p-6 space-y-6"},[o("section",$e,[o("div",Le,[e[21]||(e[21]=o("h3",{class:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2"}," Informaci√≥n del Cliente ",-1)),o("div",null,[o("label",ze,[o("div",Oe,[e[18]||(e[18]=o("label",{class:"required",for:"cliente_search"},"Cliente",-1)),o("div",Ue,[p(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>g.value=t),onInput:le,onFocus:e[1]||(e[1]=t=>j.value=!0),onBlur:ue,type:"text",id:"cliente_search",placeholder:"Buscar cliente por nombre, email o tel√©fono...",class:f(["form-input",{error:s.errors.cliente_id}]),autocomplete:"off"},null,34),[[w,g.value]]),p(o("div",Ie,[(l(!0),n(z,null,se(E.value,t=>(l(),n("div",{key:t.id,onMousedown:u=>de(t),class:f(["search-item",{selected:i.cliente_id===t.id}])},[o("div",Me,d(t.nombre_razon_social),1),t.email?(l(),n("div",Ve,"üìß "+d(t.email),1)):c("",!0),t.telefono?(l(),n("div",Be,"üìû "+d(t.telefono),1)):c("",!0)],42,Te))),128))],512),[[ie,j.value&&E.value.length>0]]),p(o("div",Re,[o("div",Ae,' No se encontraron clientes con "'+d(g.value)+'" ',1)],512),[[ie,j.value&&g.value.length>0&&E.value.length===0]]),_.value?(l(),n("div",He,[o("div",Pe,[o("div",We,d(_.value.nombre_razon_social),1),_.value.email?(l(),n("div",Ge,"üìß "+d(_.value.email),1)):c("",!0),_.value.telefono?(l(),n("div",Ne,"üìû "+d(_.value.telefono),1)):c("",!0)]),o("button",{type:"button",onClick:ce,class:"clear-client-btn",title:"Limpiar selecci√≥n"},e[17]||(e[17]=[o("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])):c("",!0)]),s.errors.cliente_id?(l(),n("p",Je,d(s.errors.cliente_id),1)):c("",!0)])]),s.errors.cliente_id?(l(),n("p",Ke,d(s.errors.cliente_id),1)):c("",!0)]),o("div",null,[e[20]||(e[20]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2",for:"tecnico_id"}," T√©cnico Asignado * ",-1)),p(o("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>i.tecnico_id=t),id:"tecnico_id",class:f(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",{"border-red-500 focus:ring-red-500 focus:border-red-500":s.errors.tecnico_id}]),required:""},[e[19]||(e[19]=o("option",{value:""},"Seleccionar t√©cnico",-1)),(l(!0),n(z,null,se(s.tecnicos,t=>(l(),n("option",{key:t.id,value:t.id},d(t.nombre)+" "+d(t.apellido),9,Qe))),128))],2),[[O,i.tecnico_id]]),s.errors.tecnico_id?(l(),n("p",Ze,d(s.errors.tecnico_id),1)):c("",!0)])]),o("div",Xe,[e[26]||(e[26]=o("h3",{class:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2"}," Informaci√≥n del Servicio ",-1)),o("div",null,[e[22]||(e[22]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tipo de Servicio * ",-1)),te(Ce,{ref_key:"buscarServiciosRef",ref:I,servicios:s.servicios,onServicioSeleccionado:fe},null,8,["servicios"]),s.errors.tipo_servicio?(l(),n("p",Ye,d(s.errors.tipo_servicio),1)):c("",!0)]),o("div",null,[e[23]||(e[23]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2",for:"fecha_hora"}," Fecha y Hora * ",-1)),p(o("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>i.fecha_hora=t),type:"datetime-local",id:"fecha_hora",min:ne.value,class:f(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",{"border-red-500 focus:ring-red-500 focus:border-red-500":s.errors.fecha_hora}]),required:""},null,10,eo),[[w,i.fecha_hora]]),s.errors.fecha_hora?(l(),n("p",oo,d(s.errors.fecha_hora),1)):c("",!0)]),o("div",null,[e[25]||(e[25]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2",for:"estado"}," Estado * ",-1)),p(o("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>i.estado=t),id:"estado",class:f(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",{"border-red-500 focus:ring-red-500 focus:border-red-500":s.errors.estado}]),required:""},e[24]||(e[24]=[o("option",{value:"pendiente"},"‚è≥ Pendiente",-1),o("option",{value:"en_proceso"},"üîÑ En Proceso",-1),o("option",{value:"completado"},"‚úÖ Completado",-1),o("option",{value:"cancelado"},"‚ùå Cancelado",-1)]),2),[[O,i.estado]]),s.errors.estado?(l(),n("p",to,d(s.errors.estado),1)):c("",!0)])])]),o("section",null,[e[31]||(e[31]=o("h3",{class:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4"}," Informaci√≥n del Equipo ",-1)),o("div",ro,[o("div",null,[e[28]||(e[28]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2",for:"tipo_equipo"}," Tipo de Equipo * ",-1)),p(o("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>i.tipo_equipo=t),id:"tipo_equipo",class:f(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",{"border-red-500 focus:ring-red-500 focus:border-red-500":s.errors.tipo_equipo}]),required:""},e[27]||(e[27]=[je('<option value="" data-v-d9b10608>Seleccionar equipo</option><option value="minisplit" data-v-d9b10608>‚ùÑÔ∏è Minisplit</option><option value="boiler" data-v-d9b10608>üî• Boiler</option><option value="refrigerador" data-v-d9b10608>üßä Refrigerador</option><option value="lavadora" data-v-d9b10608>üß∫ Lavadora</option><option value="secadora" data-v-d9b10608>üåÄ Secadora</option><option value="estufa" data-v-d9b10608>üç≥ Estufa</option><option value="campana" data-v-d9b10608>üí® Campana</option><option value="horno_de_microondas" data-v-d9b10608>üì° Horno de Microondas</option><option value="licuadora" data-v-d9b10608>ü•§ Licuadora</option><option value="otro_equipo" data-v-d9b10608>‚öôÔ∏è Otro Equipo</option>',11)]),2),[[O,i.tipo_equipo]]),s.errors.tipo_equipo?(l(),n("p",io,d(s.errors.tipo_equipo),1)):c("",!0)]),o("div",null,[e[29]||(e[29]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2",for:"marca_equipo"}," Marca del Equipo * ",-1)),p(o("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>i.marca_equipo=t),type:"text",id:"marca_equipo",placeholder:"Ej: Samsung, LG, Whirlpool",class:f(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",{"border-red-500 focus:ring-red-500 focus:border-red-500":s.errors.marca_equipo}]),required:""},null,2),[[w,i.marca_equipo]]),s.errors.marca_equipo?(l(),n("p",so,d(s.errors.marca_equipo),1)):c("",!0)]),o("div",null,[e[30]||(e[30]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2",for:"modelo_equipo"}," Modelo del Equipo * ",-1)),p(o("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>i.modelo_equipo=t),type:"text",id:"modelo_equipo",placeholder:"Ej: ABC123",class:f(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",{"border-red-500 focus:ring-red-500 focus:border-red-500":s.errors.modelo_equipo}]),required:""},null,2),[[w,i.modelo_equipo]]),s.errors.modelo_equipo?(l(),n("p",ao,d(s.errors.modelo_equipo),1)):c("",!0)])])]),o("section",null,[e[35]||(e[35]=o("h3",{class:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4"}," Detalles del Servicio ",-1)),o("div",no,[o("div",null,[e[32]||(e[32]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2",for:"descripcion"}," Descripci√≥n del Servicio ",-1)),p(o("textarea",{"onUpdate:modelValue":e[8]||(e[8]=t=>i.descripcion=t),id:"descripcion",rows:"4",placeholder:"Describe el servicio a realizar...",class:f(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-vertical",{"border-red-500 focus:ring-red-500 focus:border-red-500":s.errors.descripcion}])},null,2),[[w,i.descripcion]]),s.errors.descripcion?(l(),n("p",lo,d(s.errors.descripcion),1)):c("",!0)]),o("div",null,[e[33]||(e[33]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2",for:"problema_reportado"}," Problema Reportado ",-1)),p(o("textarea",{"onUpdate:modelValue":e[9]||(e[9]=t=>i.problema_reportado=t),id:"problema_reportado",rows:"4",placeholder:"Describe el problema reportado por el cliente...",class:f(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-vertical",{"border-red-500 focus:ring-red-500 focus:border-red-500":s.errors.problema_reportado}])},null,2),[[w,i.problema_reportado]]),s.errors.problema_reportado?(l(),n("p",co,d(s.errors.problema_reportado),1)):c("",!0)])]),o("div",uo,[e[34]||(e[34]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2",for:"evidencias"}," Evidencias (Opcional) ",-1)),p(o("textarea",{"onUpdate:modelValue":e[10]||(e[10]=t=>i.evidencias=t),id:"evidencias",rows:"3",placeholder:"Notas adicionales, observaciones o evidencias del servicio...",class:f(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-vertical",{"border-red-500 focus:ring-red-500 focus:border-red-500":s.errors.evidencias}])},null,2),[[w,i.evidencias]]),s.errors.evidencias?(l(),n("p",fo,d(s.errors.evidencias),1)):c("",!0)])]),o("section",null,[e[39]||(e[39]=o("h3",{class:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4"}," Documentaci√≥n Fotogr√°fica ",-1)),o("div",mo,[o("div",bo,[e[36]||(e[36]=o("label",{class:"block text-sm font-medium text-gray-700",for:"foto_equipo"}," Foto del Equipo ",-1)),o("div",po,[i.foto_equipo_url?(l(),n("div",vo,[o("img",{src:i.foto_equipo_url,alt:"Foto del Equipo",class:"w-full h-32 object-cover rounded-lg border border-gray-300 shadow-sm"},null,8,go),o("button",{type:"button",onClick:e[11]||(e[11]=t=>C("foto_equipo")),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 transition-colors"}," √ó ")])):c("",!0),o("input",{type:"file",onChange:e[12]||(e[12]=t=>D("foto_equipo",t)),accept:"image/*",id:"foto_equipo",class:f(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm",{"border-red-500 focus:ring-red-500 focus:border-red-500":s.errors.foto_equipo}])},null,34)]),s.errors.foto_equipo?(l(),n("p",_o,d(s.errors.foto_equipo),1)):c("",!0)]),o("div",ho,[e[37]||(e[37]=o("label",{class:"block text-sm font-medium text-gray-700",for:"foto_hoja_servicio"}," Hoja de Servicio ",-1)),o("div",yo,[i.foto_hoja_servicio_url?(l(),n("div",xo,[o("img",{src:i.foto_hoja_servicio_url,alt:"Foto de la Hoja de Servicio",class:"w-full h-32 object-cover rounded-lg border border-gray-300 shadow-sm"},null,8,wo),o("button",{type:"button",onClick:e[13]||(e[13]=t=>C("foto_hoja_servicio")),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 transition-colors"}," √ó ")])):c("",!0),o("input",{type:"file",onChange:e[14]||(e[14]=t=>D("foto_hoja_servicio",t)),accept:"image/*",id:"foto_hoja_servicio",class:f(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm",{"border-red-500 focus:ring-red-500 focus:border-red-500":s.errors.foto_hoja_servicio}])},null,34)]),s.errors.foto_hoja_servicio?(l(),n("p",qo,d(s.errors.foto_hoja_servicio),1)):c("",!0)]),o("div",ko,[e[38]||(e[38]=o("label",{class:"block text-sm font-medium text-gray-700",for:"foto_identificacion"}," Identificaci√≥n del Cliente ",-1)),o("div",jo,[i.foto_identificacion_url?(l(),n("div",Eo,[o("img",{src:i.foto_identificacion_url,alt:"Foto de Identificaci√≥n del Cliente",class:"w-full h-32 object-cover rounded-lg border border-gray-300 shadow-sm"},null,8,Co),o("button",{type:"button",onClick:e[15]||(e[15]=t=>C("foto_identificacion")),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 transition-colors"}," √ó ")])):c("",!0),o("input",{type:"file",onChange:e[16]||(e[16]=t=>D("foto_identificacion",t)),accept:"image/*",id:"foto_identificacion",class:f(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm",{"border-red-500 focus:ring-red-500 focus:border-red-500":s.errors.foto_identificacion}])},null,34)]),s.errors.foto_identificacion?(l(),n("p",So,d(s.errors.foto_identificacion),1)):c("",!0)])])]),o("div",Do,[o("button",{type:"button",onClick:M,class:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors"}," Cancelar "),o("button",{type:"submit",disabled:q.value,class:"px-8 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},[q.value?(l(),n("svg",$o,e[40]||(e[40]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):c("",!0),re(" "+d(q.value?"Actualizando...":"Actualizar Cita"),1)],8,Fo)])],32)])])],64))}}),Ho=Se(Lo,[["__scopeId","data-v-d9b10608"]]);export{Ho as default};
