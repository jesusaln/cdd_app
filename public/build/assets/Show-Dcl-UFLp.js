import{c as m,r as F,i as n,o as r,g as h,u,Z as $,e as p,f as t,t as a,k as c,l,n as y,F as V,m as B,v as P,b as f,A as v,L as S}from"./vendor-d19pJyVS.js";import{A}from"./AppLayout-CcnrZQKI.js";import{_ as D}from"./VistaPreviaModal-CAwANwka.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Dq7h7Pqt.js";import"./app-BcT2PLJy.js";const N={class:"compras-show min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-6"},I={class:"max-w-4xl mx-auto"},L={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden mb-6"},z={class:"px-6 py-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white"},G={class:"text-xl font-bold"},M={class:"p-6"},j={key:0,class:"mt-2"},O={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden mb-6"},T={class:"p-6"},R={class:"min-w-full divide-y divide-gray-200"},Z={class:"divide-y divide-gray-200"},q={class:"px-4 py-3 text-sm"},H={class:"font-medium"},J={key:0,class:"text-xs text-gray-500 mt-1"},K={class:"px-4 py-3 text-sm text-right"},Q={class:"px-4 py-3 text-sm text-right"},U={class:"px-4 py-3 text-sm text-right"},W={class:"px-4 py-3 text-sm text-right"},X={class:"px-4 py-3 text-sm text-center"},Y={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},tt={class:"px-4 py-3 text-sm text-center"},et={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},st={class:"px-4 py-3 text-sm text-center"},ot={key:0,class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},at={key:1,class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},rt={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden mb-6"},dt={class:"p-6"},nt={class:"space-y-2 text-right"},lt={key:0},it={class:"text-xl"},ct={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden mb-6"},mt={class:"border-b border-gray-200"},ut={class:"px-6 py-4"},pt={class:"border-t border-gray-200 pt-4"},xt={class:"px-4 py-5 sm:p-0"},gt={class:"sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 sm:py-5"},yt={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},ft={key:1,class:"text-gray-500"},vt={key:0,class:"sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 sm:py-5"},bt={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},ht={class:"sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 sm:py-5"},wt={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},kt={class:"flex space-x-2"},_t={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},Ct={class:"p-6 flex flex-wrap gap-3"},Ft={__name:"Show",props:{compra:Object,canReceive:{type:Boolean,default:!0},canEdit:{type:Boolean,default:!0},canDelete:{type:Boolean,default:!0}},setup(s){const i=s,w=m(()=>parseFloat(i.compra.subtotal)||0),x=m(()=>parseFloat(i.compra.descuento_general)||0),k=m(()=>parseFloat(i.compra.iva)||0),_=m(()=>parseFloat(i.compra.total)||0),C=m(()=>!i.compra.productos||!Array.isArray(i.compra.productos)?[]:i.compra.productos.map(d=>({id:d.id,nombre:d.nombre||"Sin nombre",descripcion:d.descripcion||"",cantidad:parseInt(d.cantidad)||0,precio:parseFloat(d.precio)||0,descuento:parseFloat(d.descuento)||0,stock_antes:parseInt(d.stock_antes)||0,stock_despues:parseInt(d.stock_despues)||0,diferencia_stock:parseInt(d.diferencia_stock)||0}))),b=F(!1),g=F(!1);return(d,e)=>(r(),n(V,null,[h(u($),{title:"Ver Compra"}),h(A,null,{default:p(()=>[t("div",N,[t("div",I,[t("div",L,[t("div",z,[t("h1",G,"Compra #"+a(s.compra.id),1)]),t("div",M,[t("p",null,[e[4]||(e[4]=t("strong",null,"Proveedor:",-1)),l(" "+a(s.compra.proveedor.nombre_razon_social),1)]),t("p",null,[e[5]||(e[5]=t("strong",null,"Estado:",-1)),t("span",{class:y(["ml-2 px-3 py-1 rounded-full text-sm font-medium",{"bg-green-100 text-green-800":s.compra.estado==="recibida","bg-blue-100 text-blue-800":s.compra.estado==="aprobada","bg-yellow-100 text-yellow-800":s.compra.estado==="pendiente","bg-red-100 text-red-800":s.compra.estado==="rechazada"||s.compra.estado==="cancelada","bg-gray-100 text-gray-800":s.compra.estado==="borrador"}])},a(s.compra.estado),3)]),s.compra.notas?(r(),n("p",j,[e[6]||(e[6]=t("strong",null,"Notas:",-1)),l(" "+a(s.compra.notas),1)])):c("",!0)])]),t("div",O,[t("div",T,[e[10]||(e[10]=t("h2",{class:"text-lg font-semibold mb-4"},"Productos y Servicios",-1)),t("table",R,[e[9]||(e[9]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-500"},"Nombre"),t("th",{class:"px-4 py-2 text-right text-sm font-medium text-gray-500"},"Cantidad"),t("th",{class:"px-4 py-2 text-right text-sm font-medium text-gray-500"},"Precio"),t("th",{class:"px-4 py-2 text-right text-sm font-medium text-gray-500"},"Descuento"),t("th",{class:"px-4 py-2 text-right text-sm font-medium text-gray-500"},"Subtotal"),t("th",{class:"px-4 py-2 text-center text-sm font-medium text-gray-500"},"Stock Antes"),t("th",{class:"px-4 py-2 text-center text-sm font-medium text-gray-500"},"Stock DespuÃ©s"),t("th",{class:"px-4 py-2 text-center text-sm font-medium text-gray-500"},"Diferencia")])],-1)),t("tbody",Z,[(r(!0),n(V,null,B(C.value,o=>(r(),n("tr",{key:o.id},[t("td",q,[t("div",null,[t("div",H,a(o.nombre),1),o.descripcion?(r(),n("div",J,a(o.descripcion),1)):c("",!0)])]),t("td",K,a(o.cantidad),1),t("td",Q,"$"+a(o.precio.toFixed(2)),1),t("td",U,a(o.descuento)+"%",1),t("td",W," $"+a((o.cantidad*o.precio*(1-o.descuento/100)).toFixed(2)),1),t("td",X,[t("span",Y,a(o.stock_antes),1)]),t("td",tt,[t("span",et,a(o.stock_despues),1)]),t("td",st,[t("span",{class:y(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-green-100 text-green-800":o.diferencia_stock>0,"bg-red-100 text-red-800":o.diferencia_stock<0,"bg-gray-100 text-gray-800":o.diferencia_stock===0}])},[o.diferencia_stock>0?(r(),n("svg",ot,e[7]||(e[7]=[t("path",{"fill-rule":"evenodd",d:"M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)]))):o.diferencia_stock<0?(r(),n("svg",at,e[8]||(e[8]=[t("path",{"fill-rule":"evenodd",d:"M14.707 12.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L9 14.586V3a1 1 0 012 0v11.586l2.293-2.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):c("",!0),l(" "+a(o.diferencia_stock>0?"+":"")+a(o.diferencia_stock),1)],2)])]))),128))])])])]),t("div",rt,[t("div",dt,[t("div",nt,[t("p",null,[e[11]||(e[11]=t("strong",null,"Subtotal:",-1)),l(" $"+a(w.value.toFixed(2)),1)]),x.value>0?(r(),n("p",lt,[e[12]||(e[12]=t("strong",null,"Descuento General:",-1)),l(" $"+a(x.value.toFixed(2)),1)])):c("",!0),t("p",null,[e[13]||(e[13]=t("strong",null,"IVA:",-1)),l(" $"+a(k.value.toFixed(2)),1)]),t("p",it,[e[14]||(e[14]=t("strong",null,"Total:",-1)),l(" $"+a(_.value.toFixed(2)),1)])])])]),t("div",ct,[t("div",mt,[t("button",{onClick:e[0]||(e[0]=o=>g.value=!g.value),class:"w-full px-6 py-4 text-left flex justify-between items-center hover:bg-gray-50 transition-colors"},[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Operaciones de Compra",-1)),(r(),n("svg",{class:y([g.value?"transform rotate-180":"","w-5 h-5 text-gray-500 transition-transform"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e[15]||(e[15]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])]),P(t("div",ut,[t("div",pt,[t("div",xt,[t("dl",null,[t("div",gt,[e[17]||(e[17]=t("dt",{class:"text-sm font-medium text-gray-500"}," Estado de Pago ",-1)),t("dd",yt,[s.compra.cuentas_por_pagar?(r(),n("span",{key:0,class:y([{"bg-red-100 text-red-800":s.compra.cuentas_por_pagar.estado==="vencido","bg-yellow-100 text-yellow-800":s.compra.cuentas_por_pagar.estado==="parcial","bg-green-100 text-green-800":s.compra.cuentas_por_pagar.estado==="pagado","bg-gray-100 text-gray-800":s.compra.cuentas_por_pagar.estado==="pendiente"},"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},a(s.compra.cuentas_por_pagar.estado),3)):(r(),n("span",ft,"No registrada"))])]),s.compra.cuentas_por_pagar?(r(),n("div",vt,[e[18]||(e[18]=t("dt",{class:"text-sm font-medium text-gray-500"}," Monto Pendiente ",-1)),t("dd",bt," $"+a(s.compra.cuentas_por_pagar.monto_pendiente.toFixed(2)),1)])):c("",!0),t("div",ht,[e[21]||(e[21]=t("dt",{class:"text-sm font-medium text-gray-500"}," Acciones ",-1)),t("dd",wt,[t("div",kt,[s.compra.cuentas_por_pagar?(r(),f(u(v),{key:1,href:d.route("cuentas-por-pagar.edit",s.compra.cuentas_por_pagar.id),class:"text-indigo-600 hover:text-indigo-900"},{default:p(()=>e[20]||(e[20]=[l(" Gestionar Pagos ")])),_:1},8,["href"])):(r(),f(u(v),{key:0,href:d.route("cuentas-por-pagar.create",{compra_id:s.compra.id}),class:"text-indigo-600 hover:text-indigo-900"},{default:p(()=>e[19]||(e[19]=[l(" Crear Cuenta por Pagar ")])),_:1},8,["href"]))])])])])])])],512),[[S,g.value]])]),t("div",_t,[t("div",Ct,[s.canEdit?(r(),f(u(v),{key:0,href:d.route("compras.edit",s.compra.id),class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors"},{default:p(()=>e[22]||(e[22]=[l(" Editar ")])),_:1},8,["href"])):c("",!0),s.canDelete?(r(),f(u(v),{key:1,href:d.route("compras.destroy",s.compra.id),method:"delete",as:"button",class:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors"},{default:p(()=>e[23]||(e[23]=[l(" Eliminar ")])),_:1},8,["href"])):c("",!0),t("button",{onClick:e[1]||(e[1]=o=>b.value=!0),class:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors"}," Vista Previa ")])])])]),h(D,{show:b.value,type:"compra",proveedor:s.compra.proveedor,items:C.value,totals:{subtotal:w.value,descuentoGeneral:x.value,iva:k.value,total:_.value},"descuento-general":x.value,notas:s.compra.notas,onClose:e[2]||(e[2]=o=>b.value=!1),onPrint:e[3]||(e[3]=()=>d.window.print())},null,8,["show","proveedor","items","totals","descuento-general","notas"])]),_:1})],64))}},Dt=E(Ft,[["__scopeId","data-v-61d050b1"]]);export{Dt as default};
