import{T as q,r as b,i as a,o as i,g as x,f as t,u as o,Z as L,e as w,l as f,A as k,v as m,k as d,z as g,t as u,x as C,F as V,m as B,s as F,E as S,q as T}from"./vendor-d19pJyVS.js";import{A as H}from"./AppLayout-CcnrZQKI.js";import{_ as $}from"./CategoriaHerramientaModal-J0UXQrIG.js";import"./utils-Dq7h7Pqt.js";import"./app-BcT2PLJy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"flex items-center justify-between mb-4"},P={class:"border-b border-gray-200 pb-6"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},O={key:0,class:"mt-1 text-sm text-red-600"},R={key:0,class:"mt-1 text-sm text-red-600"},W={class:"border-b border-gray-200 pb-6"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},J={class:"flex gap-2"},K=["value"],Q={key:0,class:"text-xs text-gray-500 mt-1"},X={key:1,class:"mt-1 text-sm text-red-600"},Y={key:0,class:"mt-1 text-sm text-red-600"},ee={class:"border-b border-gray-200 pb-6"},te={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},re={key:0,class:"mt-1 text-sm text-red-600"},oe={key:0,class:"mt-1 text-sm text-red-600"},se={key:0,class:"mt-1 text-sm text-red-600"},ae={class:"mt-4"},ie={class:"flex items-center"},le={class:"border-b border-gray-200 pb-6"},ne={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},de={key:0,class:"mt-1 text-sm text-red-600"},ue={class:"flex flex-col items-center space-y-4"},me={key:0,class:"relative"},pe=["src"],ce={key:1,class:"w-48 h-48 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-500 hover:border-gray-400 transition-colors"},ge={class:"flex space-x-2"},be={class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer"},xe={key:0,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer"},fe={key:2,class:"text-red-600 text-sm text-center"},ve={class:"flex justify-end space-x-4 pt-6"},ye=["disabled"],_e={key:0,class:"flex items-center"},he={key:1},Ue=Object.assign({layout:H},{__name:"Edit",props:{herramienta:{type:Object,required:!0},categorias:{type:Array,default:()=>[]}},setup(z){const l=z,r=q({nombre:l.herramienta.nombre||"",numero_serie:l.herramienta.numero_serie||"",estado:l.herramienta.estado||"disponible",descripcion:l.herramienta.descripcion||"",foto:null,categoria_id:l.herramienta.categoria_id||"",vida_util_meses:l.herramienta.vida_util_meses||"",costo_reemplazo:l.herramienta.costo_reemplazo||"",dias_para_mantenimiento:l.herramienta.dias_para_mantenimiento||"",requiere_mantenimiento:l.herramienta.requiere_mantenimiento||!1}),p=b(l.herramienta.foto?`/storage/${l.herramienta.foto}`:null),c=b([...l.categorias||[]]),v=b(!1),y=b(null),_=n=>{var s;const e=(s=n.target.files)==null?void 0:s[0];if(e){if(!e.type.startsWith("image/")){alert("Por favor selecciona un archivo de imagen vÃ¡lido");return}if(e.size>5*1024*1024){alert("La imagen es demasiado grande. El tamaÃ±o mÃ¡ximo es 5MB");return}r.foto=e;const h=new FileReader;h.onload=N=>{p.value=N.target.result},h.readAsDataURL(e)}},E=()=>{r.foto=null,p.value=l.herramienta.foto?`/storage/${l.herramienta.foto}`:null},U=()=>{r.put(route("herramientas.update",l.herramienta.id),{forceFormData:!0})},j=(n=null)=>{y.value=n,v.value=!0},M=()=>{v.value=!1,y.value=null},D=n=>{c.value.push(n),r.categoria_id=n.id},A=n=>{const e=c.value.findIndex(s=>s.id===n.id);e!==-1&&(c.value[e]=n),r.categoria_id===n.id&&(r.categoria_id=n.id)};return(n,e)=>(i(),a(V,null,[x(o(L),{title:`Editar Herramienta - ${l.herramienta.nombre}`},null,8,["title"]),t("div",I,[e[10]||(e[10]=t("h1",{class:"text-2xl font-semibold text-slate-900"},"Editar Herramienta",-1)),x(o(k),{class:"text-blue-600 hover:underline",href:n.route("herramientas.index")},{default:w(()=>e[9]||(e[9]=[f("Volver")])),_:1},8,["href"])]),t("form",{onSubmit:T(U,["prevent"]),class:"bg-white shadow-lg rounded-lg p-8 space-y-8 max-w-4xl"},[t("div",P,[e[13]||(e[13]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"InformaciÃ³n BÃ¡sica",-1)),t("div",G,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[f(" Nombre de la herramienta "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o(r).nombre=s),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Ej: Taladro inalÃ¡mbrico, MultÃ­metro digital...",required:""},null,512),[[g,o(r).nombre]]),o(r).errors.nombre?(i(),a("div",O,u(o(r).errors.nombre),1)):d("",!0)]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"NÃºmero de serie",-1)),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o(r).numero_serie=s),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Ej: TL-001, SN123456..."},null,512),[[g,o(r).numero_serie]]),o(r).errors.numero_serie?(i(),a("div",R,u(o(r).errors.numero_serie),1)):d("",!0)])])]),t("div",W,[e[18]||(e[18]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"CategorizaciÃ³n y Estado",-1)),t("div",Z,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"CategorÃ­a",-1)),t("div",J,[m(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o(r).categoria_id=s),class:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[e[14]||(e[14]=t("option",{value:""},"Sin categorÃ­a",-1)),(i(!0),a(V,null,B(c.value,s=>(i(),a("option",{key:s.id,value:s.id},u(s.nombre),9,K))),128))],512),[[C,o(r).categoria_id]]),t("button",{type:"button",onClick:j,class:"px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200"}," Gestionar ")]),c.value.length?d("",!0):(i(),a("p",Q,'No hay categorÃ­as. Usa "Gestionar" para crear una nueva.')),o(r).errors.categoria_id?(i(),a("div",X,u(o(r).errors.categoria_id),1)):d("",!0)]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Estado",-1)),m(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>o(r).estado=s),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},e[16]||(e[16]=[F('<option value="disponible">ðŸŸ¢ Disponible</option><option value="asignada">ðŸ”µ Asignada</option><option value="mantenimiento">ðŸŸ¡ En mantenimiento</option><option value="baja">ðŸ”´ De baja</option><option value="perdida">âš« Perdida</option>',5)]),512),[[C,o(r).estado]]),o(r).errors.estado?(i(),a("div",Y,u(o(r).errors.estado),1)):d("",!0)])])]),t("div",ee,[e[23]||(e[23]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"InformaciÃ³n TÃ©cnica",-1)),t("div",te,[t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Vida Ãºtil (meses)",-1)),m(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>o(r).vida_util_meses=s),type:"number",min:"1",max:"120",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"24"},null,512),[[g,o(r).vida_util_meses]]),o(r).errors.vida_util_meses?(i(),a("div",re,u(o(r).errors.vida_util_meses),1)):d("",!0)]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Costo de reemplazo ($)",-1)),m(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>o(r).costo_reemplazo=s),type:"number",step:"0.01",min:"0",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1500.00"},null,512),[[g,o(r).costo_reemplazo]]),o(r).errors.costo_reemplazo?(i(),a("div",oe,u(o(r).errors.costo_reemplazo),1)):d("",!0)]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"DÃ­as para mantenimiento",-1)),m(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>o(r).dias_para_mantenimiento=s),type:"number",min:"1",max:"365",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"90"},null,512),[[g,o(r).dias_para_mantenimiento]]),o(r).errors.dias_para_mantenimiento?(i(),a("div",se,u(o(r).errors.dias_para_mantenimiento),1)):d("",!0)])]),t("div",ae,[t("label",ie,[m(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>o(r).requiere_mantenimiento=s),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[S,o(r).requiere_mantenimiento]]),e[22]||(e[22]=t("span",{class:"ml-2 text-sm text-gray-700"},"Esta herramienta requiere mantenimiento programado",-1))])])]),t("div",le,[e[28]||(e[28]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"DescripciÃ³n y DocumentaciÃ³n",-1)),t("div",ne,[t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"DescripciÃ³n",-1)),m(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=s=>o(r).descripcion=s),rows:"4",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe las caracterÃ­sticas, uso, cuidados especiales..."},null,512),[[g,o(r).descripcion]]),o(r).errors.descripcion?(i(),a("div",de,u(o(r).errors.descripcion),1)):d("",!0)]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Foto de la herramienta",-1)),t("div",ue,[p.value?(i(),a("div",me,[t("img",{src:p.value,class:"w-48 h-48 object-cover rounded-lg border-2 border-gray-200"},null,8,pe),t("button",{onClick:E,class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600",title:"Eliminar imagen"}," Ã— ")])):(i(),a("div",ce,e[25]||(e[25]=[t("svg",{class:"w-12 h-12 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),t("span",{class:"text-sm"},"Foto de la herramienta",-1)]))),t("div",ge,[t("label",be,[t("span",null,u(p.value?"Cambiar imagen":"Seleccionar imagen"),1),t("input",{onChange:_,accept:"image/*",type:"file",class:"hidden"},null,32)]),p.value?d("",!0):(i(),a("label",xe,[e[26]||(e[26]=t("span",null,"Capturar foto",-1)),t("input",{onChange:_,accept:"image/*",capture:"environment",type:"file",class:"hidden"},null,32)]))]),o(r).errors.foto?(i(),a("div",fe,u(o(r).errors.foto),1)):d("",!0)])])])]),t("div",ve,[x(o(k),{href:n.route("herramientas.index"),class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200"},{default:w(()=>e[29]||(e[29]=[f(" Cancelar ")])),_:1},8,["href"]),t("button",{disabled:o(r).processing,type:"submit",class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"},[o(r).processing?(i(),a("span",_e,e[30]||(e[30]=[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),f(" Actualizando... ")]))):(i(),a("span",he,"Actualizar Herramienta"))],8,ye)])],32),x($,{show:v.value,categorias:c.value,onClose:M,onCategoriaCreated:D,onCategoriaUpdated:A},null,8,["show","categorias"])],64))}});export{Ue as default};
