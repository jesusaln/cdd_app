import{r as d,c as B,p as V,H as $,i as n,o as r,f as e,k as m,b as D,v as q,z as P,l as f,F as h,m as b,t as i,J as L,M as R}from"./vendor-d19pJyVS.js";const E={class:"buscar-servicios"},I={class:"mb-6"},T={class:"relative"},A={key:0,class:"mt-6"},H={class:"flex flex-wrap gap-2"},U={key:1,class:"mt-6"},X={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"},J=["onClick"],W={class:"flex items-center justify-between"},Y={class:"flex-1"},G={class:"flex items-center"},K={class:"text-sm font-medium text-gray-900"},O={class:"text-xs text-gray-500 mt-1"},Q={class:"text-right"},Z={class:"text-sm font-semibold text-purple-600"},ee={class:"text-xs text-gray-500"},te={class:"grid grid-cols-12 gap-2 items-center"},se={class:"col-span-4"},oe={class:"font-medium text-gray-900 text-sm"},re={key:0,class:"text-xs text-gray-500 truncate"},ne={class:"col-span-2"},ie={class:"text-sm text-gray-600"},le={class:"col-span-2"},ae={class:"text-sm font-semibold text-purple-600"},ce={class:"col-span-2"},de={class:"text-sm text-gray-600"},ue={class:"col-span-2"},pe=["onClick"],ve={__name:"BuscarServicios",props:{servicios:{type:Array,default:()=>[]}},emits:["servicio-seleccionado"],setup(S,{expose:M,emit:z}){const y=S,N=z,l=d(""),u=d(!1),c=d([]),p=d(null),v=d(0),a=d({top:0,left:0,height:0});M({focus:()=>{p.value&&p.value.focus()}});const x=B(()=>{if(!l.value)return[];const o=l.value.toLowerCase();return y.servicios.filter(t=>t.nombre.toLowerCase().includes(o)||t.categoria&&t.categoria.toLowerCase().includes(o)||t.descripcion&&t.descripcion.toLowerCase().includes(o)).slice(0,20)}),k=B(()=>y.servicios.sort((o,t)=>o.precio-t.precio).slice(0,6)),j=()=>{u.value=!0,F()},_=o=>{const t={...o};c.value.findIndex(g=>g.id===o.id)===-1&&(c.value.unshift(t),c.value.length>5&&c.value.pop()),N("servicio-seleccionado",o),l.value="",u.value=!1},w=o=>(Number.parseFloat(o)||0).toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2}),F=()=>{if(!p.value)return;const o=p.value.getBoundingClientRect();v.value=o.width,a.value={top:o.top+window.scrollY,left:o.left+window.scrollX,height:o.height}},C=o=>{o.target.closest(".buscar-servicios")||(u.value=!1)};return V(()=>{document.addEventListener("click",C)}),$(()=>{document.removeEventListener("click",C)}),(o,t)=>(r(),n("div",E,[e("div",I,[t[3]||(t[3]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Buscar Servicios ",-1)),e("div",T,[q(e("input",{ref_key:"inputBusqueda",ref:p,type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),onInput:j,onFocus:t[1]||(t[1]=s=>u.value=!0),placeholder:"Buscar servicios por nombre, categoría o descripción...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm"},null,544),[[P,l.value]]),t[2]||(t[2]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])]),c.value.length>0?(r(),n("div",A,[t[5]||(t[5]=e("h3",{class:"text-sm font-medium text-gray-700 mb-3 flex items-center"},[e("svg",{class:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),f(" Servicios recientes ")],-1)),e("div",H,[(r(!0),n(h,null,b(c.value,s=>(r(),n("span",{key:`reciente-${s.id}`,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},[f(i(s.nombre)+" ",1),t[4]||(t[4]=e("svg",{class:"w-3 h-3 ml-1 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1))]))),128))])])):m("",!0),!l.value&&k.value.length>0?(r(),n("div",U,[t[7]||(t[7]=e("h3",{class:"text-sm font-medium text-gray-700 mb-3 flex items-center"},[e("svg",{class:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),f(" Servicios populares ")],-1)),e("div",X,[(r(!0),n(h,null,b(k.value,s=>(r(),n("div",{key:`sugerencia-${s.id}`,onClick:g=>_(s),class:"p-3 border border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 cursor-pointer transition-all duration-200"},[e("div",W,[e("div",Y,[e("div",G,[t[6]||(t[6]=e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mr-2 bg-purple-100 text-purple-800"}," S ",-1)),e("span",K,i(s.nombre),1)]),e("div",O,i(s.categoria||"Sin categoría"),1)]),e("div",Q,[e("div",Z," $"+i(w(s.precio)),1),e("div",ee,i(s.duracion||"∞")+" min ",1)])])],8,J))),128))])])):m("",!0),(r(),D(R,{to:"#app"},[u.value&&x.value.length>0?(r(),n("div",{key:0,class:"z-50 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-80 overflow-y-auto",style:L({position:"absolute",width:v.value+"px",top:a.value.top+a.value.height+"px",left:a.value.left+"px"})},[t[9]||(t[9]=e("div",{class:"sticky top-0 bg-gray-50 border-b border-gray-200 px-4 py-2"},[e("div",{class:"grid grid-cols-12 gap-2 text-xs font-medium text-gray-600"},[e("div",{class:"col-span-4"},"Nombre"),e("div",{class:"col-span-2"},"Categoría"),e("div",{class:"col-span-2"},"Precio"),e("div",{class:"col-span-2"},"Duración"),e("div",{class:"col-span-2"},"Acción")])],-1)),(r(!0),n(h,null,b(x.value,s=>(r(),n("div",{key:s.id,class:"px-4 py-3 hover:bg-purple-50 border-b border-gray-100 last:border-b-0"},[e("div",te,[e("div",se,[e("div",oe,i(s.nombre),1),s.descripcion?(r(),n("div",re,i(s.descripcion),1)):m("",!0)]),e("div",ne,[e("span",ie,i(s.categoria||"Sin categoría"),1)]),e("div",le,[e("span",ae," $"+i(w(s.precio)),1)]),e("div",ce,[e("span",de,i(s.duracion||"∞")+" min",1)]),e("div",ue,[e("button",{type:"button",onClick:g=>_(s),class:"w-full px-2 py-1 text-xs font-medium rounded-md bg-purple-500 text-white hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-1 transition-colors duration-200"},t[8]||(t[8]=[e("svg",{class:"w-3 h-3 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]),8,pe)])])]))),128))],4)):m("",!0),l.value&&x.value.length===0?(r(),n("div",{key:1,class:"px-4 py-8 text-center text-gray-500 z-50 bg-white border border-gray-300 rounded-lg shadow-lg",style:L({position:"absolute",width:v.value+"px",top:a.value.top+a.value.height+"px",left:a.value.left+"px"})},t[10]||(t[10]=[e("svg",{class:"w-12 h-12 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"text-sm font-medium"},"No se encontraron servicios",-1),e("p",{class:"text-xs text-gray-400 mt-1"},"Intenta con otros términos de búsqueda",-1)]),4)):m("",!0)]))]))}};export{ve as _};
