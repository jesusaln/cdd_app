import{r as v,c as B,i as a,o as n,g as m,f as e,k as r,u,Z as F,e as c,l as p,A as g,t as i,n as T,s as L,v as w,z as k,F as M,m as N,N as S}from"./vendor-d19pJyVS.js";import{A as R}from"./AppLayout-CcnrZQKI.js";import"./utils-Dq7h7Pqt.js";import"./app-BcT2PLJy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"flex items-center justify-between mb-6"},I={class:"flex items-center gap-4"},P={class:"text-3xl font-bold text-slate-900"},O={class:"flex gap-3"},U={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},q={class:"lg:col-span-2 space-y-6"},G={class:"bg-white rounded-lg shadow-sm border p-6"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},J={class:"space-y-4"},K={class:"text-lg font-semibold"},Q={class:"flex items-center gap-2 mt-1"},W={class:"text-lg"},X={class:"text-lg"},Y={class:"space-y-4"},ee={class:"mt-2"},te=["src"],se={key:1,class:"w-full max-w-sm h-48 bg-gray-100 rounded-lg border flex items-center justify-center"},oe={class:"mt-6"},ie={class:"mt-1 text-gray-900 whitespace-pre-wrap"},ae={class:"bg-white rounded-lg shadow-sm border p-6"},ne={class:"flex items-center justify-between mb-4"},le={key:0,class:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200"},re={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},de={class:"mb-4"},me={class:"mb-4"},ue={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ce={class:"text-center p-4 bg-gray-50 rounded-lg"},pe={class:"text-2xl font-bold text-blue-600"},ge={class:"text-center p-4 bg-gray-50 rounded-lg"},ve={class:"text-2xl font-bold text-orange-600"},xe={class:"text-center p-4 bg-gray-50 rounded-lg"},be={class:"text-2xl font-bold text-purple-600"},fe={class:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},he={class:"text-lg"},_e={class:"text-lg"},ye={key:0,class:"text-red-600 font-medium"},we={key:1,class:"text-green-600 font-medium"},ke={class:"bg-white rounded-lg shadow-sm border p-6"},Me={key:0,class:"space-y-3"},je={class:"flex justify-between"},De={class:"font-medium"},Ce={class:"flex justify-between"},Ne={class:"font-medium"},Se={class:"flex justify-between"},Ve={class:"font-medium"},Ae={key:1,class:"text-center py-8 text-gray-500"},Ee={class:"bg-white rounded-lg shadow-sm border p-6"},$e={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},ze={class:"text-xl font-bold text-blue-600"},Be={class:"text-sm text-gray-600"},Fe={class:"space-y-6"},Te={class:"bg-white rounded-lg shadow-sm border p-6"},Le={class:"space-y-3"},Re={class:"bg-white rounded-lg shadow-sm border p-6"},He={class:"space-y-3"},Ie={class:"flex justify-between"},Pe={class:"font-medium"},Oe={class:"flex justify-between"},Ue={class:"font-medium"},qe={class:"flex justify-between"},Ge={class:"font-medium"},Ze={key:0,class:"text-red-600"},Je={key:1,class:"text-green-600"},Ke={class:"bg-white rounded-lg shadow-sm border p-6"},Qe={class:"space-y-3"},We={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-lg"},Xe={key:1,class:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg"},Ye={key:2,class:"p-3 bg-green-50 border border-green-200 rounded-lg"},et={key:0,class:"mt-6 bg-white rounded-lg shadow-sm border p-6"},tt={class:"space-y-3"},st={class:"font-medium"},ot={class:"text-sm text-gray-600"},it={key:0,class:"text-sm text-gray-500"},at={class:"text-right"},nt={key:0,class:"font-medium"},lt={key:1,class:"text-sm text-gray-500"},rt={class:"mt-4 text-center"},gt=Object.assign({layout:R},{__name:"Show",props:{herramienta:{type:Object,required:!0},estadisticas:{type:Object,default:()=>({})},historial_completo:{type:Array,default:()=>[]}},setup(x){const s=x,d=v(!1),b=v(new Date().toISOString().split("T")[0]),f=v(""),h=v(""),_=v(""),y=l=>l?new Date(l).toLocaleDateString("es-ES"):"N/A",V=l=>l?new Date(l).toLocaleString("es-ES"):"N/A",A=l=>({disponible:"bg-green-100 text-green-800",asignada:"bg-blue-100 text-blue-800",mantenimiento:"bg-yellow-100 text-yellow-800",baja:"bg-red-100 text-red-800",perdida:"bg-red-100 text-red-800"})[l]||"bg-gray-100 text-gray-800",j=l=>({disponible:"Disponible",asignada:"Asignada",mantenimiento:"En Mantenimiento",baja:"De Baja",perdida:"Perdida"})[l]||l,E=()=>{S.post(`/herramientas/${s.herramienta.id}/mantenimiento`,{fecha_mantenimiento:b.value,costo_mantenimiento:f.value,descripcion_mantenimiento:h.value,proximo_mantenimiento_dias:_.value},{preserveScroll:!0,onSuccess:()=>{d.value=!1,b.value=new Date().toISOString().split("T")[0],f.value="",h.value="",_.value=""}})},$=l=>{confirm(`¿Estás seguro de cambiar el estado a "${j(l)}"?`)&&S.post(`/herramientas/${s.herramienta.id}/cambiar-estado`,{estado:l,observaciones:"Cambio desde vista de detalles"},{preserveScroll:!0})},z=B(()=>[{label:"Total de asignaciones",value:s.estadisticas.total_asignaciones||0},{label:"Asignaciones activas",value:s.estadisticas.asignaciones_activas||0},{label:"Promedio días de uso",value:`${s.estadisticas.promedio_dias_uso||0} días`},{label:"Devoluciones por desgaste",value:s.estadisticas.devoluciones_por_desgaste||0},{label:"Devoluciones por daño",value:s.estadisticas.devoluciones_por_danio||0},{label:"Devoluciones por pérdida",value:s.estadisticas.devoluciones_por_perdida||0}]);return(l,t)=>{var D,C;return n(),a(M,null,[m(u(F),{title:`Herramienta - ${s.herramienta.nombre}`},null,8,["title"]),e("div",H,[e("div",I,[m(u(g),{href:"/herramientas",class:"text-blue-600 hover:underline"},{default:c(()=>t[7]||(t[7]=[p(" ← Volver al listado ")])),_:1}),e("h1",P,i(s.herramienta.nombre),1)]),e("div",O,[m(u(g),{href:`/herramientas/${s.herramienta.id}/estadisticas`,class:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700"},{default:c(()=>t[8]||(t[8]=[p(" Estadísticas ")])),_:1},8,["href"]),m(u(g),{href:`/herramientas/${s.herramienta.id}/edit`,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},{default:c(()=>t[9]||(t[9]=[p(" Editar ")])),_:1},8,["href"])])]),e("div",U,[e("div",q,[e("div",G,[t[18]||(t[18]=e("h2",{class:"text-xl font-semibold mb-4"},"Información General",-1)),e("div",Z,[e("div",J,[e("div",null,[t[10]||(t[10]=e("label",{class:"text-sm font-medium text-gray-500"},"Número de Serie",-1)),e("p",K,i(s.herramienta.numero_serie||"N/A"),1)]),e("div",null,[t[12]||(t[12]=e("label",{class:"text-sm font-medium text-gray-500"},"Estado",-1)),e("div",Q,[e("span",{class:T(["px-3 py-1 rounded-full text-sm font-medium",A(s.herramienta.estado)])},i(j(s.herramienta.estado)),3),e("select",{onChange:t[0]||(t[0]=o=>$(o.target.value)),class:"text-sm border rounded px-2 py-1"},t[11]||(t[11]=[L('<option value="">Cambiar estado</option><option value="disponible">Disponible</option><option value="asignada">Asignada</option><option value="mantenimiento">En Mantenimiento</option><option value="baja">De Baja</option><option value="perdida">Perdida</option>',6)]),32)])]),e("div",null,[t[13]||(t[13]=e("label",{class:"text-sm font-medium text-gray-500"},"Categoría",-1)),e("p",W,i(((D=s.herramienta.categoria_herramienta)==null?void 0:D.nombre)||"Sin categoría"),1)]),e("div",null,[t[14]||(t[14]=e("label",{class:"text-sm font-medium text-gray-500"},"Fecha de Creación",-1)),e("p",X,i(y(s.herramienta.created_at)),1)])]),e("div",Y,[e("div",null,[t[16]||(t[16]=e("label",{class:"text-sm font-medium text-gray-500"},"Foto",-1)),e("div",ee,[s.herramienta.foto?(n(),a("img",{key:0,src:`/storage/${s.herramienta.foto}`,alt:"Foto de la herramienta",class:"w-full max-w-sm h-48 object-cover rounded-lg border"},null,8,te)):(n(),a("div",se,t[15]||(t[15]=[e("svg",{class:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)])))])])])]),e("div",oe,[t[17]||(t[17]=e("label",{class:"text-sm font-medium text-gray-500"},"Descripción",-1)),e("p",ie,i(s.herramienta.descripcion||"No hay descripción disponible"),1)])]),e("div",ae,[e("div",ne,[t[19]||(t[19]=e("h2",{class:"text-xl font-semibold"},"Información de Mantenimiento",-1)),e("button",{onClick:t[1]||(t[1]=o=>d.value=!d.value),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"},i(d.value?"Cancelar":"Registrar Mantenimiento"),1)]),d.value?(n(),a("div",le,[t[24]||(t[24]=e("h3",{class:"font-medium text-green-800 mb-3"},"Nuevo Registro de Mantenimiento",-1)),e("div",re,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Fecha de Mantenimiento",-1)),w(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>b.value=o),type:"date",class:"w-full border rounded px-3 py-2"},null,512),[[k,b.value]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Costo",-1)),w(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>f.value=o),type:"number",step:"0.01",placeholder:"0.00",class:"w-full border rounded px-3 py-2"},null,512),[[k,f.value]])])]),e("div",de,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Próximo Mantenimiento (días)",-1)),w(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>_.value=o),type:"number",placeholder:"90",class:"w-full border rounded px-3 py-2"},null,512),[[k,_.value]])]),e("div",me,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Descripción del Mantenimiento",-1)),w(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>h.value=o),rows:"3",placeholder:"Describe el mantenimiento realizado...",class:"w-full border rounded px-3 py-2"},null,512),[[k,h.value]])]),e("button",{onClick:E,class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"}," Guardar Mantenimiento ")])):r("",!0),e("div",ue,[e("div",ce,[e("div",pe,i(s.herramienta.dias_desde_ultimo_mantenimiento||0),1),t[25]||(t[25]=e("div",{class:"text-sm text-gray-600"},"Días desde último mantenimiento",-1))]),e("div",ge,[e("div",ve,i(s.herramienta.dias_para_proximo_mantenimiento||0),1),t[26]||(t[26]=e("div",{class:"text-sm text-gray-600"},"Días para próximo mantenimiento",-1))]),e("div",xe,[e("div",be,i(s.herramienta.porcentaje_vida_util||0)+"%",1),t[27]||(t[27]=e("div",{class:"text-sm text-gray-600"},"Vida útil utilizada",-1))])]),e("div",fe,[e("div",null,[t[28]||(t[28]=e("label",{class:"text-sm font-medium text-gray-500"},"Último Mantenimiento",-1)),e("p",he,i(y(s.herramienta.fecha_ultimo_mantenimiento)),1)]),e("div",null,[t[29]||(t[29]=e("label",{class:"text-sm font-medium text-gray-500"},"Requiere Mantenimiento",-1)),e("p",_e,[s.herramienta.requiere_mantenimiento?(n(),a("span",ye,"Sí")):(n(),a("span",we,"No"))])])])]),e("div",ke,[t[34]||(t[34]=e("h2",{class:"text-xl font-semibold mb-4"},"Información de Asignación",-1)),(C=s.herramienta.tecnico)!=null&&C.nombre?(n(),a("div",Me,[e("div",je,[t[30]||(t[30]=e("span",{class:"text-gray-600"},"Técnico asignado:",-1)),e("span",De,i(s.herramienta.tecnico.nombre),1)]),e("div",Ce,[t[31]||(t[31]=e("span",{class:"text-gray-600"},"Fecha de asignación:",-1)),e("span",Ne,i(y(s.herramienta.fecha_asignacion)),1)]),e("div",Se,[t[32]||(t[32]=e("span",{class:"text-gray-600"},"Fecha de recepción:",-1)),e("span",Ve,i(y(s.herramienta.fecha_recepcion)||"No recibida"),1)])])):(n(),a("div",Ae,t[33]||(t[33]=[e("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),e("p",null,"No hay asignación activa",-1)])))]),e("div",Ee,[t[35]||(t[35]=e("h2",{class:"text-xl font-semibold mb-4"},"Estadísticas de Uso",-1)),e("div",$e,[(n(!0),a(M,null,N(z.value,o=>(n(),a("div",{key:o.label,class:"text-center p-3 bg-gray-50 rounded-lg"},[e("div",ze,i(o.value),1),e("div",Be,i(o.label),1)]))),128))])])]),e("div",Fe,[e("div",Te,[t[38]||(t[38]=e("h3",{class:"text-lg font-semibold mb-4"},"Acciones Rápidas",-1)),e("div",Le,[e("button",{onClick:t[6]||(t[6]=o=>d.value=!d.value),class:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"}," Registrar Mantenimiento "),m(u(g),{href:"/herramientas-mantenimiento",class:"block w-full px-4 py-2 bg-orange-600 text-white text-center rounded-lg hover:bg-orange-700"},{default:c(()=>t[36]||(t[36]=[p(" Ver Mantenimiento ")])),_:1}),m(u(g),{href:"/herramientas-alertas",class:"block w-full px-4 py-2 bg-red-600 text-white text-center rounded-lg hover:bg-red-700"},{default:c(()=>t[37]||(t[37]=[p(" Ver Alertas ")])),_:1})])]),e("div",Re,[t[42]||(t[42]=e("h3",{class:"text-lg font-semibold mb-4"},"Especificaciones Técnicas",-1)),e("div",He,[e("div",Ie,[t[39]||(t[39]=e("span",{class:"text-gray-600"},"Vida útil (meses):",-1)),e("span",Pe,i(s.herramienta.vida_util_meses||"N/A"),1)]),e("div",Oe,[t[40]||(t[40]=e("span",{class:"text-gray-600"},"Costo de reemplazo:",-1)),e("span",Ue,"$"+i(s.herramienta.costo_reemplazo||"N/A"),1)]),e("div",qe,[t[41]||(t[41]=e("span",{class:"text-gray-600"},"Próxima a vencer vida útil:",-1)),e("span",Ge,[s.herramienta.vida_util_proxima_a_vencer?(n(),a("span",Ze,"Sí")):(n(),a("span",Je,"No"))])])])]),e("div",Ke,[t[46]||(t[46]=e("h3",{class:"text-lg font-semibold mb-4"},"Estado de Alertas",-1)),e("div",Qe,[s.herramienta.necesita_mantenimiento?(n(),a("div",We,t[43]||(t[43]=[e("div",{class:"flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})]),e("span",{class:"text-sm font-medium text-red-800"},"Requiere mantenimiento urgente")],-1)]))):r("",!0),s.herramienta.vida_util_proxima_a_vencer?(n(),a("div",Xe,t[44]||(t[44]=[e("div",{class:"flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-sm font-medium text-yellow-800"},"Próxima a vencer vida útil")],-1)]))):r("",!0),!s.herramienta.necesita_mantenimiento&&!s.herramienta.vida_util_proxima_a_vencer?(n(),a("div",Ye,t[45]||(t[45]=[e("div",{class:"flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-sm font-medium text-green-800"},"Estado normal")],-1)]))):r("",!0)])])])]),x.historial_completo&&x.historial_completo.length>0?(n(),a("div",et,[t[48]||(t[48]=e("h2",{class:"text-xl font-semibold mb-4"},"Historial Reciente",-1)),e("div",tt,[(n(!0),a(M,null,N(x.historial_completo.slice(0,5),o=>(n(),a("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("div",st,i(o.tipo_accion),1),e("div",ot,i(V(o.fecha_accion)),1),o.descripcion?(n(),a("div",it,i(o.descripcion),1)):r("",!0)]),e("div",at,[o.costo?(n(),a("div",nt,"$"+i(o.costo),1)):r("",!0),o.usuario?(n(),a("div",lt,i(o.usuario.nombre),1)):r("",!0)])]))),128))]),e("div",rt,[m(u(g),{href:`/herramientas/${s.herramienta.id}/estadisticas`,class:"text-blue-600 hover:underline"},{default:c(()=>t[47]||(t[47]=[p(" Ver historial completo → ")])),_:1},8,["href"])])])):r("",!0)],64)}}});export{gt as default};
