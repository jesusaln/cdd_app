import{B as ee,C as P,w as ye,i,o as d,f as e,l as T,t as l,v as L,z as te,x as H,F as V,m as O,s as oe,Q as he,p as we,r as h,c as S,g as se,u as ke,Z as _e,k as z,n as I,q as Ce,N as w}from"./vendor-d19pJyVS.js";import{A as Me}from"./AppLayout-CcnrZQKI.js";import{N as Ae}from"./app-BcT2PLJy.js";import{_ as Se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Dq7h7Pqt.js";const je={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},$e={class:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-6 border-b border-gray-200/60"},Be={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},Fe={class:"bg-white/70 rounded-lg p-4 border border-gray-200/50"},Ue={class:"flex items-center justify-between"},De={class:"text-2xl font-bold text-gray-900"},Ee={class:"bg-white/70 rounded-lg p-4 border border-gray-200/50"},Ne={class:"flex items-center justify-between"},ze={class:"text-2xl font-bold text-green-600"},Pe={class:"bg-white/70 rounded-lg p-4 border border-gray-200/50"},Le={class:"flex items-center justify-between"},Ve={class:"text-2xl font-bold text-blue-600"},Te={class:"bg-white/70 rounded-lg p-4 border border-gray-200/50"},qe={class:"flex items-center justify-between"},He={class:"text-2xl font-bold text-purple-600"},Ie={class:"bg-white/70 rounded-lg p-4 border border-gray-200/50"},Oe={class:"flex items-center justify-between"},Ze={class:"text-2xl font-bold text-indigo-600"},Re={class:"px-6 py-4 bg-gray-50/50 border-b border-gray-200/60"},Ye={class:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0"},Qe={class:"flex-1 max-w-md"},Xe={class:"relative"},Ge={class:"flex items-center space-x-3"},Je=["value"],Ke={__name:"BitacoraHeader",props:ee({total:{type:Number,default:0},hoy:{type:Number,default:0},estaSemana:{type:Number,default:0},esteMes:{type:Number,default:0},usuariosActivos:{type:Number,default:0},usuarios:{type:Array,default:()=>[]}},{searchTerm:{type:String,default:""},searchTermModifiers:{},sortBy:{type:String,default:"created_at-desc"},sortByModifiers:{},filtroUsuario:{type:String,default:""},filtroUsuarioModifiers:{},filtroAccion:{type:String,default:""},filtroAccionModifiers:{},filtroFecha:{type:String,default:""},filtroFechaModifiers:{}}),emits:ee(["exportar","search-change","filtro-usuario-change","filtro-accion-change","filtro-fecha-change","sort-change","limpiar-filtros"],["update:searchTerm","update:sortBy","update:filtroUsuario","update:filtroAccion","update:filtroFecha"]),setup(p,{emit:U}){const M=U,r=P(p,"searchTerm"),x=P(p,"sortBy"),k=P(p,"filtroUsuario"),n=P(p,"filtroAccion"),j=P(p,"filtroFecha"),b=()=>M("exportar"),g=()=>M("search-change",r.value),_=()=>M("filtro-usuario-change",k.value),D=()=>M("filtro-accion-change",n.value),E=()=>M("filtro-fecha-change",j.value),N=()=>M("sort-change",x.value),$=()=>M("limpiar-filtros");return ye([r,x,k,n,j],()=>{},{immediate:!0}),(Z,s)=>(d(),i("div",je,[e("div",$e,[e("div",{class:"flex items-center justify-between mb-6"},[s[6]||(s[6]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 tracking-tight"},"Bitácora de Actividades"),e("p",{class:"text-sm text-gray-600 mt-1"},"Registro completo de todas las actividades del sistema")],-1)),e("div",{class:"flex gap-3"},[e("button",{onClick:b,class:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200"},s[5]||(s[5]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),T(" Exportar ")]))])]),e("div",Be,[e("div",Fe,[e("div",Ue,[e("div",null,[s[7]||(s[7]=e("p",{class:"text-sm font-medium text-gray-600"},"Total",-1)),e("p",De,l(p.total),1)]),s[8]||(s[8]=e("div",{class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))])]),e("div",Ee,[e("div",Ne,[e("div",null,[s[9]||(s[9]=e("p",{class:"text-sm font-medium text-gray-600"},"Hoy",-1)),e("p",ze,l(p.hoy),1)]),s[10]||(s[10]=e("div",{class:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),e("div",Pe,[e("div",Le,[e("div",null,[s[11]||(s[11]=e("p",{class:"text-sm font-medium text-gray-600"},"Esta Semana",-1)),e("p",Ve,l(p.estaSemana),1)]),s[12]||(s[12]=e("div",{class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1))])]),e("div",Te,[e("div",qe,[e("div",null,[s[13]||(s[13]=e("p",{class:"text-sm font-medium text-gray-600"},"Este Mes",-1)),e("p",He,l(p.esteMes),1)]),s[14]||(s[14]=e("div",{class:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))])]),e("div",Ie,[e("div",Oe,[e("div",null,[s[15]||(s[15]=e("p",{class:"text-sm font-medium text-gray-600"},"Usuarios Activos",-1)),e("p",Ze,l(p.usuariosActivos),1)]),s[16]||(s[16]=e("div",{class:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1))])])])]),e("div",Re,[e("div",Ye,[e("div",Qe,[e("div",Xe,[s[17]||(s[17]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),L(e("input",{"onUpdate:modelValue":s[0]||(s[0]=u=>r.value=u),type:"text",placeholder:"Buscar por usuario, acción o descripción...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm",onInput:g},null,544),[[te,r.value]])])]),e("div",Ge,[L(e("select",{"onUpdate:modelValue":s[1]||(s[1]=u=>k.value=u),onChange:_,class:"block w-48 pl-3 pr-10 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 bg-white"},[s[18]||(s[18]=e("option",{value:""},"Todos los Usuarios",-1)),(d(!0),i(V,null,O(p.usuarios,u=>(d(),i("option",{key:u.id,value:u.id},l(u.name),9,Je))),128))],544),[[H,k.value]]),L(e("select",{"onUpdate:modelValue":s[2]||(s[2]=u=>n.value=u),onChange:D,class:"block w-48 pl-3 pr-10 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 bg-white"},s[19]||(s[19]=[oe('<option value="" data-v-932dab2f>Todas las Acciones</option><option value="crear" data-v-932dab2f>Crear</option><option value="editar" data-v-932dab2f>Editar</option><option value="eliminar" data-v-932dab2f>Eliminar</option><option value="login" data-v-932dab2f>Login</option><option value="logout" data-v-932dab2f>Logout</option><option value="exportar" data-v-932dab2f>Exportar</option>',7)]),544),[[H,n.value]]),L(e("input",{"onUpdate:modelValue":s[3]||(s[3]=u=>j.value=u),type:"date",onChange:E,class:"block w-40 pl-3 pr-10 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 bg-white",placeholder:"Fecha"},null,544),[[te,j.value]]),L(e("select",{"onUpdate:modelValue":s[4]||(s[4]=u=>x.value=u),onChange:N,class:"block w-48 pl-3 pr-10 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 bg-white"},s[20]||(s[20]=[oe('<option value="created_at-desc" data-v-932dab2f>Fecha (Más reciente)</option><option value="created_at-asc" data-v-932dab2f>Fecha (Más antiguo)</option><option value="usuario-asc" data-v-932dab2f>Usuario (A-Z)</option><option value="usuario-desc" data-v-932dab2f>Usuario (Z-A)</option><option value="accion-asc" data-v-932dab2f>Acción (A-Z)</option><option value="accion-desc" data-v-932dab2f>Acción (Z-A)</option>',6)]),544),[[H,x.value]]),e("button",{onClick:$,class:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200"},s[21]||(s[21]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),T(" Limpiar ")]))])])])]))}},We=Se(Ke,[["__scopeId","data-v-932dab2f"]]),et={class:"bitacora-index min-h-screen bg-gray-50"},tt={class:"max-w-8xl mx-auto px-6 py-8"},ot={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},st={class:"overflow-x-auto"},at={class:"min-w-full divide-y divide-gray-200"},rt={class:"bg-white divide-y divide-gray-200"},lt={class:"px-6 py-4"},nt={class:"text-sm text-gray-900"},it={class:"px-6 py-4"},dt={class:"text-sm font-medium text-gray-900"},ut={class:"text-sm text-gray-500 max-w-xs truncate"},ct={class:"px-6 py-4"},pt={class:"text-sm text-gray-700"},gt={class:"px-6 py-4"},vt={class:"text-sm text-gray-700"},ft={class:"px-6 py-4"},mt={class:"px-6 py-4 text-right"},xt={class:"flex items-center justify-end space-x-1"},bt=["onClick"],yt=["onClick"],ht=["onClick"],wt={key:0},kt={key:0,class:"bg-white border-t border-gray-200 px-4 py-3 sm:px-6"},_t={class:"flex flex-col sm:flex-row items-center justify-between gap-4"},Ct={class:"flex items-center gap-4"},Mt={class:"text-sm text-gray-700"},At=["value"],St={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},jt={key:1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-gray-100 text-sm font-medium text-gray-400"},$t=["onClick"],Bt={key:3,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-gray-100 text-sm font-medium text-gray-400"},Ft={class:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto"},Ut={class:"flex items-center justify-between p-6 border-b border-gray-200"},Dt={class:"text-lg font-medium text-gray-900"},Et={class:"p-6"},Nt={key:0},zt={class:"space-y-4"},Pt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Lt={class:"space-y-3"},Vt={class:"mt-1 text-sm text-gray-900 bg-gray-50 px-3 py-2 rounded-md"},Tt={class:"mt-1 text-sm text-gray-900 bg-gray-50 px-3 py-2 rounded-md"},qt={class:"mt-1 text-sm text-gray-900 bg-gray-50 px-3 py-2 rounded-md"},Ht={class:"space-y-3"},It={class:"mt-1 text-sm text-gray-900 bg-gray-50 px-3 py-2 rounded-md"},Ot={class:"mt-1 text-sm text-gray-900 bg-gray-50 px-3 py-2 rounded-md"},Zt={class:"mt-1 text-sm text-gray-900 bg-gray-50 px-3 py-2 rounded-md"},Rt={class:"mt-1 text-sm text-gray-900 bg-gray-50 px-3 py-2 rounded-md"},Yt={key:0},Qt={class:"mt-1 text-sm text-gray-900 bg-gray-50 px-3 py-2 rounded-md whitespace-pre-wrap"},Xt={key:1},Gt={class:"text-center"},Jt={class:"text-sm text-gray-500 mb-4"},Kt={class:"flex justify-end space-x-3"},ao=Object.assign({layout:Me},{__name:"Index",props:{actividades:{type:[Object,Array],required:!0},stats:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({})},sorting:{type:Object,default:()=>({sort_by:"fecha",sort_direction:"desc"})},usuarios:{type:Array,default:()=>[]},clientes:{type:Array,default:()=>[]},tipos:{type:Array,default:()=>[]},estados:{type:Array,default:()=>[]}},setup(p){var G,J;const U=new Ae({duration:4e3,position:{x:"right",y:"top"},types:[{type:"success",background:"#10b981",icon:!1},{type:"error",background:"#ef4444",icon:!1},{type:"warning",background:"#f59e0b",icon:!1}]}),M=he();we(()=>{const o=M.props.flash;o!=null&&o.success&&U.success(o.success),o!=null&&o.error&&U.error(o.error)});const r=p,x=h(!1),k=h("details"),n=h(null),j=h(null),b=h(((G=r.filters)==null?void 0:G.q)??""),g=h("fecha-desc"),_=h(((J=r.filters)==null?void 0:J.estado)??""),D=h(""),E=h(""),N=h("");h(1);const $=h(15),Z=S(()=>{if(m.value&&m.value.length>0){const o=new Date().toDateString();return m.value.filter(t=>new Date(t.fecha).toDateString()===o).length}return 0}),s=S(()=>{if(m.value&&m.value.length>0){const o=new Date,t=new Date(o.setDate(o.getDate()-o.getDay())),c=new Date(o.setDate(o.getDate()-o.getDay()+6));return m.value.filter(y=>{const f=new Date(y.fecha);return f>=t&&f<=c}).length}return 0}),u=S(()=>{if(m.value&&m.value.length>0){const o=new Date,t=new Date(o.getFullYear(),o.getMonth(),1),c=new Date(o.getFullYear(),o.getMonth()+1,0);return m.value.filter(y=>{const f=new Date(y.fecha);return f>=t&&f<=c}).length}return 0}),ae=S(()=>{if(m.value&&m.value.length>0){const o=new Set;return m.value.forEach(t=>{t.usuario_id&&o.add(t.usuario_id)}),o.size}return 0}),re=o=>{D.value=o,w.get(route("bitacora.index"),{q:b.value,sort_by:g.value.split("-")[0],sort_direction:g.value.split("-")[1]||"desc",estado:_.value,usuario_id:o,per_page:$.value,page:1},{preserveState:!0,preserveScroll:!0})},le=o=>{E.value=o,w.get(route("bitacora.index"),{q:b.value,sort_by:g.value.split("-")[0],sort_direction:g.value.split("-")[1]||"desc",estado:_.value,tipo:o,per_page:$.value,page:1},{preserveState:!0,preserveScroll:!0})},ne=o=>{N.value=o,w.get(route("bitacora.index"),{q:b.value,sort_by:g.value.split("-")[0],sort_direction:g.value.split("-")[1]||"desc",estado:_.value,fecha:o,per_page:$.value,page:1},{preserveState:!0,preserveScroll:!0})},C=S(()=>r.actividades),m=S(()=>{var o;return((o=C.value)==null?void 0:o.data)||[]}),ie=S(()=>{var o,t,c,y,f,a,A,B,F,K,W;return{total:((o=r.stats)==null?void 0:o.total)??0,pendientes:((t=r.stats)==null?void 0:t.pendientes)??0,en_proceso:((c=r.stats)==null?void 0:c.en_proceso)??0,completados:((y=r.stats)==null?void 0:y.completados)??0,cancelados:((f=r.stats)==null?void 0:f.cancelados)??0,costo_total_mes:((a=r.stats)==null?void 0:a.costo_total_mes)??0,actividades_mes:((A=r.stats)==null?void 0:A.actividades_mes)??0,pendientesPorcentaje:((B=r.stats)==null?void 0:B.pendientes)>0?Math.round(r.stats.pendientes/r.stats.total*100):0,enProcesoPorcentaje:((F=r.stats)==null?void 0:F.en_proceso)>0?Math.round(r.stats.en_proceso/r.stats.total*100):0,completadosPorcentaje:((K=r.stats)==null?void 0:K.completados)>0?Math.round(r.stats.completados/r.stats.total*100):0,canceladosPorcentaje:((W=r.stats)==null?void 0:W.cancelados)>0?Math.round(r.stats.cancelados/r.stats.total*100):0}}),R=S(()=>m.value.map(o=>({id:o.id,titulo:o.titulo||"Sin título",subtitulo:o.descripcion?o.descripcion.substring(0,50)+(o.descripcion.length>50?"...":""):"Sin descripción",estado:o.estado||"pendiente",extra:`Cliente: ${o.cliente?o.cliente.nombre_razon_social:"N/A"} | Usuario: ${o.usuario?o.usuario.name:"N/A"} | Tipo: ${o.tipo||"N/A"}`,fecha:o.fecha,raw:o})));function de(){b.value="",g.value="fecha-desc",_.value="",D.value="",E.value="",N.value="",$.value=15,w.get(route("bitacora.index"),{q:"",sort_by:"fecha",sort_direction:"desc",estado:"",per_page:15,page:1},{preserveState:!1,preserveScroll:!1}),U.success("Filtros limpiados")}function ue(o){b.value=o,w.get(route("bitacora.index"),{q:o,sort_by:g.value.split("-")[0],sort_direction:g.value.split("-")[1]||"desc",estado:_.value,per_page:$.value,page:1},{preserveState:!1,preserveScroll:!1})}function ce(o){g.value=o,w.get(route("bitacora.index"),{q:b.value,sort_by:o.split("-")[0],sort_direction:o.split("-")[1]||"desc",estado:_.value,per_page:$.value,page:1},{preserveState:!1,preserveScroll:!1})}const pe=o=>{n.value=o.raw,k.value="details",x.value=!0},ge=o=>{w.visit(route("bitacora.edit",o))},ve=o=>{j.value=o,k.value="confirm",x.value=!0},fe=()=>{w.delete(route("bitacora.destroy",j.value),{preserveScroll:!0,onSuccess:()=>{U.success("Actividad eliminada correctamente"),x.value=!1,j.value=null,w.reload()},onError:o=>{U.error("No se pudo eliminar la actividad")}})},me=()=>{const o=new URLSearchParams;b.value&&o.append("q",b.value),_.value&&o.append("estado",_.value);const t=o.toString(),c=route("bitacora.export")+(t?`?${t}`:"");window.location.href=c},v=S(()=>{var o,t,c,y,f,a,A,B,F;return{current_page:((o=C.value)==null?void 0:o.current_page)||1,last_page:((t=C.value)==null?void 0:t.last_page)||1,per_page:((c=C.value)==null?void 0:c.per_page)||15,from:((y=C.value)==null?void 0:y.from)||0,to:((f=C.value)==null?void 0:f.to)||0,total:((a=C.value)==null?void 0:a.total)||0,prev_page_url:(A=C.value)==null?void 0:A.prev_page_url,next_page_url:(B=C.value)==null?void 0:B.next_page_url,links:((F=C.value)==null?void 0:F.links)||[]}}),xe=o=>{w.get(route("bitacora.index"),{...r.filters,...r.sorting,per_page:o,page:1},{preserveState:!1,preserveScroll:!1})},q=o=>{w.get(route("bitacora.index"),{...r.filters,...r.sorting,page:o},{preserveState:!1,preserveScroll:!1})},be=o=>new Intl.NumberFormat("es-ES").format(o),Y=o=>{if(!o)return"Fecha no disponible";try{return new Date(o).toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return"Fecha inválida"}},Q=o=>({pendiente:"bg-yellow-100 text-yellow-700",en_proceso:"bg-blue-100 text-blue-700",completado:"bg-green-100 text-green-700",cancelado:"bg-red-100 text-red-700"})[o]||"bg-gray-100 text-gray-700",X=o=>({pendiente:"Pendiente",en_proceso:"En Proceso",completado:"Completado",cancelado:"Cancelado"})[o]||"Pendiente";return(o,t)=>{var c,y,f;return d(),i(V,null,[se(ke(_e),{title:"Bitácora de Actividades"}),e("div",et,[e("div",tt,[se(We,{total:ie.value.total,hoy:Z.value,"esta-semana":s.value,"este-mes":u.value,"usuarios-activos":ae.value,usuarios:p.usuarios,"search-term":b.value,"onUpdate:searchTerm":t[0]||(t[0]=a=>b.value=a),"sort-by":g.value,"onUpdate:sortBy":t[1]||(t[1]=a=>g.value=a),"filtro-usuario":D.value,"onUpdate:filtroUsuario":t[2]||(t[2]=a=>D.value=a),"filtro-accion":E.value,"onUpdate:filtroAccion":t[3]||(t[3]=a=>E.value=a),"filtro-fecha":N.value,"onUpdate:filtroFecha":t[4]||(t[4]=a=>N.value=a),onExportar:me,onSearchChange:ue,onFiltroUsuarioChange:re,onFiltroAccionChange:le,onFiltroFechaChange:ne,onSortChange:ce,onLimpiarFiltros:de},null,8,["total","hoy","esta-semana","este-mes","usuarios-activos","usuarios","search-term","sort-by","filtro-usuario","filtro-accion","filtro-fecha"]),e("div",ot,[e("div",st,[e("table",at,[t[15]||(t[15]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Fecha"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Título"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Cliente"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Usuario"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Estado"),e("th",{class:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Acciones")])],-1)),e("tbody",rt,[(d(!0),i(V,null,O(R.value,a=>{var A,B;return d(),i("tr",{key:a.id,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",lt,[e("div",nt,l(Y(a.fecha)),1)]),e("td",it,[e("div",dt,l(a.titulo),1),e("div",ut,l(a.subtitulo),1)]),e("td",ct,[e("div",pt,l(((A=a.raw.cliente)==null?void 0:A.nombre_razon_social)||"N/A"),1)]),e("td",gt,[e("div",vt,l(((B=a.raw.usuario)==null?void 0:B.name)||"N/A"),1)]),e("td",ft,[e("span",{class:I([Q(a.estado),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},l(X(a.estado)),3)]),e("td",mt,[e("div",xt,[e("button",{onClick:F=>pe(a),class:"w-8 h-8 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors duration-150",title:"Ver detalles"},t[11]||(t[11]=[e("svg",{class:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,bt),e("button",{onClick:F=>ge(a.id),class:"w-8 h-8 bg-amber-50 text-amber-600 rounded-lg hover:bg-amber-100 transition-colors duration-150",title:"Editar"},t[12]||(t[12]=[e("svg",{class:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,yt),e("button",{onClick:F=>ve(a.id),class:"w-8 h-8 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors duration-150",title:"Eliminar"},t[13]||(t[13]=[e("svg",{class:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,ht)])])])}),128)),R.value.length===0?(d(),i("tr",wt,t[14]||(t[14]=[e("td",{colspan:"6",class:"px-6 py-16 text-center"},[e("div",{class:"flex flex-col items-center space-y-4"},[e("div",{class:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])]),e("div",{class:"space-y-1"},[e("p",{class:"text-gray-700 font-medium"},"No hay actividades"),e("p",{class:"text-sm text-gray-500"},"Las actividades aparecerán aquí cuando se creen")])])],-1)]))):z("",!0)])])]),v.value.lastPage>1?(d(),i("div",kt,[e("div",_t,[e("div",Ct,[e("p",Mt," Mostrando "+l(v.value.from)+" - "+l(v.value.to)+" de "+l(v.value.total)+" resultados ",1),e("select",{value:v.value.perPage,onChange:t[5]||(t[5]=a=>xe(parseInt(a.target.value))),class:"border border-gray-300 rounded-md text-sm py-1 px-2 bg-white"},t[16]||(t[16]=[e("option",{value:"10"},"10",-1),e("option",{value:"15"},"15",-1),e("option",{value:"25"},"25",-1),e("option",{value:"50"},"50",-1)]),40,At)]),e("nav",St,[v.value.prevPageUrl?(d(),i("button",{key:0,onClick:t[6]||(t[6]=a=>q(v.value.currentPage-1)),class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[17]||(t[17]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):(d(),i("span",jt,t[18]||(t[18]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))),(d(!0),i(V,null,O([v.value.currentPage-1,v.value.currentPage,v.value.currentPage+1].filter(a=>a>0&&a<=v.value.lastPage),a=>(d(),i("button",{key:a,onClick:A=>q(a),class:I([a===v.value.currentPage?"bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},l(a),11,$t))),128)),v.value.nextPageUrl?(d(),i("button",{key:2,onClick:t[7]||(t[7]=a=>q(v.value.currentPage+1)),class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[19]||(t[19]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]))):(d(),i("span",Bt,t[20]||(t[20]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)])))])])])):z("",!0)]),x.value?(d(),i("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t[10]||(t[10]=Ce(a=>x.value=!1,["self"]))},[e("div",Ft,[e("div",Ut,[e("h3",Dt,l(k.value==="details"?"Detalles de la Actividad":"Confirmar Eliminación"),1),e("button",{onClick:t[8]||(t[8]=a=>x.value=!1),class:"text-gray-400 hover:text-gray-600 transition-colors"},t[21]||(t[21]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Et,[k.value==="details"&&n.value?(d(),i("div",Nt,[e("div",zt,[e("div",Pt,[e("div",Lt,[e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Título",-1)),e("p",Vt,l(n.value.titulo),1)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tipo",-1)),e("p",Tt,l(n.value.tipo),1)]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700"},"Fecha",-1)),e("p",qt,l(Y(n.value.fecha)),1)]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),e("span",{class:I([Q(n.value.estado),"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium mt-1"])},l(X(n.value.estado)),3)])]),e("div",Ht,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),e("p",It,l(((c=n.value.cliente)==null?void 0:c.nombre_razon_social)||"N/A"),1)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700"},"Usuario",-1)),e("p",Ot,l(((y=n.value.usuario)==null?void 0:y.name)||"N/A"),1)]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ubicación",-1)),e("p",Zt,l(n.value.ubicacion||"N/A"),1)]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"Costo",-1)),e("p",Rt,"$"+l(be(n.value.costo_mxn||0)),1)])])]),n.value.descripcion?(d(),i("div",Yt,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700"},"Descripción",-1)),e("p",Qt,l(n.value.descripcion),1)])):z("",!0)])])):z("",!0),k.value==="confirm"?(d(),i("div",Xt,[e("div",Gt,[t[33]||(t[33]=e("div",{class:"w-12 h-12 mx-auto bg-red-100 rounded-full flex items-center justify-center mb-4"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t[34]||(t[34]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"¿Eliminar Actividad?",-1)),e("p",Jt,[t[31]||(t[31]=T(" ¿Estás seguro de que deseas eliminar la actividad ")),e("strong",null,l((f=n.value)==null?void 0:f.titulo),1),t[32]||(t[32]=T("? Esta acción no se puede deshacer. "))])]),e("div",Kt,[e("button",{onClick:t[9]||(t[9]=a=>x.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors"}," Cancelar "),e("button",{onClick:fe,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors"}," Eliminar ")])])):z("",!0)])])])):z("",!0)])])],64)}}});export{ao as default};
