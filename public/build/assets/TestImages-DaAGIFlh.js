import{i as l,o as a,f as s,l as c,t as o,F as h,m as u,n as f}from"./vendor-d19pJyVS.js";import{_ as p}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Dq7h7Pqt.js";const v={name:"TestImages",data(){return{serverInfo:{host:window.location.hostname,port:window.location.port,scheme:window.location.protocol.replace(":",""),origin:null},images:[],eventLogs:[]}},computed:{apiListUrl(){return`${window.location.origin}/api/profile-photos`},newImageUrl(){const t=this.images[0];return t?t.url:`${window.location.origin}/profile-photo/nonexistent.png`}},async mounted(){this.logEvent("info","Página cargada, iniciando pruebas..."),await this.loadImages()},methods:{async loadImages(){var t;try{this.logEvent("info","Cargando lista de imágenes...");const g=await(await fetch(this.apiListUrl)).json();this.images=g.images||[],this.serverInfo.origin=(t=g.server_info)==null?void 0:t.origin,this.logEvent("info",`Cargadas ${this.images.length} imágenes`)}catch(e){this.logEvent("error",`Error al cargar imágenes: ${e.message}`)}},handleImageLoad(t){const e=t.target;this.logEvent("info",`Imagen cargada correctamente: ${e.alt}`)},handleImageError(t){const e=t.target;this.logEvent("error",`Error al cargar imagen: ${e.alt}`)},formatFileSize(t){if(t===0)return"0 Bytes";const e=1024,g=["Bytes","KB","MB","GB"],m=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,m)).toFixed(2))+" "+g[m]},logEvent(t,e){this.eventLogs.unshift({time:new Date().toLocaleTimeString(),type:t,message:e}),this.eventLogs.length>20&&(this.eventLogs=this.eventLogs.slice(0,20))}}},x={class:"min-h-screen bg-gray-100 py-12"},b={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},_={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},I={class:"mb-8 p-4 bg-gray-100 rounded"},w={class:"mb-8"},y={class:"text-lg font-semibold mb-4"},L={key:0,class:"text-gray-500"},E={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},k={class:"mb-3"},B=["src","alt"],U={class:"font-medium text-sm"},T={class:"text-xs text-gray-600"},F={class:"text-xs text-gray-600"},N={class:"mb-8 p-4 bg-blue-50 rounded"},S={class:"space-y-2 text-sm"},z=["href"],M=["href"],C={class:"p-4 bg-gray-100 rounded"},D={class:"max-h-32 overflow-y-auto text-sm font-mono"},P={class:"text-gray-600"};function j(t,e,g,m,i,r){return a(),l("div",x,[s("div",b,[s("div",_,[e[10]||(e[10]=s("h1",{class:"text-2xl font-bold mb-6"},"Test de Carga de Imágenes",-1)),s("div",I,[e[5]||(e[5]=s("h2",{class:"text-lg font-semibold mb-2"},"Información del Servidor",-1)),s("p",null,[e[2]||(e[2]=s("strong",null,"Host:",-1)),c(" "+o(i.serverInfo.host)+":"+o(i.serverInfo.port),1)]),s("p",null,[e[3]||(e[3]=s("strong",null,"Origin:",-1)),c(" "+o(i.serverInfo.origin||"No origin"),1)]),s("p",null,[e[4]||(e[4]=s("strong",null,"Scheme:",-1)),c(" "+o(i.serverInfo.scheme),1)])]),s("div",w,[s("h2",y,"Imágenes Disponibles ("+o(i.images.length)+")",1),i.images.length===0?(a(),l("div",L," No hay imágenes disponibles ")):(a(),l("div",E,[(a(!0),l(h,null,u(i.images,n=>(a(),l("div",{key:n.filename,class:"border rounded-lg p-4 bg-gray-50"},[s("div",k,[s("img",{src:n.url,alt:n.filename,class:"w-full h-32 object-cover rounded border",onError:e[0]||(e[0]=(...d)=>r.handleImageError&&r.handleImageError(...d)),onLoad:e[1]||(e[1]=(...d)=>r.handleImageLoad&&r.handleImageLoad(...d))},null,40,B)]),s("h3",U,o(n.filename),1),s("p",T,"Tamaño: "+o(r.formatFileSize(n.size)),1),s("p",F,"Tipo: "+o(n.mime_type),1),s("p",{class:f(["text-xs",n.exists?"text-green-600":"text-red-600"])},o(n.exists?"✅ Existe":"❌ No existe"),3)]))),128))]))]),s("div",N,[e[8]||(e[8]=s("h2",{class:"text-lg font-semibold mb-2"},"URLs de Prueba",-1)),s("div",S,[s("div",null,[e[6]||(e[6]=s("strong",null,"API Lista:",-1)),s("a",{href:r.apiListUrl,target:"_blank",class:"text-blue-600 hover:underline ml-2"},o(r.apiListUrl),9,z)]),s("div",null,[e[7]||(e[7]=s("strong",null,"Imagen Nueva:",-1)),s("a",{href:r.newImageUrl,target:"_blank",class:"text-blue-600 hover:underline ml-2"},o(r.newImageUrl),9,M)])])]),s("div",C,[e[9]||(e[9]=s("h2",{class:"text-lg font-semibold mb-2"},"Logs de Eventos",-1)),s("div",D,[(a(!0),l(h,null,u(i.eventLogs,(n,d)=>(a(),l("div",{key:d,class:"mb-1"},[s("span",P,o(n.time),1),s("span",{class:f(["ml-2",n.type==="error"?"text-red-600":"text-green-600"])},o(n.message),3)]))),128))])])])])])}const H=p(v,[["render",j]]);export{H as default};
