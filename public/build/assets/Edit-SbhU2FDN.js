import{T as F,r as c,c as N,i as n,o as r,g as f,f as e,k as h,u as i,Z as T,t as o,e as V,l as j,A,v as g,z as H,F as _,m as M,E as S,n as U,q as $,x as G,N as E}from"./vendor-d19pJyVS.js";import{A as O}from"./AppLayout-CcnrZQKI.js";import"./utils-Dq7h7Pqt.js";import"./app-BcT2PLJy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"flex items-center justify-between mb-6"},I={class:"text-gray-600 mt-1"},Z={class:"flex gap-3"},J={class:"bg-white rounded-lg shadow-sm border p-6 mb-6"},K={class:"flex items-center justify-between"},P={class:"text-xl font-semibold text-gray-900"},Q={class:"text-gray-600"},W={class:"text-right"},X={class:"text-3xl font-bold text-blue-600"},Y={class:"bg-white rounded-lg shadow-sm border"},ee={class:"p-6 border-b"},se={class:"flex items-center justify-between"},te={class:"flex items-center gap-3"},oe={class:"text-sm text-gray-600"},ae={class:"p-6"},le={key:0,class:"text-center py-8 text-gray-500"},ne={class:"space-y-3 max-h-96 overflow-y-auto"},re=["value"],ie=["src"],de={key:1,class:"w-10 h-10 bg-gray-200 rounded flex items-center justify-center"},ue={class:"flex-1"},ce={class:"font-medium text-gray-900"},ge={class:"text-sm text-gray-600"},be=["onClick"],pe={class:"bg-white rounded-lg shadow-sm border"},me={class:"p-6 border-b"},xe={class:"flex items-center justify-between"},ve={class:"flex items-center gap-3"},ye={class:"text-sm text-gray-600"},fe={class:"p-6"},he={key:0,class:"text-center py-8 text-gray-500"},_e={class:"space-y-3 max-h-96 overflow-y-auto"},we=["value"],ke=["src"],Ce={key:1,class:"w-10 h-10 bg-gray-200 rounded flex items-center justify-center"},Ve={class:"flex-1"},je={class:"font-medium text-gray-900"},Ae={class:"text-sm text-gray-600"},He={class:"lg:col-span-2 bg-white rounded-lg shadow-sm border p-6"},Me={class:"flex items-center justify-between"},Ne={class:"text-sm text-gray-600"},Se={class:"flex gap-3"},Le=["disabled"],Re={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40"},qe={class:"bg-white w-full max-w-md rounded-lg shadow-lg"},Be={class:"p-6"},De={key:0,class:"space-y-4"},Fe={class:"text-lg font-medium"},Te={class:"text-sm text-gray-600"},Ue={class:"text-gray-900"},$e=["value"],Ze=Object.assign({layout:O},{__name:"Edit",props:{tecnico:{type:Object,required:!0},asignadas:{type:Array,default:()=>[]},disponibles:{type:Array,default:()=>[]},tecnicos:{type:Array,default:()=>[]}},setup(L){const l=L,d=F({asignadas:l.asignadas.map(a=>a.id)}),w=c(!1),u=c(null),b=c(""),x=c(""),p=c(""),m=c(""),k=N(()=>p.value?l.asignadas.filter(a=>a.nombre.toLowerCase().includes(p.value.toLowerCase())||a.numero_serie&&a.numero_serie.toLowerCase().includes(p.value.toLowerCase())):l.asignadas),v=N(()=>m.value?l.disponibles.filter(a=>a.nombre.toLowerCase().includes(m.value.toLowerCase())||a.numero_serie&&a.numero_serie.toLowerCase().includes(m.value.toLowerCase())):l.disponibles),R=a=>({disponible:"bg-green-100 text-green-800",asignada:"bg-blue-100 text-blue-800",mantenimiento:"bg-yellow-100 text-yellow-800",baja:"bg-red-100 text-red-800",perdida:"bg-red-100 text-red-800"})[a]||"bg-gray-100 text-gray-800",q=()=>d.put(route("herramientas.gestion.update",l.tecnico.id)),B=a=>{u.value=a,w.value=!0},C=()=>{w.value=!1,u.value=null,b.value="",x.value=""},D=()=>{if(!b.value){alert("Selecciona un técnico");return}E.post("/herramientas/reasignar",{herramienta_id:u.value.id,tecnico_anterior_id:l.tecnico.id,tecnico_nuevo_id:b.value,observaciones:x.value},{preserveScroll:!0,onSuccess:()=>{C(),window.location.reload()}})};return(a,s)=>(r(),n(_,null,[f(i(T),{title:`Gestión de Herramientas - ${l.tecnico.nombre}`},null,8,["title"]),e("div",z,[e("div",null,[s[6]||(s[6]=e("h1",{class:"text-3xl font-bold text-slate-900"},"Gestión de Herramientas",-1)),e("p",I,"Administrar herramientas de "+o(l.tecnico.nombre),1)]),e("div",Z,[f(i(A),{class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",href:a.route("herramientas.gestion.index")},{default:V(()=>s[7]||(s[7]=[j(" ← Volver a Gestión ")])),_:1},8,["href"]),f(i(A),{class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",href:a.route("herramientas.dashboard")},{default:V(()=>s[8]||(s[8]=[j(" Dashboard ")])),_:1},8,["href"])])]),e("div",J,[e("div",K,[e("div",null,[e("h2",P,o(l.tecnico.nombre),1),e("p",Q,o(l.tecnico.telefono||"Sin teléfono"),1)]),e("div",W,[s[9]||(s[9]=e("div",{class:"text-sm text-gray-500"},"Herramientas asignadas",-1)),e("div",X,o(i(d).asignadas.length),1)])])]),e("form",{onSubmit:$(q,["prevent"]),class:"grid lg:grid-cols-2 gap-6"},[e("div",Y,[e("div",ee,[e("div",se,[s[10]||(s[10]=e("h3",{class:"text-lg font-medium text-gray-700"},"Herramientas Asignadas",-1)),e("div",te,[g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t),type:"search",placeholder:"Buscar...",class:"border rounded px-3 py-2 text-sm"},null,512),[[H,p.value]]),e("span",oe,o(k.value.length)+" de "+o(l.asignadas.length),1)])])]),e("div",ae,[k.value.length===0?(r(),n("div",le,s[11]||(s[11]=[e("p",null,"No hay herramientas asignadas que coincidan con la búsqueda",-1)]))):h("",!0),e("div",ne,[(r(!0),n(_,null,M(k.value,t=>(r(),n("label",{key:`a-${t.id}`,class:"flex items-center gap-3 p-3 border rounded-lg hover:bg-gray-50"},[g(e("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":s[1]||(s[1]=y=>i(d).asignadas=y),class:"w-4 h-4 text-blue-600 rounded"},null,8,re),[[S,i(d).asignadas]]),t.foto?(r(),n("img",{key:0,src:`/storage/${t.foto}`,alt:"Foto",class:"w-10 h-10 object-cover rounded"},null,8,ie)):(r(),n("div",de,s[12]||(s[12]=[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)]))),e("div",ue,[e("h4",ce,o(t.nombre),1),e("p",ge,"Serie: "+o(t.numero_serie||"N/A"),1),e("span",{class:U(["text-xs px-2 py-1 rounded-full",R(t.estado)])},o(t.estado),3)]),e("button",{onClick:y=>B(t),class:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700"}," Reasignar ",8,be)]))),128))])])]),e("div",pe,[e("div",me,[e("div",xe,[s[13]||(s[13]=e("h3",{class:"text-lg font-medium text-gray-700"},"Herramientas Disponibles",-1)),e("div",ve,[g(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>m.value=t),type:"search",placeholder:"Buscar...",class:"border rounded px-3 py-2 text-sm"},null,512),[[H,m.value]]),e("span",ye,o(v.value.length)+" disponible"+o(v.value.length!==1?"s":""),1)])])]),e("div",fe,[v.value.length===0?(r(),n("div",he,s[14]||(s[14]=[e("p",null,"No hay herramientas disponibles que coincidan con la búsqueda",-1)]))):h("",!0),e("div",_e,[(r(!0),n(_,null,M(v.value,t=>(r(),n("label",{key:`d-${t.id}`,class:"flex items-center gap-3 p-3 border rounded-lg hover:bg-gray-50"},[g(e("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":s[3]||(s[3]=y=>i(d).asignadas=y),class:"w-4 h-4 text-green-600 rounded"},null,8,we),[[S,i(d).asignadas]]),t.foto?(r(),n("img",{key:0,src:`/storage/${t.foto}`,alt:"Foto",class:"w-10 h-10 object-cover rounded"},null,8,ke)):(r(),n("div",Ce,s[15]||(s[15]=[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)]))),e("div",Ve,[e("h4",je,o(t.nombre),1),e("p",Ae,"Serie: "+o(t.numero_serie||"N/A"),1),s[16]||(s[16]=e("span",{class:"text-xs px-2 py-1 rounded-full bg-green-100 text-green-800"}," Disponible ",-1))])]))),128))])])]),e("div",He,[e("div",Me,[e("div",Ne,o(i(d).asignadas.length)+" herramienta"+o(i(d).asignadas.length!==1?"s":"")+" seleccionada"+o(i(d).asignadas.length!==1?"s":"")+" para asignar ",1),e("div",Se,[f(i(A),{href:a.route("herramientas.gestion.index"),class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700"},{default:V(()=>s[17]||(s[17]=[j(" Cancelar ")])),_:1},8,["href"]),e("button",{disabled:i(d).processing,type:"submit",class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed"},o(i(d).processing?"Guardando...":"Guardar Cambios"),9,Le)])])])],32),w.value?(r(),n("div",Re,[e("div",qe,[e("div",{class:"flex items-center justify-between px-6 py-4 border-b"},[s[18]||(s[18]=e("h2",{class:"text-lg font-semibold"},"Reasignar Herramienta",-1)),e("button",{onClick:C,class:"text-gray-500 hover:text-gray-700"},"✕")]),e("div",Be,[u.value?(r(),n("div",De,[e("div",null,[s[19]||(s[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Herramienta",-1)),e("p",Fe,o(u.value.nombre),1),e("p",Te,"Serie: "+o(u.value.numero_serie||"N/A"),1)]),e("div",null,[s[20]||(s[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Técnico Actual",-1)),e("p",Ue,o(l.tecnico.nombre),1)]),e("div",null,[s[22]||(s[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nuevo Técnico",-1)),g(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>b.value=t),class:"w-full border rounded px-3 py-2",required:""},[s[21]||(s[21]=e("option",{value:""},"Seleccionar técnico",-1)),(r(!0),n(_,null,M(l.tecnicos,t=>(r(),n("option",{key:t.id,value:t.id},o(t.nombre)+" "+o(t.id===l.tecnico.id?"(Actual)":""),9,$e))),128))],512),[[G,b.value]])]),e("div",null,[s[23]||(s[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Observaciones",-1)),g(e("textarea",{"onUpdate:modelValue":s[5]||(s[5]=t=>x.value=t),rows:"3",placeholder:"Opcional: agregar observaciones sobre la reasignación...",class:"w-full border rounded px-3 py-2"},null,512),[[H,x.value]])]),e("div",{class:"flex gap-3 pt-4"},[e("button",{onClick:C,class:"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700"}," Cancelar "),e("button",{onClick:D,class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," Reasignar ")])])):h("",!0)])])])):h("",!0)],64))}});export{Ze as default};
