import{r as h,c as D,p as z,H as A,i as d,o as a,f as e,k as y,b as H,v as I,z as P,n as _,t as i,l as v,F as $,m as M,J as S,M as X}from"./vendor-d19pJyVS.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"buscar-equipo"},O={class:"mb-6"},q={class:"relative"},U={class:"flex flex-wrap gap-2 mt-3"},J={key:0,class:"mt-6"},W={class:"flex flex-wrap gap-2"},Y={key:1,class:"mt-6"},G={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"},K=["onClick"],Q={class:"flex items-center justify-between"},Z={class:"flex-1"},ee={class:"flex items-center"},te={class:"text-sm font-medium text-gray-900"},se={class:"text-xs text-gray-500 mt-1"},oe={class:"text-right"},re={class:"text-sm font-semibold text-green-600"},ne={class:"text-xs text-gray-500"},ie={class:"grid grid-cols-12 gap-2 items-center"},le={class:"col-span-3"},ae={class:"font-medium text-gray-900 text-sm"},de={key:0,class:"text-xs text-gray-500 truncate"},ce={class:"col-span-2"},ue={class:"text-sm text-gray-600 font-mono"},me={class:"col-span-2"},ge={class:"text-sm text-gray-600"},pe={class:"col-span-2"},xe={class:"text-sm font-semibold text-green-600"},ve={class:"col-span-1"},be={class:"col-span-1"},fe=["onClick","disabled"],Ge={__name:"BuscarEquipo",props:{equipos:{type:Array,default:()=>[]}},emits:["agregar-producto"],setup(m,{expose:C,emit:k}){const w=m,g=k,u=h(""),p=h(!1),b=h("todos"),x=h([]),f=h(null),l=h(0),t=h({top:0,left:0,height:0});C({focus:()=>{f.value&&f.value.focus()}});const r=D(()=>{let n=w.equipos||[];if(b.value==="disponibles"&&(n=n.filter(o=>o.estado==="disponible")),u.value){const o=u.value.toLowerCase();n=n.filter(s=>s.nombre.toLowerCase().includes(o)||s.codigo&&s.codigo.toLowerCase().includes(o)||s.marca&&s.marca.toLowerCase().includes(o)||s.modelo&&s.modelo.toLowerCase().includes(o)||s.descripcion&&s.descripcion.toLowerCase().includes(o))}return n.slice(0,50)}),c=D(()=>(w.equipos||[]).filter(n=>n.estado==="disponible").length),V=D(()=>(w.equipos||[]).filter(n=>n.estado==="disponible").sort((n,o)=>(n.precio_renta_mensual||0)-(o.precio_renta_mensual||0)).slice(0,6)),N=()=>{p.value=!0,E()},F=n=>{if(n.estado!=="disponible")return;const o={...n};x.value.findIndex(B=>B.id===n.id)===-1&&(x.value.unshift(o),x.value.length>5&&x.value.pop()),g("agregar-producto",{...n,tipo:"equipo"}),u.value="",p.value=!1},L=n=>(Number.parseFloat(n)||0).toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2}),E=()=>{if(!f.value)return;const n=f.value.getBoundingClientRect();l.value=n.width,t.value={top:n.top+window.scrollY,left:n.left+window.scrollX,height:n.height}},j=n=>{n.target.closest(".buscar-equipo")||(p.value=!1)};return z(()=>{document.addEventListener("click",j)}),A(()=>{document.removeEventListener("click",j)}),(n,o)=>(a(),d("div",T,[e("div",O,[o[5]||(o[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Buscar Equipos Disponibles ",-1)),e("div",q,[I(e("input",{ref_key:"inputBusqueda",ref:f,type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>u.value=s),onInput:N,onFocus:o[1]||(o[1]=s=>p.value=!0),placeholder:"Buscar por nombre, código, marca, modelo...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"},null,544),[[P,u.value]]),o[4]||(o[4]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),e("div",U,[e("button",{type:"button",onClick:o[2]||(o[2]=s=>b.value="todos"),class:_(["px-3 py-1 text-xs font-medium rounded-full transition-colors duration-200",b.value==="todos"?"bg-green-100 text-green-800 border-green-300":"bg-gray-100 text-gray-600 hover:bg-gray-200 border-gray-300"])}," Todos ("+i(r.value.length)+") ",3),e("button",{type:"button",onClick:o[3]||(o[3]=s=>b.value="disponibles"),class:_(["px-3 py-1 text-xs font-medium rounded-full transition-colors duration-200",b.value==="disponibles"?"bg-blue-100 text-blue-800 border-blue-300":"bg-gray-100 text-gray-600 hover:bg-gray-200 border-gray-300"])}," Disponibles ("+i(c.value)+") ",3)])]),x.value.length>0?(a(),d("div",J,[o[7]||(o[7]=e("h3",{class:"text-sm font-medium text-gray-700 mb-3 flex items-center"},[e("svg",{class:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),v(" Agregados recientemente ")],-1)),e("div",W,[(a(!0),d($,null,M(x.value,s=>(a(),d("span",{key:`reciente-${s.id}`,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},[v(i(s.nombre)+" ",1),o[6]||(o[6]=e("svg",{class:"w-3 h-3 ml-1 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1))]))),128))])])):y("",!0),!u.value&&V.value.length>0?(a(),d("div",Y,[o[9]||(o[9]=e("h3",{class:"text-sm font-medium text-gray-700 mb-3 flex items-center"},[e("svg",{class:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),v(" Sugerencias rápidas ")],-1)),e("div",G,[(a(!0),d($,null,M(V.value,s=>(a(),d("div",{key:`sugerencia-${s.id}`,onClick:B=>F(s),class:"p-3 border border-gray-200 rounded-lg hover:border-green-300 hover:bg-green-50 cursor-pointer transition-all duration-200"},[e("div",Q,[e("div",Z,[e("div",ee,[o[8]||(o[8]=e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mr-2 bg-blue-100 text-blue-800"}," E ",-1)),e("span",te,i(s.nombre),1)]),e("div",se,i(s.marca)+" "+i(s.modelo),1)]),e("div",oe,[e("div",re," $"+i(L(s.precio_renta_mensual))+"/mes ",1),e("div",ne," Código: "+i(s.codigo),1)])])],8,K))),128))])])):y("",!0),(a(),H(X,{to:"#app"},[p.value&&r.value.length>0?(a(),d("div",{key:0,class:"z-50 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-80 overflow-y-auto",style:S({position:"absolute",width:l.value+"px",top:t.value.top+t.value.height+"px",left:t.value.left+"px"})},[o[12]||(o[12]=e("div",{class:"sticky top-0 bg-gray-50 border-b border-gray-200 px-4 py-2"},[e("div",{class:"grid grid-cols-12 gap-2 text-xs font-medium text-gray-600"},[e("div",{class:"col-span-1"},"Tipo"),e("div",{class:"col-span-3"},"Nombre"),e("div",{class:"col-span-2"},"Código"),e("div",{class:"col-span-2"},"Marca/Modelo"),e("div",{class:"col-span-2"},"Precio Mensual"),e("div",{class:"col-span-1"},"Estado"),e("div",{class:"col-span-1"},"Acción")])],-1)),(a(!0),d($,null,M(r.value,s=>(a(),d("div",{key:s.id,class:"px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0"},[e("div",ie,[o[11]||(o[11]=e("div",{class:"col-span-1"},[e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},[e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})]),v(" E ")])],-1)),e("div",le,[e("div",ae,i(s.nombre),1),s.descripcion?(a(),d("div",de,i(s.descripcion),1)):y("",!0)]),e("div",ce,[e("span",ue,i(s.codigo||"N/A"),1)]),e("div",me,[e("span",ge,i(s.marca)+" "+i(s.modelo),1)]),e("div",pe,[e("span",xe," $"+i(L(s.precio_renta_mensual)),1)]),e("div",ve,[e("span",{class:_(["text-xs px-2 py-1 rounded-full font-medium",s.estado==="disponible"?"bg-green-100 text-green-800":s.estado==="rentado"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},i(s.estado==="disponible"?"Disp.":s.estado==="rentado"?"Rent.":"Maint."),3)]),e("div",be,[e("button",{type:"button",onClick:B=>F(s),disabled:s.estado!=="disponible",class:_(["w-full px-2 py-1 text-xs font-medium rounded-md transition-colors duration-200",s.estado!=="disponible"?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1"])},o[10]||(o[10]=[e("svg",{class:"w-3 h-3 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]),10,fe)])])]))),128))],4)):y("",!0),u.value&&r.value.length===0?(a(),d("div",{key:1,class:"px-4 py-8 text-center text-gray-500 z-50 bg-white border border-gray-300 rounded-lg shadow-lg",style:S({position:"absolute",width:l.value+"px",top:t.value.top+t.value.height+"px",left:t.value.left+"px"})},o[13]||(o[13]=[e("svg",{class:"w-12 h-12 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"text-sm font-medium"},"No se encontraron resultados",-1),e("p",{class:"text-xs text-gray-400 mt-1"},"Intenta con otros términos de búsqueda",-1)]),4)):y("",!0)]))]))}},he={class:"equipos-seleccionados"},ye={key:0,class:"mt-6"},ke={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},we={class:"ml-2 bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full"},_e={class:"space-y-4"},$e={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},Me={class:"flex-1 min-w-0"},Ce={class:"flex items-start justify-between"},Be={class:"flex-1"},De={class:"text-lg font-semibold text-gray-900 mb-1"},Ve={key:0,class:"text-sm text-gray-600 mb-2"},Fe={class:"space-y-1"},Le={class:"flex items-center text-sm text-gray-500"},je={class:"flex items-center text-sm text-gray-500"},Se=["onClick"],Ne={class:"grid grid-cols-1 sm:grid-cols-4 gap-4 lg:w-96"},Ee={class:"relative"},ze=["value","onInput"],Ae={class:"relative"},He=["value"],Ie={class:"px-3 py-2 text-sm font-semibold text-green-600 bg-green-50 border border-green-200 rounded-lg"},Pe={key:0,class:"mt-4 pt-4 border-t border-gray-200"},Xe={class:"grid grid-cols-2 gap-4 text-sm"},Re={class:"text-gray-600"},Te={class:"float-right"},Oe={class:"text-orange-600"},qe={class:"float-right"},Ue={key:1,class:"mt-6 p-8 border-2 border-dashed border-gray-300 rounded-xl text-center"},Je={__name:"EquiposSeleccionados",props:{selectedProducts:{type:Array,required:!0},equipos:{type:Array,default:()=>[]},quantities:{type:Object,required:!0},prices:{type:Object,required:!0},discounts:{type:Object,required:!0}},emits:["eliminar-producto","update-quantity","update-discount","calcular-total"],setup(m,{emit:C}){const k=m,w=C,g=l=>{const r=k.equipos.find(c=>c.id===l.id);return r?{nombre:r.nombre,descripcion:r.descripcion||"",precio:r.precio_renta_mensual||0,codigo:r.codigo||"N/A",numero_serie:r.numero_serie||"N/A"}:{nombre:"Equipo no encontrado",descripcion:"",precio:0,codigo:"N/A",numero_serie:"N/A"}},u=l=>{const t=`${l.tipo}-${l.id}`,r=Number.parseFloat(k.quantities[t])||1,c=Number.parseFloat(k.prices[t])||0;return r*c},p=l=>{const t=`${l.tipo}-${l.id}`,r=u(l),c=Number.parseFloat(k.discounts[t])||0;return r*(c/100)},b=l=>{const t=u(l),r=p(l);return t-r},x=l=>{w("eliminar-producto",l)},f=(l,t)=>{const r=`${l.tipo}-${l.id}`,c=Math.min(100,Math.max(0,Number.parseFloat(t)||0));w("update-discount",r,c)};return(l,t)=>(a(),d("div",he,[m.selectedProducts.length>0?(a(),d("div",ye,[e("h3",ke,[t[0]||(t[0]=e("svg",{class:"w-5 h-5 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)),t[1]||(t[1]=v(" Equipos Seleccionados ")),e("span",we,i(m.selectedProducts.length),1)]),e("div",_e,[(a(!0),d($,null,M(m.selectedProducts,r=>(a(),d("div",{key:`${r.tipo}-${r.id}`,class:"bg-gradient-to-r from-gray-50 to-white border border-gray-200 rounded-xl p-6 hover:shadow-md transition-all duration-200"},[e("div",$e,[e("div",Me,[e("div",Ce,[e("div",Be,[t[4]||(t[4]=e("div",{class:"flex items-center mb-2"},[e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mr-3 bg-blue-100 text-blue-800"},[e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})]),v(" Equipo ")])],-1)),e("h4",De,i(g(r).nombre),1),g(r).descripcion?(a(),d("p",Ve,i(g(r).descripcion),1)):y("",!0),e("div",Fe,[e("div",Le,[t[2]||(t[2]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),v(" Precio mensual: $"+i(g(r).precio.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),e("div",je,[t[3]||(t[3]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),v(" Código: "+i(g(r).codigo)+" | Serie: "+i(g(r).numero_serie),1)])])]),e("button",{type:"button",onClick:c=>x(r),class:"text-red-500 hover:text-red-700 hover:bg-red-100 p-2 rounded-full transition-colors duration-200 flex-shrink-0",title:"Eliminar equipo"},t[5]||(t[5]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Se)])]),e("div",Ne,[t[11]||(t[11]=e("div",null,[e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Cantidad"),e("div",{class:"relative"},[e("input",{type:"number",value:"1",readonly:"",class:"w-full px-3 py-2 text-sm bg-gray-100 border border-gray-300 rounded-lg text-gray-600 cursor-not-allowed"})])],-1)),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Descuento %",-1)),e("div",Ee,[e("input",{type:"number",value:m.discounts[`${r.tipo}-${r.id}`]||0,onInput:c=>f(r,c.target.value),min:"0",max:"100",step:"0.01",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},null,40,ze),t[6]||(t[6]=e("div",{class:"absolute inset-y-0 right-0 pr-2 flex items-center pointer-events-none"},[e("span",{class:"text-gray-400 text-xs"},"%")],-1))])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Precio Mensual",-1)),e("div",Ae,[e("input",{type:"text",value:"$"+(m.prices[`${r.tipo}-${r.id}`]||0).toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2}),readonly:"",class:"w-full px-3 py-2 text-sm bg-gray-100 border border-gray-300 rounded-lg text-gray-600 cursor-not-allowed"},null,8,He),t[8]||(t[8]=e("div",{class:"absolute inset-y-0 right-0 pr-2 flex items-center pointer-events-none"},[e("svg",{class:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1))])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Subtotal Mensual",-1)),e("div",Ie," $"+i(b(r).toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})),1)])])]),(m.discounts[`${r.tipo}-${r.id}`]||0)>0?(a(),d("div",Pe,[e("div",Xe,[e("div",Re,[t[12]||(t[12]=e("span",{class:"font-medium"},"Subtotal sin descuento:",-1)),e("span",Te,"$"+i(u(r).toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),e("div",Oe,[t[13]||(t[13]=e("span",{class:"font-medium"},"Descuento aplicado:",-1)),e("span",qe,"-$"+i(p(r).toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})),1)])])])):y("",!0)]))),128))])])):(a(),d("div",Ue,t[14]||(t[14]=[e("svg",{class:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),e("p",{class:"text-gray-500 text-lg font-medium"},"No hay equipos seleccionados",-1),e("p",{class:"text-gray-400 text-sm mt-1"},"Busca y agrega equipos para comenzar con la renta",-1)])))]))}},Ke=R(Je,[["__scopeId","data-v-2d93d35d"]]);export{Ke as E,Ge as _};
