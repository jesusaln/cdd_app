import{Q as ce,p as K,r as u,c as ue,w as ge,O as pe,i as r,o as n,g as L,f as e,u as U,Z as me,k as g,e as X,l as x,A as xe,t as a,v as G,x as Q,F,m as V,s as Z,n as N,q as J,P as ve,I as fe,N as k}from"./vendor-d19pJyVS.js";import{A as be}from"./AppLayout-CcnrZQKI.js";import{N as ye}from"./app-BcT2PLJy.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Dq7h7Pqt.js";const _e={class:"pagos-index min-h-screen bg-gray-50"},we={class:"max-w-8xl mx-auto px-6 py-8"},ke={class:"mb-8"},Pe={class:"flex items-center justify-between"},je={class:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-8"},Ce={class:"bg-white rounded-lg p-4 border border-gray-200"},Me={class:"flex items-center justify-between"},Ee={class:"text-2xl font-bold text-gray-900"},Fe={class:"bg-white rounded-lg p-4 border border-gray-200"},Ne={class:"flex items-center justify-between"},ze={class:"text-2xl font-bold text-yellow-600"},Be={class:"bg-white rounded-lg p-4 border border-gray-200"},De={class:"flex items-center justify-between"},$e={class:"text-2xl font-bold text-green-600"},Le={class:"bg-white rounded-lg p-4 border border-gray-200"},Ve={class:"flex items-center justify-between"},Ae={class:"text-2xl font-bold text-red-600"},Ie={class:"bg-white rounded-lg p-4 border border-gray-200"},Se={class:"flex items-center justify-between"},Te={class:"text-lg font-bold text-orange-600"},Oe={class:"bg-white rounded-lg p-4 border border-gray-200"},He={class:"flex items-center justify-between"},qe={class:"text-lg font-bold text-green-600"},Re={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-6"},Ke={class:"px-6 py-4 bg-gray-50/50 border-b border-gray-200/60"},Ue={class:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0"},Xe={class:"flex items-center space-x-3"},Ge=["value"],Qe={class:"flex justify-between items-center mb-4 text-sm text-gray-600"},Ze={class:"flex items-center space-x-2"},Je=["value"],We={class:"mt-6"},Ye={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},et={class:"bg-gradient-to-r from-gray-50 to-gray-100/50 px-6 py-4 border-b border-gray-200/60"},tt={class:"flex items-center justify-between"},st={class:"text-sm text-gray-600 bg-white/70 px-3 py-1 rounded-full border border-gray-200/50"},ot={class:"overflow-x-auto"},at={class:"min-w-full divide-y divide-gray-200/60"},rt={class:"bg-white divide-y divide-gray-200/40"},nt={class:"px-6 py-4"},lt={class:"flex flex-col space-y-0.5"},it={class:"text-sm font-medium text-gray-900"},dt={class:"text-xs text-gray-500"},ct={class:"px-6 py-4"},ut={class:"flex flex-col space-y-0.5"},gt={class:"text-sm font-medium text-gray-900 group-hover:text-gray-800"},pt={class:"text-xs text-gray-500"},mt={class:"px-6 py-4"},xt={class:"text-sm font-medium text-gray-900"},vt={class:"px-6 py-4"},ft={key:0,class:"text-sm font-medium text-green-600"},bt={key:1,class:"text-sm text-gray-500"},yt={class:"px-6 py-4"},ht={class:"px-6 py-4"},_t={key:0,class:"text-sm text-red-600 font-medium"},wt={key:1,class:"text-sm text-gray-500"},kt={class:"px-6 py-4"},Pt={class:"flex items-center justify-end space-x-2"},jt=["onClick"],Ct=["onClick"],Mt=["onClick"],Et={key:1},Ft={key:0,class:"flex justify-center items-center space-x-2 mt-6"},Nt=["disabled"],zt={class:"flex space-x-1"},Bt=["onClick"],Dt=["disabled"],$t=["onKeydown"],Lt={key:0,class:"text-center"},Vt={key:1,class:"space-y-4"},At={class:"text-lg font-medium mb-1 flex items-center gap-2"},It={key:0,class:"text-sm text-gray-500"},St={key:0,class:"space-y-4"},Tt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ot={class:"text-sm text-gray-600"},Ht={class:"text-sm text-gray-600"},qt={class:"text-sm text-gray-600"},Rt={class:"text-sm text-gray-600"},Kt={class:"text-sm text-gray-600"},Ut={key:0,class:"text-sm text-gray-600"},Xt={class:"text-sm text-gray-600"},Gt={class:"bg-gray-50 rounded-lg p-4"},Qt={class:"grid grid-cols-2 gap-4 text-sm"},Zt={class:"text-lg font-semibold text-gray-900"},Jt={class:"text-lg font-semibold text-green-600"},Wt={key:0},Yt={class:"text-lg font-semibold text-red-600"},es={class:"flex flex-wrap justify-end gap-2 mt-6"},ts={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ss=Object.assign({layout:be},{__name:"Index",props:{pagos:{type:Object,default:()=>({data:[]})},estadisticas:{type:Object,default:()=>({total_pagos:0,pagos_pendientes:0,pagos_pagados:0,pagos_atrasados:0,monto_pendiente:0,monto_pagado_hoy:0})},prestamos:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},sorting:{type:Object,default:()=>({sort_by:"fecha_programada",sort_direction:"asc"})},pagination:{type:Object,default:()=>({})}},setup(v){const d=v,p=new ye({duration:4e3,position:{x:"right",y:"top"},types:[{type:"success",background:"#10b981",icon:!1},{type:"error",background:"#ef4444",icon:!1},{type:"warning",background:"#f59e0b",icon:!1}]}),W=ce();K(()=>{const s=W.props.flash;s!=null&&s.success&&p.success(s.success),s!=null&&s.error&&p.error(s.error)});const b=u(!1),z=u("details"),l=u(null),P=u(null),j=u(!1),C=u(""),y=u("fecha_programada-asc"),_=u(""),w=u(""),i=ue(()=>{var s,t,c,o,m,f;return{current_page:((s=d.pagination)==null?void 0:s.current_page)||1,last_page:((t=d.pagination)==null?void 0:t.last_page)||1,per_page:((c=d.pagination)==null?void 0:c.per_page)||15,from:((o=d.pagination)==null?void 0:o.from)||0,to:((m=d.pagination)==null?void 0:m.to)||0,total:((f=d.pagination)==null?void 0:f.total)||0}}),B=s=>{const t={page:s,search:C.value,estado:_.value,prestamo_id:w.value,sort_by:y.value.split("-")[0],sort_direction:y.value.split("-")[1]||"asc"};k.visit("/pagos",{data:t})},Y=()=>{var c,o;const s=((c=d.pagination)==null?void 0:c.current_page)||1,t=((o=d.pagination)==null?void 0:o.last_page)||1;s<t&&B(s+1)},ee=()=>{var t;const s=((t=d.pagination)==null?void 0:t.current_page)||1;s>1&&B(s-1)},te=()=>{C.value="",y.value="fecha_programada-asc",_.value="",w.value="",k.visit("/pagos"),p.success("Filtros limpiados correctamente")},se=s=>{const c={per_page:s.target.value,search:C.value,estado:_.value,prestamo_id:w.value,sort_by:y.value.split("-")[0],sort_direction:y.value.split("-")[1]||"asc"};k.visit("/pagos",{data:c})},A=()=>{const s={search:C.value,estado:_.value,prestamo_id:w.value,sort_by:y.value.split("-")[0],sort_direction:y.value.split("-")[1]||"asc"};k.visit("/pagos",{data:s})};function oe(s){if(!(s!=null&&s.id))throw new Error("ID de pago no válido");return!0}const ae=s=>{try{oe(s),l.value=s,z.value="details",b.value=!0}catch(t){p.error(t.message)}},I=s=>{try{const t=s==null?void 0:s.id;if(!t)throw new Error("ID de pago no válido");k.visit(`/pagos/create?prestamo_id=${s.prestamo_id}&pago_id=${t}`)}catch(t){p.error(t.message)}},re=async()=>{try{if(!P.value)throw new Error("No se seleccionó ningún pago");j.value=!0,k.delete(`/pagos/${P.value}`,{onStart:()=>{p.success("Eliminando pago...")},onSuccess:s=>{p.success("Pago eliminado exitosamente"),b.value=!1,P.value=null},onError:s=>{console.error("Error al eliminar:",s),p.error("Error al eliminar el pago")},onFinish:()=>{j.value=!1}})}catch(s){p.error(s.message),j.value=!1}},D={pendiente:{label:"Pendiente",classes:"bg-yellow-100 text-yellow-700",color:"bg-yellow-400"},pagado:{label:"Pagado",classes:"bg-green-100 text-green-700",color:"bg-green-400"},atrasado:{label:"Atrasado",classes:"bg-red-100 text-red-700",color:"bg-red-400"},parcial:{label:"Pago Parcial",classes:"bg-orange-100 text-orange-700",color:"bg-orange-400"}},S=s=>{var t;return((t=D[s])==null?void 0:t.classes)||"bg-gray-100 text-gray-700"},ne=s=>{var t;return((t=D[s])==null?void 0:t.color)||"bg-gray-400"},T=s=>{var t;return((t=D[s])==null?void 0:t.label)||"Pendiente"},h=s=>{const t=parseFloat(s),c=Number.isFinite(t)?t:0;return new Intl.NumberFormat("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2}).format(c)},M=s=>{if(!s)return"Fecha no disponible";try{const t=new Date(s).getTime();return Number.isNaN(t)?"Fecha inválida":new Date(t).toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return"Fecha inválida"}},O=u(null),le=()=>{var s;try{(s=O.value)==null||s.focus()}catch{}};ge(()=>b,s=>{s&&setTimeout(le,0)});const H=s=>{s.key==="Escape"&&b.value&&E()};K(()=>window.addEventListener("keydown",H)),pe(()=>window.removeEventListener("keydown",H));const ie=()=>{b.value=!1,l.value=null,P.value=null},de=()=>{re()},E=()=>{b.value=!1,l.value=null,P.value=null};return(s,t)=>{var c;return n(),r(F,null,[L(U(me),{title:"Pagos de Préstamos"}),e("div",_e,[e("div",we,[e("div",ke,[e("div",Pe,[t[4]||(t[4]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 tracking-tight"},"Pagos de Préstamos"),e("p",{class:"text-gray-600 mt-2"},"Gestiona y registra los pagos de préstamos de tus clientes")],-1)),L(U(xe),{href:"/prestamos",class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200"},{default:X(()=>t[3]||(t[3]=[x(" ← Volver a Préstamos ")])),_:1})])]),e("div",je,[e("div",Ce,[e("div",Me,[e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Pagos",-1)),e("p",Ee,a(v.estadisticas.total_pagos),1)]),t[6]||(t[6]=e("div",{class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))])]),e("div",Fe,[e("div",Ne,[e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-gray-600"},"Pendientes",-1)),e("p",ze,a(v.estadisticas.pagos_pendientes),1)]),t[8]||(t[8]=e("div",{class:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),e("div",Be,[e("div",De,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-600"},"Pagados",-1)),e("p",$e,a(v.estadisticas.pagos_pagados),1)]),t[10]||(t[10]=e("div",{class:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),e("div",Le,[e("div",Ve,[e("div",null,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-gray-600"},"Atrasados",-1)),e("p",Ae,a(v.estadisticas.pagos_atrasados),1)]),t[12]||(t[12]=e("div",{class:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1))])]),e("div",Ie,[e("div",Se,[e("div",null,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-gray-600"},"Monto Pendiente",-1)),e("p",Te,"$"+a(h(v.estadisticas.monto_pendiente)),1)]),t[14]||(t[14]=e("div",{class:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1))])]),e("div",Oe,[e("div",He,[e("div",null,[t[15]||(t[15]=e("p",{class:"text-sm font-medium text-gray-600"},"Pagado Hoy",-1)),e("p",qe,"$"+a(h(v.estadisticas.monto_pagado_hoy)),1)]),t[16]||(t[16]=e("div",{class:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1))])])]),e("div",Re,[e("div",Ke,[e("div",Ue,[e("div",Xe,[G(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>w.value=o),onChange:A,class:"block w-64 pl-3 pr-10 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 bg-white"},[t[17]||(t[17]=e("option",{value:""},"Todos los préstamos",-1)),(n(!0),r(F,null,V(v.prestamos,o=>(n(),r("option",{key:o.id,value:o.id},a(o.cliente_nombre)+" - $"+a(h(o.monto_prestado)),9,Ge))),128))],544),[[Q,w.value]]),G(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>_.value=o),onChange:A,class:"block w-48 pl-3 pr-10 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 bg-white"},t[18]||(t[18]=[Z('<option value="" data-v-b1c2d154>Todos los estados</option><option value="pendiente" data-v-b1c2d154>Pendientes</option><option value="pagado" data-v-b1c2d154>Pagados</option><option value="atrasado" data-v-b1c2d154>Atrasados</option><option value="parcial" data-v-b1c2d154>Parciales</option>',5)]),544),[[Q,_.value]]),e("button",{onClick:te,class:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200"}," ❌ Limpiar ")])])])]),e("div",Qe,[e("div",null," Mostrando "+a(i.value.from)+" - "+a(i.value.to)+" de "+a(i.value.total)+" pagos ",1),e("div",Ze,[t[20]||(t[20]=e("span",null,"Elementos por página:",-1)),e("select",{value:i.value.per_page,onChange:se,class:"border border-gray-300 rounded px-2 py-1 text-sm"},t[19]||(t[19]=[Z('<option value="10" data-v-b1c2d154>10</option><option value="15" data-v-b1c2d154>15</option><option value="25" data-v-b1c2d154>25</option><option value="50" data-v-b1c2d154>50</option><option value="100" data-v-b1c2d154>100</option>',5)]),40,Je)])]),e("div",We,[e("div",Ye,[e("div",et,[e("div",tt,[t[21]||(t[21]=e("h2",{class:"text-lg font-semibold text-gray-900 tracking-tight"},"Pagos de Préstamos",-1)),e("div",st,a(((c=d.pagos.data)==null?void 0:c.length)||0)+" de "+a(i.value.total)+" pagos ",1)])]),e("div",ot,[e("table",at,[t[26]||(t[26]=e("thead",{class:"bg-gray-50/60"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Fecha Programada"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Cliente"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Monto Programado"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Monto Pagado"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Estado"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Días Atraso"),e("th",{class:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Acciones")])],-1)),e("tbody",rt,[d.pagos.data&&d.pagos.data.length>0?(n(!0),r(F,{key:0},V(d.pagos.data,o=>{var m,f,$,q;return n(),r("tr",{key:o.id,class:"group hover:bg-gray-50/60 transition-all duration-150 hover:shadow-sm"},[e("td",nt,[e("div",lt,[e("div",it,a(M(o.fecha_programada)),1),e("div",dt," Pago #"+a(o.numero_pago),1)])]),e("td",ct,[e("div",ut,[e("div",gt,a(((f=(m=o.prestamo)==null?void 0:m.cliente)==null?void 0:f.nombre_razon_social)||"Sin cliente"),1),e("div",pt,a(((q=($=o.prestamo)==null?void 0:$.cliente)==null?void 0:q.rfc)||""),1)])]),e("td",mt,[e("div",xt," $"+a(h(o.monto_programado)),1)]),e("td",vt,[o.monto_pagado>0?(n(),r("div",ft," $"+a(h(o.monto_pagado)),1)):(n(),r("div",bt," No pagado "))]),e("td",yt,[e("span",{class:N([S(o.estado),"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-150 hover:shadow-sm"])},[e("span",{class:N(["w-2 h-2 rounded-full mr-2 transition-all duration-150",ne(o.estado)])},null,2),x(" "+a(T(o.estado)),1)],2)]),e("td",ht,[o.dias_atraso>0?(n(),r("div",_t,a(o.dias_atraso)+" días ",1)):(n(),r("div",wt," A tiempo "))]),e("td",kt,[e("div",Pt,[e("button",{onClick:R=>ae(o),class:"group/btn relative inline-flex items-center justify-center w-8 h-8 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100 hover:text-blue-700 hover:shadow-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-1",title:"Ver detalles"},t[22]||(t[22]=[e("svg",{class:"w-4 h-4 transition-transform duration-200 group-hover/btn:scale-110",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,jt),o.estado==="pendiente"||o.estado==="parcial"?(n(),r("button",{key:0,onClick:R=>I(o),class:"group/btn relative inline-flex items-center justify-center w-8 h-8 rounded-lg bg-green-50 text-green-600 hover:bg-green-100 hover:text-green-700 hover:shadow-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-500/50 focus:ring-offset-1",title:"Registrar pago"},t[23]||(t[23]=[e("svg",{class:"w-4 h-4 transition-transform duration-200 group-hover/btn:scale-110",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]),8,Ct)):g("",!0),o.estado==="pagado"?(n(),r("button",{key:1,onClick:R=>s.editarPago(o.id),class:"group/btn relative inline-flex items-center justify-center w-8 h-8 rounded-lg bg-amber-50 text-amber-600 hover:bg-amber-100 hover:text-amber-700 hover:shadow-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:ring-offset-1",title:"Editar pago"},t[24]||(t[24]=[e("svg",{class:"w-4 h-4 transition-transform duration-200 group-hover/btn:scale-110",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Mt)):g("",!0)])])])}),128)):(n(),r("tr",Et,t[25]||(t[25]=[e("td",{colspan:7,class:"px-6 py-16 text-center"},[e("div",{class:"flex flex-col items-center space-y-4"},[e("div",{class:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})])]),e("div",{class:"space-y-1"},[e("p",{class:"text-gray-700 font-medium"},"No hay pagos"),e("p",{class:"text-sm text-gray-500"},"Los pagos de préstamos aparecerán aquí cuando se creen")])])],-1)])))])])])])]),i.value.last_page>1?(n(),r("div",Ft,[e("button",{onClick:ee,disabled:i.value.current_page===1,class:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Anterior ",8,Nt),e("div",zt,[(n(!0),r(F,null,V([i.value.current_page-1,i.value.current_page,i.value.current_page+1].filter(o=>o>0&&o<=i.value.last_page),o=>(n(),r("button",{key:o,onClick:m=>B(o),class:N(["px-3 py-2 text-sm font-medium border border-gray-300 rounded-md",o===i.value.current_page?"bg-blue-500 text-white border-blue-500":"text-gray-700 bg-white hover:bg-gray-50"])},a(o),11,Bt))),128))]),e("button",{onClick:Y,disabled:i.value.current_page===i.value.last_page,class:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Siguiente ",8,Dt)])):g("",!0)]),L(fe,{name:"modal"},{default:X(()=>{var o,m,f;return[b.value?(n(),r("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:J(E,["self"])},[e("div",{class:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto p-6 outline-none",role:"dialog","aria-modal":"true","aria-label":"Modal de Pago",tabindex:"-1",ref_key:"modalRef",ref:O,onKeydown:ve(J(E,["prevent"]),["esc"])},[z.value==="confirm"?(n(),r("div",Lt,[t[27]||(t[27]=e("div",{class:"w-12 h-12 mx-auto bg-red-100 rounded-full flex items-center justify-center mb-4"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t[28]||(t[28]=e("h3",{class:"text-lg font-medium mb-2"}," ¿Eliminar pago? ",-1)),t[29]||(t[29]=e("p",{class:"text-gray-600 mb-6"}," Esta acción no se puede deshacer. ",-1)),e("div",{class:"flex gap-3"},[e("button",{onClick:ie,class:"flex-1 px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors"}," Cancelar "),e("button",{onClick:de,class:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"}," Eliminar ")])])):z.value==="details"?(n(),r("div",Vt,[e("h3",At,[t[30]||(t[30]=x(" Detalles de Pago ")),(o=l.value)!=null&&o.id?(n(),r("span",It,"#"+a(l.value.numero_pago),1)):g("",!0)]),l.value?(n(),r("div",St,[e("div",Tt,[e("div",null,[e("p",Ot,[t[31]||(t[31]=e("strong",null,"Cliente:",-1)),x(" "+a(((f=(m=l.value.prestamo)==null?void 0:m.cliente)==null?void 0:f.nombre_razon_social)||"Sin cliente"),1)]),e("p",Ht,[t[32]||(t[32]=e("strong",null,"Préstamo ID:",-1)),x(" #"+a(l.value.prestamo_id),1)]),e("p",qt,[t[33]||(t[33]=e("strong",null,"Número de Pago:",-1)),x(" #"+a(l.value.numero_pago),1)]),e("p",Rt,[t[34]||(t[34]=e("strong",null,"Estado:",-1)),e("span",{class:N([S(l.value.estado),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ml-2"])},a(T(l.value.estado)),3)])]),e("div",null,[e("p",Kt,[t[35]||(t[35]=e("strong",null,"Fecha Programada:",-1)),x(" "+a(M(l.value.fecha_programada)),1)]),l.value.fecha_pago?(n(),r("p",Ut,[t[36]||(t[36]=e("strong",null,"Fecha de Pago:",-1)),x(" "+a(M(l.value.fecha_pago)),1)])):g("",!0),e("p",Xt,[t[37]||(t[37]=e("strong",null,"Fecha Registro:",-1)),x(" "+a(M(l.value.fecha_registro)),1)])])]),e("div",Gt,[t[41]||(t[41]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Información Financiera",-1)),e("div",Qt,[e("div",null,[t[38]||(t[38]=e("p",{class:"text-gray-600"},"Monto Programado:",-1)),e("p",Zt,"$"+a(h(l.value.monto_programado)),1)]),e("div",null,[t[39]||(t[39]=e("p",{class:"text-gray-600"},"Monto Pagado:",-1)),e("p",Jt,"$"+a(h(l.value.monto_pagado)),1)]),l.value.dias_atraso>0?(n(),r("div",Wt,[t[40]||(t[40]=e("p",{class:"text-gray-600"},"Días de Atraso:",-1)),e("p",Yt,a(l.value.dias_atraso)+" días",1)])):g("",!0)])])])):g("",!0),e("div",es,[e("button",{onClick:t[2]||(t[2]=$=>I(l.value)),class:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"}," 💳 Registrar Pago "),e("button",{onClick:E,class:"px-3 py-2 bg-gray-300 rounded-lg hover:bg-gray-400 transition-colors text-sm"}," Cerrar ")])])):g("",!0)],40,$t)])):g("",!0)]}),_:1}),j.value?(n(),r("div",ts,t[42]||(t[42]=[e("div",{class:"bg-white p-6 rounded-lg shadow-lg"},[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e("span",{class:"text-gray-700"},"Procesando...")])],-1)]))):g("",!0)])],64)}}}),is=he(ss,[["__scopeId","data-v-b1c2d154"]]);export{is as default};
