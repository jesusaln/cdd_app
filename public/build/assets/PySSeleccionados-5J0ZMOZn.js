import{i as r,o as n,f as t,l as u,t as l,F as _,m as y,k as g,n as $}from"./vendor-d19pJyVS.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"productos-seleccionados"},D={key:0,class:"mt-6"},F={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},j={class:"ml-2 bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full"},P={class:"space-y-4"},C={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},B={class:"flex-1 min-w-0"},I={class:"flex items-start justify-between"},N={class:"flex-1"},V={class:"flex items-center mb-2"},q={key:0,class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},L={key:1,class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},z={class:"text-lg font-semibold text-gray-900 mb-1"},X={key:0,class:"text-sm text-gray-600 mb-2"},H={class:"space-y-1"},A={class:"flex items-center text-sm text-gray-500"},E={key:0,class:"flex items-center text-sm text-gray-400"},O=["onClick"],Q={class:"grid grid-cols-1 sm:grid-cols-4 gap-4 lg:w-96"},T={class:"relative"},U=["value","onInput"],G={class:"relative"},J=["value","onInput"],K={class:"relative"},R=["value"],W={class:"px-3 py-2 text-sm font-semibold text-green-600 bg-green-50 border border-green-200 rounded-lg"},Y={key:0,class:"mt-4 pt-4 border-t border-gray-200"},Z={class:"grid grid-cols-2 gap-4 text-sm"},tt={class:"text-gray-600"},ot={class:"float-right"},et={class:"text-orange-600"},st={class:"float-right"},it={key:1,class:"mt-6 p-8 border-2 border-dashed border-gray-300 rounded-xl text-center"},rt={__name:"PySSeleccionados",props:{selectedProducts:{type:Array,required:!0},productos:{type:Array,default:()=>[]},servicios:{type:Array,default:()=>[]},quantities:{type:Object,required:!0},prices:{type:Object,required:!0},discounts:{type:Object,required:!0}},emits:["eliminar-producto","update-quantity","update-discount","calcular-total"],setup(a,{emit:b}){const c=a,m=b,d=s=>{const e=(s.tipo==="producto"?c.productos:c.servicios).find(i=>i.id===s.id);return e?{nombre:e.nombre,descripcion:e.descripcion||"",precio:s.tipo==="producto"?e.precio_venta||0:e.precio||0,precio_compra:e.precio_compra||0}:{nombre:"Item no encontrado",descripcion:"",precio:0,precio_compra:0}},p=s=>{const o=`${s.tipo}-${s.id}`,e=Number.parseFloat(c.quantities[o])||1,i=Number.parseFloat(c.prices[o])||0;return e*i},x=s=>{const o=`${s.tipo}-${s.id}`,e=p(s),i=Number.parseFloat(c.discounts[o])||0;return e*(i/100)},f=s=>{const o=p(s),e=x(s);return o-e},k=s=>{m("eliminar-producto",s)},h=(s,o)=>{if(console.log("ProductosSeleccionados - updateQuantity:",{entry:s!=null&&s.tipo?`${s.tipo}-${s.id}`:"entry inválido",value:o,valueType:typeof o}),!s||!s.tipo||!s.id){console.error("Entry inválido:",s);return}const e=`${s.tipo}-${s.id}`;(o==null||o==="")&&(console.warn(`Valor vacío para ${e}, usando 1 como default`),o="1");const i=Number.parseFloat(o),v=isNaN(i)?1:Math.max(1,i);console.log("ProductosSeleccionados - Emitiendo:",{key:e,quantity:v}),m("update-quantity",e,v)},w=(s,o)=>{const e=`${s.tipo}-${s.id}`,i=Math.min(100,Math.max(0,Number.parseFloat(o)||0));m("update-discount",e,i)};return(s,o)=>(n(),r("div",S,[a.selectedProducts.length>0?(n(),r("div",D,[t("h3",F,[o[0]||(o[0]=t("svg",{class:"w-5 h-5 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),o[1]||(o[1]=u(" Productos y Servicios Seleccionados ")),t("span",j,l(a.selectedProducts.length),1)]),t("div",P,[(n(!0),r(_,null,y(a.selectedProducts,e=>(n(),r("div",{key:`${e.tipo}-${e.id}`,class:"bg-gradient-to-r from-gray-50 to-white border border-gray-200 rounded-xl p-6 hover:shadow-md transition-all duration-200"},[t("div",C,[t("div",B,[t("div",I,[t("div",N,[t("div",V,[t("span",{class:$(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mr-3",e.tipo==="producto"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"])},[e.tipo==="producto"?(n(),r("svg",q,o[2]||(o[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},null,-1)]))):(n(),r("svg",L,o[3]||(o[3]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1)]))),u(" "+l(e.tipo==="producto"?"Producto":"Servicio"),1)],2)]),t("h4",z,l(d(e).nombre),1),d(e).descripcion?(n(),r("p",X,l(d(e).descripcion),1)):g("",!0),t("div",H,[t("div",A,[o[4]||(o[4]=t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),u(" Precio unitario: $"+l(d(e).precio.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),e.tipo==="producto"&&d(e).precio_compra>0?(n(),r("div",E,[o[5]||(o[5]=t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 2.5M7 13l2.5 2.5"})],-1)),u(" Precio compra: $"+l(d(e).precio_compra.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})),1)])):g("",!0)])]),t("button",{type:"button",onClick:i=>k(e),class:"text-red-500 hover:text-red-700 hover:bg-red-100 p-2 rounded-full transition-colors duration-200 flex-shrink-0",title:"Eliminar producto"},o[6]||(o[6]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,O)])]),t("div",Q,[t("div",null,[o[7]||(o[7]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Cantidad",-1)),t("div",T,[t("input",{type:"number",value:a.quantities[`${e.tipo}-${e.id}`]||1,onInput:i=>h(e,i.target.value),min:"1",step:"1",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,40,U)])]),t("div",null,[o[9]||(o[9]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Descuento %",-1)),t("div",G,[t("input",{type:"number",value:a.discounts[`${e.tipo}-${e.id}`]||0,onInput:i=>w(e,i.target.value),min:"0",max:"100",step:"0.01",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},null,40,J),o[8]||(o[8]=t("div",{class:"absolute inset-y-0 right-0 pr-2 flex items-center pointer-events-none"},[t("span",{class:"text-gray-400 text-xs"},"%")],-1))])]),t("div",null,[o[11]||(o[11]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Precio Unit.",-1)),t("div",K,[t("input",{type:"text",value:"$"+(a.prices[`${e.tipo}-${e.id}`]||0).toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2}),readonly:"",class:"w-full px-3 py-2 text-sm bg-gray-100 border border-gray-300 rounded-lg text-gray-600 cursor-not-allowed"},null,8,R),o[10]||(o[10]=t("div",{class:"absolute inset-y-0 right-0 pr-2 flex items-center pointer-events-none"},[t("svg",{class:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1))])]),t("div",null,[o[12]||(o[12]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Subtotal",-1)),t("div",W," $"+l(f(e).toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})),1)])])]),(a.discounts[`${e.tipo}-${e.id}`]||0)>0?(n(),r("div",Y,[t("div",Z,[t("div",tt,[o[13]||(o[13]=t("span",{class:"font-medium"},"Subtotal sin descuento:",-1)),t("span",ot,"$"+l(p(e).toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),t("div",et,[o[14]||(o[14]=t("span",{class:"font-medium"},"Descuento aplicado:",-1)),t("span",st,"-$"+l(x(e).toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})),1)])])])):g("",!0)]))),128))])])):(n(),r("div",it,o[15]||(o[15]=[t("svg",{class:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),t("p",{class:"text-gray-500 text-lg font-medium"},"No hay productos seleccionados",-1),t("p",{class:"text-gray-400 text-sm mt-1"},"Busca y agrega productos o servicios para comenzar",-1)])))]))}},at=M(rt,[["__scopeId","data-v-8cbe9d39"]]);export{at as P};
