import{Q as z,p as A,c as p,i as n,o as r,g as x,f as t,u as f,Z as L,e as N,l as D,A as M,k as g,t as o,n as b,J as S,F as $,m as T}from"./vendor-d19pJyVS.js";import{A as V}from"./AppLayout-CcnrZQKI.js";import{N as B}from"./app-BcT2PLJy.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Dq7h7Pqt.js";const O={class:"pagos-show min-h-screen bg-gray-50"},H={class:"max-w-4xl mx-auto px-6 py-8"},X={class:"mb-8"},J={class:"flex items-center justify-between"},Q={class:"flex items-center space-x-3"},R={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Z={class:"lg:col-span-2"},G={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},K={class:"p-6"},U={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},W={class:"space-y-2 text-sm"},Y={class:"flex justify-between"},tt={class:"font-semibold text-gray-900"},st={class:"flex justify-between"},et={class:"font-semibold text-gray-900"},ot={class:"flex justify-between"},at={class:"space-y-2 text-sm"},nt={class:"flex justify-between"},rt={class:"font-semibold text-gray-900"},dt={class:"flex justify-between"},it={class:"font-semibold text-green-600"},lt={class:"flex justify-between"},gt={class:"font-semibold text-orange-600"},ct={class:"bg-gray-50 rounded-lg p-4 mb-6"},mt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},ut={class:"font-semibold text-gray-900 ml-2"},pt={class:"font-semibold text-gray-900 ml-2"},xt={class:"font-semibold text-gray-900 ml-2"},ft={class:"font-semibold text-gray-900 ml-2"},bt={key:0,class:"bg-blue-50 rounded-lg p-4 mb-6"},yt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},vt={key:0},_t={class:"font-semibold text-blue-900 ml-2"},ht={key:1},wt={class:"font-semibold text-red-600 ml-2"},Pt={class:"lg:col-span-1"},jt={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-6"},kt={class:"p-6"},Ft={class:"text-center mb-4"},Nt={class:"text-3xl font-bold text-gray-900 mb-2"},Dt={class:"w-full bg-gray-200 rounded-full h-2"},Mt={class:"text-sm text-gray-600 mt-2"},$t={class:"space-y-3"},Ct={class:"flex justify-between items-center"},It={key:0,class:"flex justify-between items-center"},Et={class:"text-sm font-medium text-red-600"},zt={class:"flex justify-between items-center"},At={class:"text-sm font-medium text-orange-600"},Lt={key:0,class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},St={class:"px-6 py-4 border-b border-gray-200"},Tt={class:"text-sm text-gray-600 mt-1"},Vt={class:"p-6"},Bt={class:"space-y-3"},qt={class:"flex justify-between items-start mb-2"},Ot={class:"font-medium text-gray-900"},Ht={class:"text-xs text-gray-500"},Xt={class:"text-right"},Jt={class:"text-xs text-gray-600"},Qt={key:0,class:"text-xs text-gray-500"},Rt={key:0,class:"text-xs text-gray-600 mt-2 p-2 bg-gray-50 rounded"},Zt=Object.assign({layout:V},{__name:"Show",props:{pago:{type:Object,required:!0}},setup(e){const l=e,y=new B({duration:4e3,position:{x:"right",y:"top"},types:[{type:"success",background:"#10b981",icon:!1},{type:"error",background:"#ef4444",icon:!1},{type:"warning",background:"#f59e0b",icon:!1}]}),C=z();A(()=>{const a=C.props.flash;a!=null&&a.success&&y.success(a.success),a!=null&&a.error&&y.error(a.error)});const d=a=>{const s=parseFloat(a),m=Number.isFinite(s)?s:0;return new Intl.NumberFormat("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2}).format(m)},u=a=>{if(!a)return"Fecha no disponible";try{const s=new Date(a).getTime();return Number.isNaN(s)?"Fecha inválida":new Date(s).toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return"Fecha inválida"}},v=a=>({pendiente:"Pendiente",pagado:"Pagado",atrasado:"Atrasado",parcial:"Pago Parcial"})[a]||a,_=a=>({pendiente:"bg-yellow-100 text-yellow-800",pagado:"bg-green-100 text-green-800",atrasado:"bg-red-100 text-red-800",parcial:"bg-orange-100 text-orange-800"})[a]||"bg-gray-100 text-gray-800",I=a=>({efectivo:"Efectivo",transferencia:"Transferencia Bancaria",tarjeta_debito:"Tarjeta de Débito",tarjeta_credito:"Tarjeta de Crédito",cheque:"Cheque",otro:"Otro"})[a]||"No especificado",c=p(()=>l.pago.monto_programado==0?0:Math.round(l.pago.monto_pagado/l.pago.monto_programado*100)),h=p(()=>Math.max(0,l.pago.monto_programado-l.pago.monto_pagado)),E=p(()=>l.pago.historial_pagos&&l.pago.historial_pagos.length>0);return(a,s)=>{var m,w,P,j,k,F;return r(),n($,null,[x(f(L),{title:"Detalles de Pago"}),t("div",O,[t("div",H,[t("div",X,[t("div",J,[s[2]||(s[2]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900 tracking-tight"},"Detalles de Pago"),t("p",{class:"text-gray-600 mt-2"},"Información completa del pago del préstamo")],-1)),t("div",Q,[x(f(M),{href:`/pagos/create?prestamo_id=${e.pago.prestamo_id}&pago_id=${e.pago.id}`,class:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"},{default:N(()=>s[0]||(s[0]=[D(" 💳 Registrar Pago ")])),_:1},8,["href"]),x(f(M),{href:"/pagos",class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200"},{default:N(()=>s[1]||(s[1]=[D(" ← Volver a Pagos ")])),_:1})])])]),t("div",R,[t("div",Z,[t("div",G,[s[19]||(s[19]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h2",{class:"text-lg font-semibold text-gray-900"},"Información del Pago")],-1)),t("div",K,[t("div",U,[t("div",null,[s[6]||(s[6]=t("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"Datos del Pago",-1)),t("div",W,[t("div",Y,[s[3]||(s[3]=t("span",{class:"text-gray-600"},"Número de Pago:",-1)),t("span",tt,"#"+o(e.pago.numero_pago),1)]),t("div",st,[s[4]||(s[4]=t("span",{class:"text-gray-600"},"Fecha Programada:",-1)),t("span",et,o(u(e.pago.fecha_programada)),1)]),t("div",ot,[s[5]||(s[5]=t("span",{class:"text-gray-600"},"Estado:",-1)),t("span",{class:b(["font-semibold",_(e.pago.estado)])},o(v(e.pago.estado)),3)])])]),t("div",null,[s[10]||(s[10]=t("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"Información Financiera",-1)),t("div",at,[t("div",nt,[s[7]||(s[7]=t("span",{class:"text-gray-600"},"Monto Programado:",-1)),t("span",rt,"$"+o(d(e.pago.monto_programado)),1)]),t("div",dt,[s[8]||(s[8]=t("span",{class:"text-gray-600"},"Monto Pagado:",-1)),t("span",it,"$"+o(d(e.pago.monto_pagado)),1)]),t("div",lt,[s[9]||(s[9]=t("span",{class:"text-gray-600"},"Monto Pendiente:",-1)),t("span",gt,"$"+o(d(h.value)),1)])])])]),t("div",ct,[s[15]||(s[15]=t("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"Información del Préstamo",-1)),t("div",mt,[t("div",null,[s[11]||(s[11]=t("span",{class:"text-gray-600"},"Cliente:",-1)),t("span",ut,o((w=(m=e.pago.prestamo)==null?void 0:m.cliente)==null?void 0:w.nombre_razon_social),1)]),t("div",null,[s[12]||(s[12]=t("span",{class:"text-gray-600"},"Monto del préstamo:",-1)),t("span",pt,"$"+o(d((P=e.pago.prestamo)==null?void 0:P.monto_prestado)),1)]),t("div",null,[s[13]||(s[13]=t("span",{class:"text-gray-600"},"Progreso del préstamo:",-1)),t("span",xt,o((j=e.pago.prestamo)==null?void 0:j.progreso)+"%",1)]),t("div",null,[s[14]||(s[14]=t("span",{class:"text-gray-600"},"Pagos realizados:",-1)),t("span",ft,o((k=e.pago.prestamo)==null?void 0:k.pagos_realizados)+" / "+o((F=e.pago.prestamo)==null?void 0:F.numero_pagos),1)])])]),e.pago.fecha_pago||e.pago.dias_atraso>0?(r(),n("div",bt,[s[18]||(s[18]=t("h3",{class:"text-sm font-medium text-blue-700 mb-3"},"Información de Pago",-1)),t("div",yt,[e.pago.fecha_pago?(r(),n("div",vt,[s[16]||(s[16]=t("span",{class:"text-blue-600"},"Fecha de Pago:",-1)),t("span",_t,o(u(e.pago.fecha_pago)),1)])):g("",!0),e.pago.dias_atraso>0?(r(),n("div",ht,[s[17]||(s[17]=t("span",{class:"text-blue-600"},"Días de Atraso:",-1)),t("span",wt,o(e.pago.dias_atraso)+" días",1)])):g("",!0)])])):g("",!0)])])]),t("div",Pt,[t("div",jt,[s[23]||(s[23]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Progreso del Pago")],-1)),t("div",kt,[t("div",Ft,[t("div",Nt,o(c.value)+"%",1),t("div",Dt,[t("div",{class:b(["h-2 rounded-full transition-all duration-300",c.value===100?"bg-green-500":c.value>0?"bg-blue-500":"bg-gray-300"]),style:S({width:c.value+"%"})},null,6)]),t("div",Mt," $"+o(d(e.pago.monto_pagado))+" de $"+o(d(e.pago.monto_programado)),1)]),t("div",$t,[t("div",Ct,[s[20]||(s[20]=t("span",{class:"text-sm text-gray-600"},"Estado:",-1)),t("span",{class:b(["text-sm font-medium",_(e.pago.estado)])},o(v(e.pago.estado)),3)]),e.pago.dias_atraso>0?(r(),n("div",It,[s[21]||(s[21]=t("span",{class:"text-sm text-gray-600"},"Días de atraso:",-1)),t("span",Et,o(e.pago.dias_atraso)+" días",1)])):g("",!0),t("div",zt,[s[22]||(s[22]=t("span",{class:"text-sm text-gray-600"},"Pendiente:",-1)),t("span",At,"$"+o(d(h.value)),1)])])])]),E.value?(r(),n("div",Lt,[t("div",St,[s[24]||(s[24]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Historial de Pagos",-1)),t("p",Tt,o(e.pago.historial_pagos.length)+" pago(s) registrado(s)",1)]),t("div",Vt,[t("div",Bt,[(r(!0),n($,null,T(e.pago.historial_pagos,i=>(r(),n("div",{key:i.id,class:"border border-gray-200 rounded-lg p-3"},[t("div",qt,[t("div",null,[t("div",Ot,"$"+o(d(i.monto_pagado)),1),t("div",Ht,o(u(i.fecha_pago)),1)]),t("div",Xt,[t("div",Jt,o(I(i.metodo_pago)),1),i.referencia?(r(),n("div",Qt,o(i.referencia),1)):g("",!0)])]),i.notas?(r(),n("div",Rt,o(i.notas),1)):g("",!0)]))),128))])])])):g("",!0)])])])])],64)}}}),ts=q(Zt,[["__scopeId","data-v-43d2bc24"]]);export{ts as default};
