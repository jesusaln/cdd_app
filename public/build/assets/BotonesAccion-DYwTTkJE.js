import{d as $,c as m,i as a,o as r,f as e,k as c,t as i,n as D,G as v,b as j,l as g,e as k,u as C,A as M,F as L,g as B}from"./vendor-d19pJyVS.js";const z={class:"header-section mb-8"},T={class:"flex items-start justify-between gap-4"},P={class:"min-w-0"},F={class:"flex items-center gap-3 flex-wrap"},N={class:"text-3xl font-bold text-gray-900 truncate"},V={key:0,class:"text-gray-600 mt-1"},G={key:1,class:"mt-2"},X={class:"flex flex-wrap gap-3 shrink-0"},A=["disabled"],E={key:0,class:"mt-4"},De=$({__name:"Header",props:{kind:{type:String,default:void 0},mode:{type:String,default:"create"},title:{type:String,default:""},description:{type:String,default:""},backUrl:{type:String,required:!0},backLabel:{type:String,default:"Volver"},showBack:{type:Boolean,default:!0},showPreview:{type:Boolean,default:!0},canPreview:{type:Boolean,default:!0},previewLabel:{type:String,default:"Vista Previa"},status:{type:String,default:""},showShortcuts:{type:Boolean,default:!1}},emits:["preview","templates","close-shortcuts"],setup(t){const d=t,l={pedido:{create:{title:"Nuevo pedido",description:"Crea un pedido para tus clientes"},edit:{title:"Editar pedido",description:"Actualiza los datos del pedido"},show:{title:"Detalle del pedido",description:"Revisa la información del pedido"}},venta:{create:{title:"Nueva venta",description:"Registra una venta"},edit:{title:"Editar venta",description:"Actualiza los datos de la venta"},show:{title:"Detalle de la venta",description:"Revisa la información de la venta"}},compraProveedor:{create:{title:"Nueva compra",description:"Registra una compra a proveedor"},edit:{title:"Editar compra",description:"Actualiza los datos de la compra"},show:{title:"Detalle de la compra",description:"Revisa la información de la compra"}},ordenCompra:{create:{title:"Nueva orden de compra",description:"Genera una orden de compra para proveedor"},edit:{title:"Editar orden de compra",description:"Actualiza la orden de compra"},show:{title:"Detalle de la orden de compra",description:"Revisa la información de la orden"}},renta:{create:{title:"Nueva renta",description:"Crea una renta de producto o servicio"},edit:{title:"Editar renta",description:"Actualiza los datos de la renta"},show:{title:"Detalle de la renta",description:"Revisa la información de la renta"}},cotizacion:{create:{title:"Nueva cotización",description:"Crea una cotización para tu cliente"},edit:{title:"Editar cotización",description:"Modifica los detalles de la cotización"},show:{title:"Detalle de la cotización",description:"Revisa la información de la cotización"}}},b=m(()=>{var y,w;const n=typeof globalThis<"u"?globalThis.route:void 0,s=typeof n=="function"&&(((w=(y=n()).current)==null?void 0:w.call(y))||n().current)||"";if(typeof s=="string"&&s){if(s.startsWith("cotizaciones."))return"cotizacion";if(s.startsWith("pedidos."))return"pedido";if(s.startsWith("ventas."))return"venta";if(s.startsWith("compras."))return"compraProveedor";if(s.startsWith("ordenes."))return"ordenCompra";if(s.startsWith("rentas."))return"renta"}const u=(typeof window<"u"?window.location.pathname:"").toLowerCase();if(u.includes("/cotiz"))return"cotizacion";if(u.includes("/pedido"))return"pedido";if(u.includes("/venta"))return"venta";if(u.includes("/compra"))return"compraProveedor";if(u.includes("/orden"))return"ordenCompra";if(u.includes("/renta"))return"renta"}),p=m(()=>d.kind??b.value??"venta"),o=m(()=>d.title||l[p.value][d.mode].title),x=m(()=>d.description||l[p.value][d.mode].description),h={borrador:{bg:"bg-gray-50",text:"text-gray-700",ring:"ring-gray-200",label:"Borrador"},pendiente:{bg:"bg-amber-50",text:"text-amber-700",ring:"ring-amber-200",label:"Pendiente"},aprobada:{bg:"bg-emerald-50",text:"text-emerald-700",ring:"ring-emerald-200",label:"Aprobada"},confirmada:{bg:"bg-emerald-50",text:"text-emerald-700",ring:"ring-emerald-200",label:"Confirmada"},en_preparacion:{bg:"bg-sky-50",text:"text-sky-700",ring:"ring-sky-200",label:"En preparación"},listo_entrega:{bg:"bg-indigo-50",text:"text-indigo-700",ring:"ring-indigo-200",label:"Listo para entrega"},entregado:{bg:"bg-blue-50",text:"text-blue-700",ring:"ring-blue-200",label:"Entregado"},pagado:{bg:"bg-green-50",text:"text-green-700",ring:"ring-green-200",label:"Pagado"},cancelado:{bg:"bg-rose-50",text:"text-rose-700",ring:"ring-rose-200",label:"Cancelado"},pendiente_pago:{bg:"bg-amber-50",text:"text-amber-700",ring:"ring-amber-200",label:"Pendiente de pago"}},f=m(()=>{const n=(d.status||"").toLowerCase().replace(/\s+/g,"_");return h[n]??{bg:"bg-gray-50",text:"text-gray-700",ring:"ring-gray-200"}}),S=m(()=>{var s;const n=(d.status||"").toLowerCase().replace(/\s+/g,"_");return((s=h[n])==null?void 0:s.label)??d.status});return(n,s)=>(r(),a("div",z,[e("div",T,[e("div",P,[e("div",F,[e("h1",N,i(o.value),1),t.status?(r(),a("span",{key:0,class:D(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ring-1",f.value.bg,f.value.text,f.value.ring])},i(S.value),3)):c("",!0)]),x.value?(r(),a("p",V,i(x.value),1)):c("",!0),n.$slots.breadcrumbs?(r(),a("div",G,[v(n.$slots,"breadcrumbs")])):c("",!0)]),e("div",X,[v(n.$slots,"actions"),t.showPreview?(r(),a("button",{key:0,onClick:s[0]||(s[0]=u=>n.$emit("preview")),disabled:!t.canPreview,class:"inline-flex items-center px-4 py-2 bg-purple-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm"},[s[1]||(s[1]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),g(" "+i(t.previewLabel),1)],8,A)):c("",!0),t.showBack?(r(),j(C(M),{key:1,href:t.backUrl,class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 shadow-sm"},{default:k(()=>[s[2]||(s[2]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)),g(" "+i(t.backLabel),1)]),_:1},8,["href"])):c("",!0)])]),t.showShortcuts&&n.$slots.shortcuts?(r(),a("div",E,[v(n.$slots,"shortcuts")])):c("",!0)]))}}),R={key:0,class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},I={class:"p-6"},W={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},U={class:"bg-blue-50 p-4 rounded-lg"},q={class:"text-2xl font-bold text-blue-900"},H={class:"bg-green-50 p-4 rounded-lg"},K={class:"text-2xl font-bold text-green-900"},O={class:"bg-purple-50 p-4 rounded-lg"},Q={class:"text-2xl font-bold text-purple-900"},Y={class:"bg-yellow-50 p-4 rounded-lg"},J={class:"text-2xl font-bold text-yellow-900"},Z={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},_={class:"p-6"},ee={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},te={class:"text-center p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200"},oe={class:"text-3xl font-bold text-blue-600 mb-2"},ie={class:"text-center p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200"},se={class:"text-3xl font-bold text-green-600 mb-2"},re={class:"text-center p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200"},ne={class:"text-3xl font-bold text-purple-600 mb-2"},ae={class:"bg-gray-50 rounded-lg p-6"},le={class:"space-y-3"},de={class:"flex justify-between items-center text-gray-700"},ce={class:"font-semibold"},ue={key:0,class:"flex justify-between items-center text-orange-600"},me={class:"font-semibold"},ge={key:1,class:"flex justify-between items-center text-red-600"},be={class:"font-semibold"},pe={key:2,class:"flex justify-between items-center text-gray-700"},fe={class:"font-semibold"},ve={class:"flex justify-between items-center text-blue-600"},xe={class:"font-semibold"},he={key:3,class:"flex justify-between items-center text-green-600"},ye={class:"font-semibold"},we={class:"border-t border-gray-300 pt-3"},ke={class:"flex justify-between items-center text-lg font-bold text-gray-900"},je={__name:"Totales",props:{showMarginCalculator:Boolean,marginData:{type:Object,required:!0,default:()=>({costoTotal:0,precioVenta:0,ganancia:0,margenPorcentaje:0})},totals:{type:Object,required:!0,default:()=>({subtotal:0,descuentoItems:0,subtotalConDescuentos:0,iva:0,total:0})},itemCount:{type:Number,default:0},totalQuantity:{type:Number,default:0},depositoGarantia:{type:[Number,String],default:0}},emits:["toggle-margin-calculator"],setup(t,{emit:d}){const l=d,b=()=>{l("toggle-margin-calculator")};return(p,o)=>(r(),a(L,null,[t.showMarginCalculator?(r(),a("div",R,[e("div",{class:"bg-gradient-to-r from-yellow-500 to-yellow-600 px-6 py-4"},[e("div",{class:"flex justify-between items-center"},[o[1]||(o[1]=e("h2",{class:"text-lg font-semibold text-white flex items-center"},[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]),g(" Calculadora de Márgenes ")],-1)),e("button",{onClick:b,class:"text-white hover:text-yellow-200"},o[0]||(o[0]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),e("div",I,[e("div",W,[e("div",U,[o[2]||(o[2]=e("div",{class:"text-sm font-medium text-blue-700 mb-2"},"Costo Total",-1)),e("div",q," $"+i(t.marginData.costoTotal.toLocaleString("es-MX",{minimumFractionDigits:2})),1)]),e("div",H,[o[3]||(o[3]=e("div",{class:"text-sm font-medium text-green-700 mb-2"},"Precio de Venta",-1)),e("div",K," $"+i(t.marginData.precioVenta.toLocaleString("es-MX",{minimumFractionDigits:2})),1)]),e("div",O,[o[4]||(o[4]=e("div",{class:"text-sm font-medium text-purple-700 mb-2"},"Margen Bruto",-1)),e("div",Q,i(t.marginData.margenPorcentaje.toFixed(1))+"% ",1)]),e("div",Y,[o[5]||(o[5]=e("div",{class:"text-sm font-medium text-yellow-700 mb-2"},"Ganancia",-1)),e("div",J," $"+i(t.marginData.ganancia.toLocaleString("es-MX",{minimumFractionDigits:2})),1)])])])])):c("",!0),e("div",Z,[o[17]||(o[17]=e("div",{class:"bg-gradient-to-r from-purple-500 to-purple-600 px-6 py-4"},[e("h2",{class:"text-lg font-semibold text-white flex items-center"},[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})]),g(" Resumen de Totales ")])],-1)),e("div",_,[e("div",ee,[e("div",te,[e("div",oe,i(t.itemCount),1),o[6]||(o[6]=e("div",{class:"text-sm text-blue-600 font-medium"},"Items Seleccionados",-1))]),e("div",ie,[e("div",se,i(t.totalQuantity),1),o[7]||(o[7]=e("div",{class:"text-sm text-green-600 font-medium"},"Cantidad Total",-1))]),e("div",re,[e("div",ne,"$"+i(t.totals.total.toLocaleString("es-MX",{minimumFractionDigits:2})),1),o[8]||(o[8]=e("div",{class:"text-sm text-purple-600 font-medium"},"Total Final",-1))])]),e("div",ae,[o[16]||(o[16]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Desglose de Precios",-1)),e("div",le,[e("div",de,[o[9]||(o[9]=e("span",null,"Subtotal:",-1)),e("span",ce,"$"+i(t.totals.subtotal.toLocaleString("es-MX",{minimumFractionDigits:2})),1)]),t.totals.descuentoItems>0?(r(),a("div",ue,[o[10]||(o[10]=e("span",null,"Descuentos por Items:",-1)),e("span",me,"-$"+i(t.totals.descuentoItems.toLocaleString("es-MX",{minimumFractionDigits:2})),1)])):c("",!0),t.totals.descuentoGeneral>0?(r(),a("div",ge,[o[11]||(o[11]=e("span",null,"Descuento General:",-1)),e("span",be,"-$"+i(t.totals.descuentoGeneral.toLocaleString("es-MX",{minimumFractionDigits:2})),1)])):c("",!0),t.totals.descuentoItems>0||t.totals.descuentoGeneral>0?(r(),a("div",pe,[o[12]||(o[12]=e("span",null,"Subtotal con descuentos:",-1)),e("span",fe,"$"+i(t.totals.subtotalConDescuentos.toLocaleString("es-MX",{minimumFractionDigits:2})),1)])):c("",!0),e("div",ve,[o[13]||(o[13]=e("span",null,"IVA (16%):",-1)),e("span",xe,"$"+i(t.totals.iva.toLocaleString("es-MX",{minimumFractionDigits:2})),1)]),t.depositoGarantia&&t.depositoGarantia>0?(r(),a("div",he,[o[14]||(o[14]=e("span",null,"Depósito de Garantía:",-1)),e("span",ye,"$"+i(Number(t.depositoGarantia).toLocaleString("es-MX",{minimumFractionDigits:2})),1)])):c("",!0),e("div",we,[e("div",ke,[o[15]||(o[15]=e("span",null,"Total Final:",-1)),e("span",null,"$"+i((t.totals.total+Number(t.depositoGarantia||0)).toLocaleString("es-MX",{minimumFractionDigits:2})),1)])])])])])])],64))}},Ce={class:"flex flex-col sm:flex-row gap-4 justify-end"},Me=["disabled"],Se={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Le={__name:"BotonesAccion",props:{backUrl:{type:String,required:!0},isProcessing:{type:Boolean,default:!1},canSubmit:{type:Boolean,default:!0},buttonText:{type:String,default:"Crear"}},emits:["limpiar"],setup(t){return(d,l)=>(r(),a("div",Ce,[e("button",{type:"button",onClick:l[0]||(l[0]=b=>d.$emit("limpiar")),class:"inline-flex items-center justify-center px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-red-50 hover:border-red-300 hover:text-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200"},l[1]||(l[1]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),g(" Limpiar Todo ")])),B(C(M),{href:t.backUrl,class:"inline-flex items-center justify-center px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200"},{default:k(()=>l[2]||(l[2]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),g(" Cancelar ")])),_:1},8,["href"]),e("button",{type:"submit",disabled:t.isProcessing||!t.canSubmit,class:"inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-lg text-sm font-medium text-white bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl"},[t.isProcessing?(r(),a("svg",Se,l[3]||(l[3]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)]))):c("",!0),e("span",null,i(t.isProcessing?"Guardando...":t.buttonText),1)],8,Me)]))}};export{De as _,je as a,Le as b};
