import{r as ie,c as h,T as oe,i as c,o as u,g as te,f as o,u as a,Z as ae,l as n,t as s,q as re,k as b,v as m,x as C,F as j,m as V,z as f,E as se,n as ne,N as le}from"./vendor-d19pJyVS.js";import{N as de}from"./app-BcT2PLJy.js";import{A as ce}from"./AppLayout-CcnrZQKI.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Dq7h7Pqt.js";const me={class:"max-w-4xl mx-auto"},pe={class:"bg-white rounded-lg shadow-lg p-6"},be={class:"flex items-center mb-6"},fe={class:"text-sm text-blue-600 mt-1"},ge={class:"bg-gray-50 p-4 rounded-lg"},ve=["value"],xe={key:0,class:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200"},ye={class:"flex items-center text-sm text-blue-800"},ke={class:"grid grid-cols-2 gap-2 text-sm text-blue-700 mt-2"},he={key:0},De={key:0,class:"text-sm text-blue-600 mt-1"},_e={class:"grid md:grid-cols-2 gap-6"},Se=["value"],we={key:0,class:"mt-3"},Ce=["max"],je={class:"grid md:grid-cols-2 gap-6"},Me=["min"],Ne={key:0,class:"mt-3 p-3 bg-yellow-50 rounded-lg border border-yellow-200"},Re={class:"text-sm text-yellow-800"},Ee={class:"text-xs text-yellow-700 mt-1"},Oe=["min"],Ve={class:"mt-2 flex space-x-2"},Ae={class:"grid md:grid-cols-2 gap-6"},Le={class:"flex gap-2"},Ie=["disabled"],$e={key:0,class:"text-xs text-gray-500 mt-1"},qe={class:"bg-blue-50 p-4 rounded-lg border border-blue-200"},Fe={class:"grid md:grid-cols-3 gap-4"},Te={class:"text-xs text-gray-500 mt-1"},Ue=["placeholder"],ze={class:"flex items-center"},Pe={class:"relative inline-flex items-center cursor-pointer"},Xe={class:"ml-3 text-sm font-medium text-gray-700"},Be={class:"mt-4"},Ge={class:"flex justify-end text-sm text-gray-500 mt-1"},Ke={key:0,class:"bg-green-50 p-4 rounded-lg border border-green-200"},He={class:"grid md:grid-cols-2 gap-4 text-sm"},We={key:0},Ye={key:1},Ze={key:0,class:"mt-3 p-3 bg-green-100 rounded-lg"},Je={class:"text-sm text-green-800"},Qe={class:"flex justify-between text-sm text-gray-500 mt-1"},ei={class:"flex items-center justify-between pt-6 border-t border-gray-200"},ii={class:"flex space-x-3"},oi=["disabled"],ti={key:0,class:"fas fa-save mr-2"},ai={key:1,class:"fas fa-spinner fa-spin mr-2"},ri=Object.assign({layout:ce},{__name:"Create",props:{carros:Array},setup(A){const M=A;ie(!1);const v=new de({duration:4e3,position:{x:"right",y:"top"},types:[{type:"success",background:"linear-gradient(135deg, #4caf50, #45a049)",icon:{className:"fas fa-check-circle",tagName:"i",color:"#fff"}},{type:"error",background:"linear-gradient(135deg, #f44336, #e53935)",icon:{className:"fas fa-exclamation-triangle",tagName:"i",color:"#fff"}},{type:"warning",background:"linear-gradient(135deg, #ff9800, #f57c00)",icon:{className:"fas fa-exclamation-circle",tagName:"i",color:"#fff"}}]}),x=h(()=>{const t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().slice(0,10)}),L=h(()=>new Date(x.value).toLocaleDateString("es-MX",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),N=()=>({carro_id:null,tipo:"",otro_servicio:"",fecha:x.value,proximo_mantenimiento:"",notas:"",kilometraje_actual:"",costo:"",taller:"",prioridad:"media",dias_anticipacion_alerta:30,requiere_aprobacion:!1,observaciones_alerta:""}),i=oe(N()),y={"Cambio de aceite":{prioridad:"media",anticipacionDias:30,intervaloDias:180,costo:800,descripcion:"Mantenimiento preventivo b√°sico del motor"},"Revisi√≥n peri√≥dica":{prioridad:"media",anticipacionDias:60,intervaloDias:365,costo:1200,descripcion:"Inspecci√≥n completa del veh√≠culo"},"Servicio de frenos":{prioridad:"alta",anticipacionDias:90,intervaloDias:180,costo:2500,descripcion:"Mantenimiento cr√≠tico para seguridad"},"Servicio de llantas":{prioridad:"media",anticipacionDias:180,intervaloDias:365,costo:600,descripcion:"Rotaci√≥n y revisi√≥n de neum√°ticos"},"Servicio de bater√≠a":{prioridad:"alta",anticipacionDias:180,intervaloDias:730,costo:1800,descripcion:"Pruebas y posible reemplazo de bater√≠a"},"Servicio de motor":{prioridad:"alta",anticipacionDias:120,intervaloDias:365,costo:3500,descripcion:"Mantenimiento mayor del sistema motor"},"Revisi√≥n de luces":{prioridad:"baja",anticipacionDias:30,intervaloDias:180,costo:300,descripcion:"Verificaci√≥n del sistema el√©ctrico"},"Alineaci√≥n y balanceo":{prioridad:"media",anticipacionDias:180,intervaloDias:180,costo:800,descripcion:"Ajuste de suspensi√≥n y direcci√≥n"},"Cambio de filtros":{prioridad:"media",anticipacionDias:60,intervaloDias:180,costo:400,descripcion:"Reemplazo de filtros de aire, aceite y combustible"},"Revisi√≥n de transmisi√≥n":{prioridad:"critica",anticipacionDias:120,intervaloDias:365,costo:2e3,descripcion:"Mantenimiento especializado de transmisi√≥n"},"Otro servicio":{prioridad:"media",anticipacionDias:30,intervaloDias:30,costo:0,descripcion:"Servicio personalizado"}},I=[{value:"Cambio de aceite",label:"üõ¢Ô∏è Cambio de aceite"},{value:"Revisi√≥n peri√≥dica",label:"üîç Revisi√≥n peri√≥dica"},{value:"Servicio de frenos",label:"üõë Servicio de frenos"},{value:"Servicio de llantas",label:"üõû Servicio de llantas"},{value:"Servicio de bater√≠a",label:"üîã Servicio de bater√≠a"},{value:"Servicio de motor",label:"‚öôÔ∏è Servicio de motor"},{value:"Revisi√≥n de luces",label:"üí° Revisi√≥n de luces"},{value:"Alineaci√≥n y balanceo",label:"‚öñÔ∏è Alineaci√≥n y balanceo"},{value:"Cambio de filtros",label:"üîß Cambio de filtros"},{value:"Revisi√≥n de transmisi√≥n",label:"üîÑ Revisi√≥n de transmisi√≥n"},{value:"Otro servicio",label:"üìù Otro servicio"}],l=h(()=>{var t;return(t=M.carros)==null?void 0:t.find(e=>e.id===i.carro_id)}),D=t=>new Intl.NumberFormat("es-MX").format(Number(t)||0),R=t=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(Number(t)||0),_=(t,e)=>new Date(t).getTime()>new Date(e).getTime(),$={"Cambio de aceite":30,"Revisi√≥n peri√≥dica":90,"Servicio de frenos":180,"Servicio de llantas":60,"Servicio de bater√≠a":180,"Servicio de motor":365,"Revisi√≥n de luces":90,"Alineaci√≥n y balanceo":90,"Cambio de filtros":60,"Revisi√≥n de transmisi√≥n":365,"Otro servicio":7},q=async(t,e)=>{try{const d=await fetch(`/mantenimientos/api/${t}/servicios/${encodeURIComponent(e)}`,{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});if(d.ok){const p=await d.json();return console.log(`Encontrados ${p.length} servicios existentes de ${e} para veh√≠culo ${t}`),p}else return console.warn("Error al buscar servicios existentes:",d.status),[]}catch(d){return console.error("Error de conexi√≥n buscando servicios existentes:",d),[]}},F=()=>{l.value?(i.kilometraje_actual=l.value.kilometraje,l.value.taller_preferido&&!i.taller&&(i.taller=l.value.taller_preferido)):(i.kilometraje_actual="",i.taller="")},T=()=>{if(i.tipo!=="Otro servicio"&&(i.otro_servicio=""),W(),i.tipo&&i.tipo!=="Otro servicio"){const t=y[i.tipo];t&&v.success(`Config aplicada: prioridad ${t.prioridad}, alerta ${t.anticipacionDias} d√≠as, intervalo ${t.intervaloDias} d√≠as, costo $${t.costo}`)}},S=t=>{if(!i.fecha){v.warning("Primero selecciona la fecha del servicio");return}const e=new Date(i.fecha);e.setMonth(e.getMonth()+t),i.proximo_mantenimiento=e.toISOString().split("T")[0]},U=async()=>{const t=[];i.carro_id||t.push("Debes seleccionar un veh√≠culo"),i.tipo||t.push("Debes seleccionar un tipo de servicio"),i.tipo==="Otro servicio"&&!i.otro_servicio&&t.push("Debes especificar el tipo de servicio"),i.fecha||t.push("Debes seleccionar la fecha del servicio"),i.proximo_mantenimiento||t.push("Debes establecer la fecha del pr√≥ximo mantenimiento"),i.kilometraje_actual||t.push("Debes ingresar el kilometraje actual"),i.prioridad||t.push("Debes seleccionar una prioridad"),i.dias_anticipacion_alerta||t.push("Debes especificar los d√≠as de anticipaci√≥n para alertas");const e=K();if(t.push(...e),l.value&&parseInt(i.kilometraje_actual)<l.value.kilometraje&&t.push(`El kilometraje debe ser mayor o igual a ${D(l.value.kilometraje)} km (kilometraje actual del veh√≠culo)`),_(i.fecha,x.value)&&t.push("La fecha del servicio no puede ser futura"),_(i.proximo_mantenimiento,i.fecha)||t.push("El pr√≥ximo mantenimiento debe ser posterior a la fecha del servicio"),i.carro_id&&i.tipo&&i.fecha){const p=$[i.tipo]||7,g=await H(i.carro_id,i.tipo,i.fecha,p);t.push(...g)}const d=parseInt(i.dias_anticipacion_alerta);return d<1&&t.push("Los d√≠as de anticipaci√≥n deben ser al menos 1 d√≠a"),d>365&&t.push("Los d√≠as de anticipaci√≥n no pueden ser m√°s de 365 d√≠as"),i.costo&&parseFloat(i.costo)<0&&t.push("El costo no puede ser negativo"),i.notas.length>500&&t.push("Las notas no pueden exceder 500 caracteres"),i.observaciones_alerta.length>500&&t.push("Las observaciones de alerta no pueden exceder 500 caracteres"),i.otro_servicio.length>100&&t.push("La descripci√≥n del servicio personalizado no puede exceder 100 caracteres"),i.taller.length>100&&t.push("El nombre del taller no puede exceder 100 caracteres"),t},E=()=>{Object.assign(i,N()),v.success("Formulario limpiado")},z=async()=>{const t=await U();if(t.length>0){t.forEach(d=>v.error(d));return}const e={...i,requiere_aprobacion:!!i.requiere_aprobacion,costo:i.costo?Number(i.costo):0};console.log("Datos a enviar:",e),i.post(route("mantenimientos.store"),{onSuccess:d=>{v.success("¬°Mantenimiento creado exitosamente!"),E()},onError:d=>{Object.values(d).forEach(p=>v.error(String(p)))},onFinish:()=>{}})},P=t=>({baja:"Mantenimiento rutinario, no urgente",media:"Mantenimiento importante, programar pronto",alta:"Mantenimiento cr√≠tico, requiere atenci√≥n prioritaria",critica:"Mantenimiento urgente, requiere atenci√≥n inmediata"})[t]||"Selecciona una prioridad",X=t=>({baja:"bg-green-100 text-green-700 border-green-200",media:"bg-blue-100 text-blue-700 border-blue-200",alta:"bg-orange-100 text-orange-700 border-orange-200",critica:"bg-red-100 text-red-700 border-red-200"})[t]||"bg-gray-100 text-gray-700 border-gray-200",B=t=>({baja:"Baja",media:"Media",alta:"Alta",critica:"Cr√≠tica"})[t]||"Media",G=()=>{var t;return i.tipo&&((t=y[i.tipo])==null?void 0:t.anticipacionDias)||30},k=()=>{var t;return i.tipo&&((t=y[i.tipo])==null?void 0:t.costo)||0},K=()=>{const t=[];return i.kilometraje_actual&&isNaN(parseFloat(i.kilometraje_actual))&&t.push("El kilometraje debe ser un n√∫mero v√°lido"),i.costo&&isNaN(parseFloat(i.costo))&&t.push("El costo debe ser un n√∫mero v√°lido"),i.dias_anticipacion_alerta&&isNaN(parseInt(i.dias_anticipacion_alerta))&&t.push("Los d√≠as de anticipaci√≥n deben ser un n√∫mero v√°lido"),i.fecha&&!Date.parse(i.fecha)&&t.push("La fecha del servicio no es v√°lida"),i.proximo_mantenimiento&&!Date.parse(i.proximo_mantenimiento)&&t.push("La fecha del pr√≥ximo mantenimiento no es v√°lida"),i.fecha&&i.proximo_mantenimiento&&(_(i.proximo_mantenimiento,i.fecha)||t.push("La fecha del pr√≥ximo mantenimiento debe ser posterior a la fecha del servicio")),t},H=async(t,e,d,p)=>{const g=[];try{const r=await q(t,e);for(const w of r){const Z=new Date(w.fecha),J=new Date(d),Q=Math.abs(J.getTime()-Z.getTime()),O=Math.ceil(Q/(1e3*60*60*24));if(O<p){const ee=e==="Otro servicio"&&w.otro_servicio||e;g.push(`Ya existe un servicio de "${ee}" registrado el ${new Date(w.fecha).toLocaleDateString("es-MX")} (${O} d√≠as atr√°s). Debe esperar al menos ${p} d√≠as entre servicios del mismo tipo.`)}}}catch(r){console.error("Error validando servicios duplicados:",r)}return g},W=()=>{if(!i.tipo)return;const t=y[i.tipo];if(t&&(i.prioridad||(i.prioridad=t.prioridad),i.dias_anticipacion_alerta||(i.dias_anticipacion_alerta=t.anticipacionDias),i.costo||(i.costo=t.costo),!i.observaciones_alerta&&t.descripcion&&(i.observaciones_alerta=`${t.descripcion}. Revisar manual del veh√≠culo para especificaciones.`),i.fecha&&!i.proximo_mantenimiento)){const e=new Date(i.fecha);e.setDate(e.getDate()+t.intervaloDias),i.proximo_mantenimiento=e.toISOString().split("T")[0]}},Y=h(()=>{if(!l.value||!i.tipo)return"";const t=Number(l.value.kilometraje)||0,e=[];t<1e4?e.push("Veh√≠culo nuevo: mantenimientos preventivos b√°sicos"):t<5e4?e.push("En garant√≠a: seguir servicios recomendados"):t<1e5?e.push("Revisiones m√°s frecuentes"):e.push("Alto kilometraje: priorizar preventivos");const d={"Cambio de aceite":"Cada 5,000‚Äì10,000 km seg√∫n aceite","Servicio de frenos":"Cada 10,000‚Äì15,000 km o si hay ruidos","Servicio de llantas":"Rotaci√≥n cada 8,000‚Äì10,000 km","Servicio de bater√≠a":"Revisar cada 6 meses, reemplazar cada 2-3 a√±os","Revisi√≥n de transmisi√≥n":"Servicio mayor cada 60,000-100,000 km","Cambio de filtros":"Cada 10,000‚Äì15,000 km seg√∫n condiciones"};return d[i.tipo]&&e.push(d[i.tipo]),e.join(". ")});return i.fecha||(i.fecha=x.value),(t,e)=>{var d,p,g;return u(),c(j,null,[te(a(ae),{title:"Crear Mantenimiento"}),o("div",me,[o("div",pe,[o("div",be,[e[21]||(e[21]=o("div",{class:"bg-blue-500 p-3 rounded-lg mr-4"},[o("i",{class:"fas fa-wrench text-white text-xl"})],-1)),o("div",null,[e[19]||(e[19]=o("h1",{class:"text-2xl font-bold text-gray-800"},"Crear Mantenimiento",-1)),e[20]||(e[20]=o("p",{class:"text-gray-600"},"Registra un nuevo servicio de mantenimiento para tu veh√≠culo",-1)),o("p",fe,[e[18]||(e[18]=o("i",{class:"fas fa-info-circle mr-1"},null,-1)),n(" Fecha de hoy: "+s(L.value),1)])])]),o("form",{onSubmit:re(z,["prevent"]),class:"space-y-6"},[o("div",ge,[e[28]||(e[28]=o("label",{for:"carro-select",class:"block text-gray-700 text-sm font-semibold mb-3"},[o("i",{class:"fas fa-car mr-2"}),n("Seleccionar Veh√≠culo ")],-1)),m(o("select",{id:"carro-select","onUpdate:modelValue":e[0]||(e[0]=r=>a(i).carro_id=r),class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",required:"",onChange:F},[e[22]||(e[22]=o("option",{value:"",disabled:""},"Selecciona un veh√≠culo",-1)),(u(!0),c(j,null,V(M.carros,r=>(u(),c("option",{key:r.id,value:r.id},s(r.marca)+" "+s(r.modelo)+" "+s(r.a√±o||"")+" - "+s(D(r.kilometraje))+" km ",9,ve))),128))],544),[[C,a(i).carro_id,void 0,{number:!0}]]),l.value?(u(),c("div",xe,[o("div",ye,[e[24]||(e[24]=o("i",{class:"fas fa-info-circle mr-2"},null,-1)),o("span",null,[e[23]||(e[23]=n("Veh√≠culo seleccionado: ")),o("strong",null,s(l.value.marca)+" "+s(l.value.modelo),1)])]),o("div",ke,[o("div",null,[e[25]||(e[25]=n("Kilometraje actual: ")),o("strong",null,s(D(l.value.kilometraje))+" km",1)]),l.value.a√±o?(u(),c("div",he,[e[26]||(e[26]=n("A√±o: ")),o("strong",null,s(l.value.a√±o),1)])):b("",!0)]),l.value.taller_preferido?(u(),c("div",De,[e[27]||(e[27]=o("i",{class:"fas fa-wrench mr-1"},null,-1)),n(" Taller preferido: "+s(l.value.taller_preferido),1)])):b("",!0)])):b("",!0)]),o("div",_e,[o("div",null,[e[30]||(e[30]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-3"},[o("i",{class:"fas fa-cogs mr-2"}),n("Tipo de Servicio ")],-1)),m(o("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>a(i).tipo=r),class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",required:"",onChange:T},[e[29]||(e[29]=o("option",{value:"",disabled:""},"Selecciona el tipo de servicio",-1)),(u(),c(j,null,V(I,r=>o("option",{key:r.value,value:r.value},s(r.label),9,Se)),64))],544),[[C,a(i).tipo]]),a(i).tipo==="Otro servicio"?(u(),c("div",we,[m(o("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>a(i).otro_servicio=r),type:"text",placeholder:"Especifica el tipo de servicio...",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",required:""},null,512),[[f,a(i).otro_servicio]])])):b("",!0)]),o("div",null,[e[31]||(e[31]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-3"},[o("i",{class:"fas fa-calendar mr-2"}),n("Fecha del Servicio ")],-1)),m(o("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>a(i).fecha=r),type:"date",max:x.value,class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",required:""},null,8,Ce),[[f,a(i).fecha]])])]),o("div",je,[o("div",null,[e[33]||(e[33]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-3"},[o("i",{class:"fas fa-tachometer-alt mr-2"}),n("Kilometraje del Servicio ")],-1)),m(o("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>a(i).kilometraje_actual=r),type:"number",min:((d=l.value)==null?void 0:d.kilometraje)||0,placeholder:"Ingresa el kilometraje actual",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",required:""},null,8,Me),[[f,a(i).kilometraje_actual,void 0,{number:!0}]]),e[34]||(e[34]=o("p",{class:"text-sm text-gray-500 mt-2 flex items-center"},[o("i",{class:"fas fa-exclamation-triangle text-yellow-500 mr-2"}),n(" Debe ser mayor o igual al kilometraje actual del veh√≠culo ")],-1)),l.value&&a(i).tipo?(u(),c("div",Ne,[o("div",Re,[e[32]||(e[32]=o("i",{class:"fas fa-lightbulb mr-2"},null,-1)),o("strong",null,"Sugerencias para "+s(l.value.marca)+" "+s(l.value.modelo)+":",1)]),o("div",Ee,s(Y.value),1)])):b("",!0)]),o("div",null,[e[35]||(e[35]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-3"},[o("i",{class:"fas fa-calendar-plus mr-2"}),n("Pr√≥ximo Mantenimiento ")],-1)),m(o("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>a(i).proximo_mantenimiento=r),type:"date",min:a(i).fecha||x.value,class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",required:""},null,8,Oe),[[f,a(i).proximo_mantenimiento]]),o("div",Ve,[o("button",{type:"button",onClick:e[6]||(e[6]=r=>S(3)),class:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded transition-colors"}," +3 meses "),o("button",{type:"button",onClick:e[7]||(e[7]=r=>S(6)),class:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded transition-colors"}," +6 meses "),o("button",{type:"button",onClick:e[8]||(e[8]=r=>S(12)),class:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded transition-colors"}," +1 a√±o ")])])]),o("div",Ae,[o("div",null,[e[36]||(e[36]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-3"},[o("i",{class:"fas fa-dollar-sign mr-2"}),n("Costo del Servicio (Opcional) ")],-1)),o("div",Le,[m(o("input",{"onUpdate:modelValue":e[9]||(e[9]=r=>a(i).costo=r),type:"number",step:"0.01",min:"0",placeholder:"0.00",class:"flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"},null,512),[[f,a(i).costo,void 0,{number:!0}]]),a(i).tipo&&k()>0?(u(),c("button",{key:0,type:"button",onClick:e[10]||(e[10]=r=>a(i).costo=k()),disabled:a(i).costo>0,class:"px-3 py-3 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 disabled:bg-gray-100 disabled:text-gray-400 transition-colors text-sm font-medium",title:"Usar costo sugerido"}," üí∞ Sugerido ",8,Ie)):b("",!0)]),a(i).tipo&&k()>0?(u(),c("p",$e," Costo sugerido para "+s(a(i).tipo)+": "+s(R(k())),1)):b("",!0)]),o("div",null,[e[37]||(e[37]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-3"},[o("i",{class:"fas fa-map-marker-alt mr-2"}),n("Taller/Lugar (Opcional) ")],-1)),m(o("input",{"onUpdate:modelValue":e[11]||(e[11]=r=>a(i).taller=r),type:"text",placeholder:"Nombre del taller o lugar",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"},null,512),[[f,a(i).taller]])])]),o("div",qe,[e[46]||(e[46]=o("h3",{class:"text-lg font-semibold text-blue-800 mb-4 flex items-center"},[o("i",{class:"fas fa-bell mr-2"}),n(" Configuraci√≥n de Alertas y Prioridad ")],-1)),o("div",Fe,[o("div",null,[e[39]||(e[39]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-3"},[o("i",{class:"fas fa-exclamation-triangle mr-2"}),n("Prioridad ")],-1)),m(o("select",{"onUpdate:modelValue":e[12]||(e[12]=r=>a(i).prioridad=r),class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",required:""},e[38]||(e[38]=[o("option",{value:"baja"},"üü¢ Baja",-1),o("option",{value:"media"},"üîµ Media",-1),o("option",{value:"alta"},"üü† Alta",-1),o("option",{value:"critica"},"üî¥ Cr√≠tica",-1)]),512),[[C,a(i).prioridad]]),o("p",Te,s(P(a(i).prioridad)),1)]),o("div",null,[e[40]||(e[40]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-3"},[o("i",{class:"fas fa-clock mr-2"}),n("D√≠as de Anticipaci√≥n ")],-1)),m(o("input",{"onUpdate:modelValue":e[13]||(e[13]=r=>a(i).dias_anticipacion_alerta=r),type:"number",min:"1",max:"365",placeholder:G(),class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",required:""},null,8,Ue),[[f,a(i).dias_anticipacion_alerta,void 0,{number:!0}]]),e[41]||(e[41]=o("p",{class:"text-xs text-gray-500 mt-1"}," D√≠as antes para enviar alerta ",-1))]),o("div",null,[e[43]||(e[43]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-3"},[o("i",{class:"fas fa-check-circle mr-2"}),n("Requiere Aprobaci√≥n ")],-1)),o("div",ze,[o("label",Pe,[m(o("input",{"onUpdate:modelValue":e[14]||(e[14]=r=>a(i).requiere_aprobacion=r),type:"checkbox",class:"sr-only peer"},null,512),[[se,a(i).requiere_aprobacion]]),e[42]||(e[42]=o("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1)),o("span",Xe,s(a(i).requiere_aprobacion?"S√≠":"No"),1)])]),e[44]||(e[44]=o("p",{class:"text-xs text-gray-500 mt-1"}," Si necesita aprobaci√≥n especial ",-1))])]),o("div",Be,[e[45]||(e[45]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-3"},[o("i",{class:"fas fa-sticky-note mr-2"}),n("Observaciones de Alerta (Opcional) ")],-1)),m(o("textarea",{"onUpdate:modelValue":e[15]||(e[15]=r=>a(i).observaciones_alerta=r),rows:"2",placeholder:"Notas adicionales para la alerta...",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 resize-y",maxlength:"500"},null,512),[[f,a(i).observaciones_alerta]]),o("div",Ge,[o("span",null,s(a(i).observaciones_alerta.length)+"/500 caracteres",1)])])]),a(i).carro_id&&a(i).tipo&&a(i).fecha?(u(),c("div",Ke,[e[57]||(e[57]=o("h3",{class:"text-lg font-semibold text-green-800 mb-3 flex items-center"},[o("i",{class:"fas fa-clipboard-check mr-2"}),n(" Resumen del Mantenimiento ")],-1)),o("div",He,[o("div",null,[e[47]||(e[47]=o("strong",null,"Veh√≠culo:",-1)),n(" "+s((p=l.value)==null?void 0:p.marca)+" "+s((g=l.value)==null?void 0:g.modelo),1)]),o("div",null,[e[48]||(e[48]=o("strong",null,"Tipo de Servicio:",-1)),n(" "+s(a(i).tipo==="Otro servicio"?a(i).otro_servicio:a(i).tipo),1)]),o("div",null,[e[49]||(e[49]=o("strong",null,"Fecha del Servicio:",-1)),n(" "+s(new Date(a(i).fecha).toLocaleDateString("es-MX")),1)]),o("div",null,[e[50]||(e[50]=o("strong",null,"Pr√≥ximo Mantenimiento:",-1)),n(" "+s(a(i).proximo_mantenimiento?new Date(a(i).proximo_mantenimiento).toLocaleDateString("es-MX"):"No definido"),1)]),o("div",null,[e[51]||(e[51]=o("strong",null,"Prioridad:",-1)),o("span",{class:ne([X(a(i).prioridad),"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ml-2"])},s(B(a(i).prioridad)),3)]),o("div",null,[e[52]||(e[52]=o("strong",null,"D√≠as de Anticipaci√≥n:",-1)),n(" "+s(a(i).dias_anticipacion_alerta)+" d√≠as ",1)]),a(i).costo?(u(),c("div",We,[e[53]||(e[53]=o("strong",null,"Costo:",-1)),n(" "+s(R(a(i).costo)),1)])):b("",!0),a(i).taller?(u(),c("div",Ye,[e[54]||(e[54]=o("strong",null,"Taller:",-1)),n(" "+s(a(i).taller),1)])):b("",!0)]),a(i).proximo_mantenimiento?(u(),c("div",Ze,[o("div",Je,[e[55]||(e[55]=o("i",{class:"fas fa-bell mr-2"},null,-1)),e[56]||(e[56]=o("strong",null,"Alerta programada:",-1)),n(" Se enviar√° una notificaci√≥n "+s(a(i).dias_anticipacion_alerta)+" d√≠as antes del pr√≥ximo mantenimiento ("+s(new Date(a(i).proximo_mantenimiento).toLocaleDateString("es-MX"))+") ",1)])])):b("",!0)])):b("",!0),o("div",null,[e[59]||(e[59]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-3"},[o("i",{class:"fas fa-sticky-note mr-2"}),n("Notas y Observaciones ")],-1)),m(o("textarea",{"onUpdate:modelValue":e[16]||(e[16]=r=>a(i).notas=r),rows:"4",placeholder:"Describe detalles del servicio, piezas cambiadas, observaciones, etc...",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 resize-y"},null,512),[[f,a(i).notas]]),o("div",Qe,[e[58]||(e[58]=o("span",null,"Opcional",-1)),o("span",null,s(a(i).notas.length)+"/500 caracteres",1)])]),o("div",ei,[o("button",{type:"button",onClick:E,class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all duration-200 flex items-center"},e[60]||(e[60]=[o("i",{class:"fas fa-undo mr-2"},null,-1),n(" Limpiar Formulario ")])),o("div",ii,[o("button",{type:"button",onClick:e[17]||(e[17]=r=>a(le).visit(t.route("mantenimientos.index"))),class:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-all duration-200 flex items-center"},e[61]||(e[61]=[o("i",{class:"fas fa-times mr-2"},null,-1),n(" Cancelar ")])),o("button",{type:"submit",disabled:a(i).processing||!a(i).carro_id||!a(i).tipo,class:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-blue-300 transition-all duration-200 flex items-center min-w-[160px]"},[a(i).processing?(u(),c("i",ai)):(u(),c("i",ti)),n(" "+s(a(i).processing?"Guardando...":"Crear Mantenimiento"),1)],8,oi)])])],32)])])],64)}}}),ui=ue(ri,[["__scopeId","data-v-24664005"]]);export{ui as default};
