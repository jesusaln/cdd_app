import{K as E,r as y,c as V,i as l,o as a,g as F,f as o,u as M,Z as U,q as B,v as m,k as u,l as b,z as f,n as p,t as d,x as P,s as w,F as A,N as h}from"./vendor-d19pJyVS.js";import{N as G}from"./app-BcT2PLJy.js";import{A as S}from"./AppLayout-CcnrZQKI.js";import"./utils-Dq7h7Pqt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"max-w-4xl mx-auto"},q={class:"bg-white shadow-lg rounded-lg p-6"},D={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},O={key:0,class:"text-red-500 text-sm mt-1"},H={key:0,class:"text-red-500 text-sm mt-1"},L={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},T=["max"],J={key:0,class:"text-red-500 text-sm mt-1"},R={key:0,class:"text-red-500 text-sm mt-1"},I={class:"relative"},X={key:0,class:"text-red-500 text-sm mt-1"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y={key:0,class:"text-red-500 text-sm mt-1"},W={key:0,class:"text-red-500 text-sm mt-1"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$={class:"relative"},Q={key:0,class:"text-red-500 text-sm mt-1"},ee={key:0,class:"text-red-500 text-sm mt-1"},oe={class:"border-t pt-6"},te={key:0,class:"mb-4"},re={class:"relative inline-block"},se=["src"],le={class:"mb-4"},ae={class:"block text-sm font-medium text-gray-700 mb-2"},ie={class:"flex items-center justify-center w-full"},ne={class:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition duration-200"},ue={key:0,class:"text-red-500 text-sm mt-1"},de={key:1,class:"mb-4"},ce={class:"relative inline-block"},me=["src"],pe={class:"flex items-center justify-between pt-6 border-t"},be=["disabled"],fe={key:0,class:"flex items-center"},ge={key:1},ke=Object.assign({layout:S},{__name:"Edit",props:{carro:Object,errors:{type:Object,default:()=>({})}},setup(k){const i=k,g=new G({duration:4e3,position:{x:"right",y:"top"},types:[{type:"success",background:"#10b981",icon:{className:"fas fa-check-circle",tagName:"i",color:"#fff"}},{type:"error",background:"#ef4444",icon:{className:"fas fa-times-circle",tagName:"i",color:"#fff"}}]}),r=E({marca:i.carro.marca||"",modelo:i.carro.modelo||"",anio:i.carro.anio||new Date().getFullYear(),color:i.carro.color||"",precio:i.carro.precio||0,numero_serie:i.carro.numero_serie||"",combustible:i.carro.combustible||"",kilometraje:i.carro.kilometraje||0,placa:i.carro.placa||"",foto:null}),c=y(null),v=y(!1),t=V(()=>i.errors||{}),j=n=>{const e=n.target.files[0];if(!e){r.foto=null,c.value=null;return}if(!["image/jpeg","image/jpg","image/png"].includes(e.type)){g.error("Solo se permiten archivos JPG, JPEG y PNG"),n.target.value="";return}const x=5*1024*1024;if(e.size>x){g.error("El archivo no puede ser mayor a 5MB"),n.target.value="";return}r.foto=e,c.value=URL.createObjectURL(e)},_=()=>{r.foto=null,c.value=null;const n=document.querySelector('input[type="file"]');n&&(n.value="")},C=()=>{h.visit(route("carros.index"))},N=async()=>{if(!v.value){v.value=!0;try{const n=new FormData;Object.keys(r).forEach(e=>{e==="foto"&&r[e]?n.append(e,r[e]):e!=="foto"&&n.append(e,r[e]||"")}),n.append("_method","PUT"),await h.post(route("carros.update",i.carro.id),n,{forceFormData:!0,onSuccess:e=>{g.success("¡El carro ha sido actualizado exitosamente!"),c.value&&(URL.revokeObjectURL(c.value),c.value=null)},onError:e=>{console.error("Errores de validación:",e);const s=Object.values(e).flat();s.length>0?s.forEach(x=>{g.error(x)}):g.error("Hubo errores en el formulario. Por favor revisa los campos.")},onFinish:()=>{v.value=!1}})}catch(n){console.error("Error inesperado:",n),g.error("Ocurrió un error inesperado. Por favor intenta de nuevo."),v.value=!1}}};return(n,e)=>(a(),l(A,null,[F(M(U),{title:"Editar Carro"}),o("div",z,[e[26]||(e[26]=o("div",{class:"mb-6"},[o("h1",{class:"text-3xl font-bold text-gray-900"},"Editar Carro"),o("p",{class:"text-gray-600 mt-2"},"Actualiza la información del vehículo")],-1)),o("div",q,[o("form",{onSubmit:B(N,["prevent"]),class:"space-y-6"},[o("div",D,[o("div",null,[e[9]||(e[9]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Marca "),o("span",{class:"text-red-500"},"*")],-1)),m(o("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.marca=s),type:"text",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200",{"border-red-500":t.value.marca}]),placeholder:"Ej: Toyota, Ford, BMW",required:""},null,2),[[f,r.marca]]),t.value.marca?(a(),l("p",O,d(t.value.marca),1)):u("",!0)]),o("div",null,[e[10]||(e[10]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Modelo "),o("span",{class:"text-red-500"},"*")],-1)),m(o("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>r.modelo=s),type:"text",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200",{"border-red-500":t.value.modelo}]),placeholder:"Ej: Corolla, Focus, X3",required:""},null,2),[[f,r.modelo]]),t.value.modelo?(a(),l("p",H,d(t.value.modelo),1)):u("",!0)])]),o("div",L,[o("div",null,[e[11]||(e[11]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Año "),o("span",{class:"text-red-500"},"*")],-1)),m(o("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.anio=s),type:"number",min:1900,max:new Date().getFullYear()+1,class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200",{"border-red-500":t.value.anio}]),placeholder:"2020",required:""},null,10,T),[[f,r.anio,void 0,{number:!0}]]),t.value.anio?(a(),l("p",J,d(t.value.anio),1)):u("",!0)]),o("div",null,[e[12]||(e[12]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Color "),o("span",{class:"text-red-500"},"*")],-1)),m(o("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>r.color=s),type:"text",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200",{"border-red-500":t.value.color}]),placeholder:"Ej: Blanco, Negro, Rojo",required:""},null,2),[[f,r.color]]),t.value.color?(a(),l("p",R,d(t.value.color),1)):u("",!0)]),o("div",null,[e[14]||(e[14]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Precio "),o("span",{class:"text-red-500"},"*")],-1)),o("div",I,[e[13]||(e[13]=o("span",{class:"absolute left-3 top-2 text-gray-500"},"$",-1)),m(o("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>r.precio=s),type:"number",step:"0.01",min:"0",class:p(["w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200",{"border-red-500":t.value.precio}]),placeholder:"15000.00",required:""},null,2),[[f,r.precio,void 0,{number:!0}]])]),t.value.precio?(a(),l("p",X,d(t.value.precio),1)):u("",!0)])]),o("div",K,[o("div",null,[e[15]||(e[15]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Número de Serie "),o("span",{class:"text-red-500"},"*")],-1)),m(o("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>r.numero_serie=s),type:"text",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200",{"border-red-500":t.value.numero_serie}]),placeholder:"Ej: 1HGBH41JXMN109186",required:""},null,2),[[f,r.numero_serie]]),t.value.numero_serie?(a(),l("p",Y,d(t.value.numero_serie),1)):u("",!0)]),o("div",null,[e[17]||(e[17]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Combustible "),o("span",{class:"text-red-500"},"*")],-1)),m(o("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>r.combustible=s),class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200",{"border-red-500":t.value.combustible}]),required:""},e[16]||(e[16]=[w('<option value="">Selecciona el tipo de combustible</option><option value="Gasolina">Gasolina</option><option value="Diésel">Diésel</option><option value="Eléctrico">Eléctrico</option><option value="Híbrido">Híbrido</option><option value="Gas Natural">Gas Natural</option>',6)]),2),[[P,r.combustible]]),t.value.combustible?(a(),l("p",W,d(t.value.combustible),1)):u("",!0)])]),o("div",Z,[o("div",null,[e[19]||(e[19]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kilometraje",-1)),o("div",$,[m(o("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>r.kilometraje=s),type:"number",min:"0",class:p(["w-full px-3 py-2 pr-12 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200",{"border-red-500":t.value.kilometraje}]),placeholder:"150000"},null,2),[[f,r.kilometraje,void 0,{number:!0}]]),e[18]||(e[18]=o("span",{class:"absolute right-3 top-2 text-gray-500 text-sm"},"km",-1))]),t.value.kilometraje?(a(),l("p",Q,d(t.value.kilometraje),1)):u("",!0)]),o("div",null,[e[20]||(e[20]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Placa",-1)),m(o("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>r.placa=s),type:"text",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 uppercase",{"border-red-500":t.value.placa}]),placeholder:"ABC-1234",maxlength:"8"},null,2),[[f,r.placa]]),t.value.placa?(a(),l("p",ee,d(t.value.placa),1)):u("",!0)])]),o("div",oe,[e[24]||(e[24]=o("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Foto del Vehículo",-1)),i.carro.foto&&!c.value?(a(),l("div",te,[e[21]||(e[21]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Foto Actual",-1)),o("div",re,[o("img",{src:i.carro.foto,alt:"Foto actual del carro",class:"w-48 h-32 object-cover rounded-lg border border-gray-300 shadow-sm"},null,8,se)])])):u("",!0),o("div",le,[o("label",ae,d(i.carro.foto?"Cambiar Foto":"Subir Foto"),1),o("div",ie,[o("label",ne,[e[22]||(e[22]=w('<div class="flex flex-col items-center justify-center pt-5 pb-6"><svg class="w-8 h-8 mb-4 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg><p class="mb-2 text-sm text-gray-500"><span class="font-semibold">Click para subir</span> o arrastra y suelta </p><p class="text-xs text-gray-500">PNG, JPG o JPEG (MAX. 5MB)</p></div>',1)),o("input",{type:"file",class:"hidden",onChange:j,accept:"image/*"},null,32)])]),t.value.foto?(a(),l("p",ue,d(t.value.foto),1)):u("",!0)]),c.value?(a(),l("div",de,[e[23]||(e[23]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Vista Previa",-1)),o("div",ce,[o("img",{src:c.value,alt:"Vista previa",class:"w-48 h-32 object-cover rounded-lg border border-gray-300 shadow-sm"},null,8,me),o("button",{type:"button",onClick:_,class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 transition duration-200"}," × ")])])):u("",!0)]),o("div",pe,[o("button",{type:"button",onClick:C,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-200"}," Cancelar "),o("button",{type:"submit",disabled:v.value,class:"px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition duration-200"},[v.value?(a(),l("span",fe,e[25]||(e[25]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),b(" Actualizando... ")]))):(a(),l("span",ge,"Actualizar Carro"))],8,be)])],32)])])],64))}});export{ke as default};
