import{T as w,p as C,b as V,o as a,e as u,f as e,q as N,i as d,k as c,t as i,v as b,u as s,F as S,m as D,x as F,n as f,z as g,g as x,A as y,l as p}from"./vendor-d19pJyVS.js";import{A as M}from"./AppLayout-CcnrZQKI.js";import"./utils-Dq7h7Pqt.js";import"./app-BcT2PLJy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"flex justify-between items-center"},z={class:"py-12"},A={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},B={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},U={class:"p-6 bg-white border-b border-gray-200"},j={key:0,class:"mb-6"},q={class:"bg-gray-50 p-4 rounded-lg"},E={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},I={class:"mt-1 text-sm text-gray-900"},L={class:"mt-1 text-sm text-gray-900"},X={class:"mt-1 text-sm text-gray-900"},G={class:"mt-1 text-sm text-gray-900"},H={key:1,class:"mb-6"},J=["value"],K={key:0,class:"mt-2 text-sm text-red-600"},P={class:"mb-6"},Q={key:0,class:"mt-2 text-sm text-red-600"},R={class:"mb-6"},W={key:0,class:"mt-2 text-sm text-red-600"},Y={class:"mb-6"},Z={key:0,class:"mt-2 text-sm text-red-600"},$={class:"flex items-center justify-end"},O=["disabled"],tt={key:0},et={key:1},it={__name:"Create",props:{venta:Object,ventas:Array},setup(l){const m=l,o=w({venta_id:m.venta?m.venta.id:"",monto_total:m.venta?m.venta.total:"",fecha_vencimiento:"",notas:""}),_=new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}),h=r=>{if(r==null)return 0;const t=Number(r);return Number.isFinite(t)?t:0},v=r=>_.format(h(r)),k=()=>{o.post(route("cuentas-por-cobrar.store"),{onSuccess:()=>{},onError:r=>{console.error("Errores:",r)}})};return C(()=>{const r=new Date;r.setDate(r.getDate()+30),o.fecha_vencimiento=r.toISOString().split("T")[0],m.venta&&(o.venta_id=m.venta.id,o.monto_total=m.venta.total)}),(r,t)=>(a(),V(M,{title:"Crear Cuenta por Cobrar"},{header:u(()=>[e("div",T,[t[5]||(t[5]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Crear Cuenta por Cobrar ",-1)),x(s(y),{href:r.route("cuentas-por-cobrar.index"),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"},{default:u(()=>t[4]||(t[4]=[p(" Cancelar ")])),_:1},8,["href"])])]),default:u(()=>[e("div",z,[e("div",A,[e("div",B,[e("div",U,[e("form",{onSubmit:N(k,["prevent"])},[l.venta?(a(),d("div",j,[t[10]||(t[10]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Información de la Venta",-1)),e("div",q,[e("div",E,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Número de Venta",-1)),e("p",I,i(l.venta.numero_venta),1)]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),e("p",L,i(l.venta.cliente.nombre_razon_social),1)]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700"},"Total de la Venta",-1)),e("p",X,i(v(l.venta.total)),1)]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Fecha",-1)),e("p",G,i(new Date(l.venta.created_at).toLocaleDateString()),1)])])])])):c("",!0),l.venta?c("",!0):(a(),d("div",H,[t[12]||(t[12]=e("label",{for:"venta_id",class:"block text-sm font-medium text-gray-700"}," Seleccionar Venta ",-1)),b(e("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>s(o).venta_id=n),id:"venta_id",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",required:""},[t[11]||(t[11]=e("option",{value:""},"Seleccione una venta",-1)),(a(!0),d(S,null,D(l.ventas,n=>(a(),d("option",{key:n.id,value:n.id},i(n.numero_venta)+" - "+i(n.cliente.nombre_razon_social)+" ("+i(v(n.total))+") ",9,J))),128))],512),[[F,s(o).venta_id]]),s(o).errors.venta_id?(a(),d("p",K,i(s(o).errors.venta_id),1)):c("",!0)])),e("div",P,[t[13]||(t[13]=e("label",{for:"monto_total",class:"block text-sm font-medium text-gray-700"}," Monto Total ",-1)),b(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>s(o).monto_total=n),type:"number",step:"0.01",id:"monto_total",class:f(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s(o).errors.monto_total}]),required:""},null,2),[[g,s(o).monto_total]]),s(o).errors.monto_total?(a(),d("p",Q,i(s(o).errors.monto_total),1)):c("",!0)]),e("div",R,[t[14]||(t[14]=e("label",{for:"fecha_vencimiento",class:"block text-sm font-medium text-gray-700"}," Fecha de Vencimiento ",-1)),b(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>s(o).fecha_vencimiento=n),type:"date",id:"fecha_vencimiento",class:f(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s(o).errors.fecha_vencimiento}])},null,2),[[g,s(o).fecha_vencimiento]]),t[15]||(t[15]=e("p",{class:"mt-1 text-sm text-gray-500"}," Opcional. Si no se especifica, se establecerá automáticamente en 30 días. ",-1)),s(o).errors.fecha_vencimiento?(a(),d("p",W,i(s(o).errors.fecha_vencimiento),1)):c("",!0)]),e("div",Y,[t[16]||(t[16]=e("label",{for:"notas",class:"block text-sm font-medium text-gray-700"}," Notas ",-1)),b(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=n=>s(o).notas=n),id:"notas",rows:"4",class:f(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":s(o).errors.notas}]),placeholder:"Notas adicionales sobre la cuenta por cobrar..."},null,2),[[g,s(o).notas]]),s(o).errors.notas?(a(),d("p",Z,i(s(o).errors.notas),1)):c("",!0)]),e("div",$,[x(s(y),{href:r.route("cuentas-por-cobrar.index"),class:"mr-4 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded"},{default:u(()=>t[17]||(t[17]=[p(" Cancelar ")])),_:1},8,["href"]),e("button",{type:"submit",disabled:s(o).processing,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50"},[s(o).processing?(a(),d("span",tt,"Creando...")):(a(),d("span",et,"Crear Cuenta por Cobrar"))],8,O)])],32)])])])])]),_:1}))}};export{it as default};
