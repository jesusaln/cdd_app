import{T as C,c as w,i as l,o as d,g as c,f as e,u as r,Z as M,t as n,q as j,l as u,v as p,z as m,x as $,n as b,F as k,m as z,k as h,e as B,A as D}from"./vendor-d19pJyVS.js";import{_ as f}from"./InputError-DR3j2HKb.js";import{N as E}from"./app-BcT2PLJy.js";import{A as N}from"./AppLayout-CcnrZQKI.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Dq7h7Pqt.js";const A={class:"min-h-screen bg-gradient-to-br from-slate-50 to-green-50 py-12 px-4 sm:px-6 lg:px-8"},F={class:"max-w-2xl mx-auto"},O={class:"text-center mb-8"},T={class:"text-3xl font-bold text-gray-900 mb-2"},U={class:"text-gray-600"},L={class:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden"},H={class:"space-y-6"},q={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},R={class:"flex items-center"},Z={class:"text-sm font-medium text-blue-800"},G={class:"text-xs text-blue-600"},J={key:1,class:"form-group"},K=["value"],P={class:"space-y-6"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},W={class:"form-group"},X=["min"],Y={class:"form-group"},ee=["min"],oe={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},se={class:"flex items-center justify-between"},re={class:"flex items-center"},te={class:"text-sm text-green-800"},ie={class:"text-xs text-green-600"},ae={key:1,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},ne={class:"flex items-center justify-between"},le={class:"flex items-center"},de={class:"text-sm text-blue-800"},ce={key:0,class:"flex items-center"},ue={key:0,class:"text-green-600 text-sm"},pe={key:1,class:"text-red-600 text-sm"},me={class:"form-group"},fe={class:"pt-6 border-t border-gray-200"},ge={class:"flex flex-col sm:flex-row gap-4 justify-end"},be=["disabled"],he={key:0,class:"flex items-center"},ve={key:1,class:"flex items-center"},xe=Object.assign({layout:N,inheritAttrs:!1},{__name:"Create",props:{empleados:Array,empleadoSeleccionado:Object,registroVacaciones:Object},setup(v){var y;const t=v,x=new E({duration:3e3,position:{x:"right",y:"top"},ripple:!0,dismissible:!0}),_=new Date().toISOString().split("T")[0],s=C({user_id:((y=t.empleadoSeleccionado)==null?void 0:y.id)||"",fecha_inicio:"",fecha_fin:"",motivo:""}),g=w(()=>{if(!s.fecha_inicio||!s.fecha_fin)return 0;try{const a=new Date(s.fecha_inicio),o=new Date(s.fecha_fin),i=Math.abs(o-a);return Math.ceil(i/(1e3*60*60*24))+1}catch{return 0}}),S=w(()=>s.user_id&&s.fecha_inicio&&s.fecha_fin&&s.fecha_inicio<=s.fecha_fin),V=()=>{s.post(route("vacaciones.store"),{onSuccess:()=>{const a=t.empleadoSeleccionado?t.empleadoSeleccionado.name:"el empleado";x.success(`Solicitud de vacaciones para ${a} enviada exitosamente.`),s.reset()},onError:a=>{console.log("Errores:",a),x.error("Error al enviar la solicitud. Revisa los campos.");const o=Object.keys(a)[0];if(o){const i=document.getElementById(o);i&&(i.scrollIntoView({behavior:"smooth",block:"center"}),i.focus())}}})};return(a,o)=>(d(),l(k,null,[c(r(M),{title:t.empleadoSeleccionado&&a.$page.props.auth.user&&t.empleadoSeleccionado.id===a.$page.props.auth.user.id?"Solicitar Vacaciones":t.empleadoSeleccionado?`Vacaciones para ${t.empleadoSeleccionado.name}`:"Nueva Solicitud de Vacaciones"},null,8,["title"]),e("div",A,[e("div",F,[e("div",O,[o[5]||(o[5]=e("div",{class:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("h1",T,n(t.empleadoSeleccionado&&a.$page.props.auth.user&&t.empleadoSeleccionado.id===a.$page.props.auth.user.id?"Solicitar Vacaciones":t.empleadoSeleccionado?`Vacaciones para ${t.empleadoSeleccionado.name}`:"Nueva Solicitud de Vacaciones"),1),e("p",U,n(t.empleadoSeleccionado&&a.$page.props.auth.user&&t.empleadoSeleccionado.id===a.$page.props.auth.user.id?"Completa la información para solicitar tus vacaciones":t.empleadoSeleccionado?"Crear vacaciones para el empleado seleccionado":"Completa la información para solicitar vacaciones"),1)]),e("div",L,[e("form",{onSubmit:j(V,["prevent"]),class:"p-8 space-y-8"},[e("div",H,[o[10]||(o[10]=e("div",{class:"border-b border-gray-200 pb-4"},[e("h2",{class:"text-lg font-semibold text-gray-900 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),u(" Información del Empleado ")])],-1)),t.empleadoSeleccionado&&a.$page.props.auth.user&&t.empleadoSeleccionado.id===a.$page.props.auth.user.id?(d(),l("div",q,[e("div",R,[o[7]||(o[7]=e("svg",{class:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),e("div",null,[e("p",Z,[o[6]||(o[6]=u(" Creando vacaciones para: ")),e("strong",null,n(t.empleadoSeleccionado.name)+" "+n(t.empleadoSeleccionado.apellido_paterno),1)]),e("p",G,n(t.empleadoSeleccionado.puesto),1)])]),p(e("input",{type:"hidden","onUpdate:modelValue":o[0]||(o[0]=i=>r(s).user_id=i)},null,512),[[m,r(s).user_id]])])):(d(),l("div",J,[o[9]||(o[9]=e("label",{for:"user_id",class:"block text-sm font-semibold text-gray-700 mb-2"}," Empleado * ",-1)),p(e("select",{"onUpdate:modelValue":o[1]||(o[1]=i=>r(s).user_id=i),id:"user_id",class:b(["block w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white",{"border-red-300 bg-red-50 focus:ring-red-500":r(s).errors.user_id,"border-green-300 bg-green-50":r(s).user_id&&!r(s).errors.user_id}])},[o[8]||(o[8]=e("option",{value:"",disabled:""},"Seleccionar empleado",-1)),(d(!0),l(k,null,z(v.empleados,i=>(d(),l("option",{key:i.id,value:i.id},n(i.name)+" "+n(i.apellido_paterno)+" - "+n(i.puesto),9,K))),128))],2),[[$,r(s).user_id]]),c(f,{class:"mt-2",message:r(s).errors.user_id},null,8,["message"])]))]),e("div",P,[o[18]||(o[18]=e("div",{class:"border-b border-gray-200 pb-4"},[e("h2",{class:"text-lg font-semibold text-gray-900 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),u(" Información de Vacaciones ")])],-1)),e("div",Q,[e("div",W,[o[11]||(o[11]=e("label",{for:"fecha_inicio",class:"block text-sm font-semibold text-gray-700 mb-2"}," Fecha de Inicio * ",-1)),p(e("input",{"onUpdate:modelValue":o[2]||(o[2]=i=>r(s).fecha_inicio=i),type:"date",id:"fecha_inicio",min:r(_),class:b(["block w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white",{"border-red-300 bg-red-50 focus:ring-red-500":r(s).errors.fecha_inicio,"border-green-300 bg-green-50":r(s).fecha_inicio&&!r(s).errors.fecha_inicio}])},null,10,X),[[m,r(s).fecha_inicio]]),c(f,{class:"mt-2",message:r(s).errors.fecha_inicio},null,8,["message"])]),e("div",Y,[o[12]||(o[12]=e("label",{for:"fecha_fin",class:"block text-sm font-semibold text-gray-700 mb-2"}," Fecha de Fin * ",-1)),p(e("input",{"onUpdate:modelValue":o[3]||(o[3]=i=>r(s).fecha_fin=i),type:"date",id:"fecha_fin",min:r(s).fecha_inicio||r(_),class:b(["block w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white",{"border-red-300 bg-red-50 focus:ring-red-500":r(s).errors.fecha_fin,"border-green-300 bg-green-50":r(s).fecha_fin&&!r(s).errors.fecha_fin}])},null,10,ee),[[m,r(s).fecha_fin]]),c(f,{class:"mt-2",message:r(s).errors.fecha_fin},null,8,["message"])])]),t.empleadoSeleccionado&&t.registroVacaciones?(d(),l("div",oe,[e("div",se,[e("div",re,[o[14]||(o[14]=e("svg",{class:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[e("p",te,[o[13]||(o[13]=u(" Días disponibles: ")),e("strong",null,n(t.registroVacaciones.dias_disponibles),1)]),e("p",ie," Año "+n(t.registroVacaciones.anio)+" • "+n(t.registroVacaciones.dias_correspondientes)+" días correspondientes ",1)])])])])):h("",!0),r(s).fecha_inicio&&r(s).fecha_fin?(d(),l("div",ae,[e("div",ne,[e("div",le,[o[16]||(o[16]=e("svg",{class:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",de,[o[15]||(o[15]=u(" Días solicitados: ")),e("strong",null,n(g.value),1)])]),t.registroVacaciones?(d(),l("div",ce,[g.value<=t.registroVacaciones.dias_disponibles?(d(),l("span",ue," ✅ Disponibles ")):(d(),l("span",pe," ❌ Insuficientes (necesitas "+n(g.value-t.registroVacaciones.dias_disponibles)+" más) ",1))])):h("",!0)])])):h("",!0),e("div",me,[o[17]||(o[17]=e("label",{for:"motivo",class:"block text-sm font-semibold text-gray-700 mb-2"}," Motivo ",-1)),p(e("textarea",{"onUpdate:modelValue":o[4]||(o[4]=i=>r(s).motivo=i),id:"motivo",rows:"3",class:"block w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Describe el motivo de las vacaciones (opcional)"},null,512),[[m,r(s).motivo]]),c(f,{class:"mt-2",message:r(s).errors.motivo},null,8,["message"])])]),e("div",fe,[e("div",ge,[c(r(D),{href:t.empleadoSeleccionado&&a.$page.props.auth.user&&t.empleadoSeleccionado.id===a.$page.props.auth.user.id?a.route("vacaciones.mis-vacaciones"):a.route("vacaciones.index"),class:"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-gray-300 rounded-xl text-gray-700 bg-white hover:bg-gray-50 font-semibold transition-all duration-200 hover:shadow-md"},{default:B(()=>o[19]||(o[19]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),u(" Cancelar ")])),_:1},8,["href"]),e("button",{type:"submit",class:"w-full sm:w-auto inline-flex justify-center items-center px-8 py-3 bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white font-semibold rounded-xl transition-all duration-200 hover:shadow-lg transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:hover:shadow-none",disabled:r(s).processing||!S.value},[r(s).processing?(d(),l("div",he,o[20]||(o[20]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",null,"Enviando Solicitud...",-1)]))):(d(),l("div",ve,o[21]||(o[21]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1),e("span",null,"Enviar Solicitud",-1)])))],8,be)])])],32)])])])],64))}}),Me=I(xe,[["__scopeId","data-v-eb6498fb"]]);export{Me as default};
