import{Q as ue,p as ce,r as d,i as a,o as l,g as ge,f as e,u as me,Z as pe,k as m,t as r,n as p,v as N,z as ve,x as G,s as F,F as C,m as L,l as M,q as $,N as v}from"./vendor-d19pJyVS.js";import{A as xe}from"./AppLayout-CcnrZQKI.js";import{N as be}from"./app-BcT2PLJy.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Dq7h7Pqt.js";const ye={class:"database-backup-index min-h-screen bg-gray-50"},he={class:"max-w-8xl mx-auto px-6 py-8"},we={class:"bg-white border border-slate-200 rounded-xl shadow-sm p-8 mb-6"},ke={class:"flex flex-col lg:flex-row gap-8 items-start lg:items-center justify-between"},Ce={class:"flex flex-col gap-6 w-full lg:w-auto"},Me={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},je=["disabled"],_e={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Be={key:1,class:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ze={class:"text-sm font-medium"},Le={class:"flex flex-wrap items-center gap-4 text-sm"},Se={class:"flex items-center gap-2 px-4 py-3 bg-slate-50 rounded-xl border border-slate-200"},Ee={class:"font-bold text-slate-900 text-lg"},Ve={class:"flex items-center gap-2 px-4 py-3 bg-green-50 rounded-xl border border-green-200"},Ae={class:"font-bold text-green-700 text-lg"},De={class:"flex items-center gap-2 px-4 py-3 bg-blue-50 rounded-xl border border-blue-200"},He={class:"font-bold text-blue-700 text-lg"},Ne={class:"flex items-center gap-2 px-4 py-3 bg-yellow-50 rounded-xl border border-yellow-200"},Fe={class:"font-bold text-yellow-700 text-lg"},$e={class:"flex items-center gap-2 px-4 py-3 bg-green-50 rounded-xl border border-green-200"},Pe={class:"flex items-center gap-2 px-4 py-3 bg-purple-50 rounded-xl border border-purple-200"},Te={class:"font-bold text-purple-700 text-lg"},Re={class:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto lg:flex-shrink-0"},Oe={class:"relative"},Ue={key:0,class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-6"},Ie={class:"p-6"},qe={key:0,class:"flex items-center justify-center py-8"},Ze={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ge={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200"},Xe={class:"text-2xl font-bold text-green-700 mb-1"},Ke={class:"text-sm text-green-600"},Qe={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200"},Je={class:"text-2xl font-bold text-blue-700 mb-1"},We={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200"},Ye={class:"text-2xl font-bold text-purple-700 mb-1"},et={key:0,class:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4 border border-orange-200"},tt={class:"text-lg font-bold text-orange-700 mb-1"},ot={class:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-lg p-4 border border-teal-200"},st={class:"text-2xl font-bold text-teal-700 mb-1"},rt={key:1,class:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4 border border-red-200"},at={class:"text-lg font-bold text-red-700 mb-1"},lt={key:2,class:"mt-6"},nt={class:"space-y-3"},it={class:"flex items-start"},dt={class:"flex-shrink-0"},ut={key:0,class:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ct={key:1,class:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},gt={class:"ml-3 flex-1"},mt={key:3,class:"mt-6"},pt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vt={class:"flex items-start justify-between mb-2"},xt={class:"text-sm font-medium text-gray-900"},bt={class:"text-sm text-gray-600 mb-2"},ft={class:"text-xs text-gray-500"},yt={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},ht={class:"overflow-x-auto"},wt={class:"min-w-full divide-y divide-gray-200"},kt={class:"bg-white divide-y divide-gray-200"},Ct={class:"px-6 py-4"},Mt={class:"text-sm font-medium text-gray-900"},jt={class:"px-6 py-4"},_t={class:"text-sm text-gray-900"},Bt={class:"text-xs text-gray-500"},zt={class:"px-6 py-4"},Lt={class:"text-sm text-gray-700"},St={class:"px-6 py-4"},Et={class:"px-6 py-4 text-right"},Vt={class:"flex items-center justify-end space-x-1"},At=["onClick"],Dt=["onClick"],Ht=["onClick"],Nt={key:0},Ft={key:0,class:"bg-white border-t border-gray-200 px-4 py-3 sm:px-6"},$t={class:"flex flex-col sm:flex-row items-center justify-between gap-4"},Pt={class:"flex items-center gap-4"},Tt={class:"text-sm text-gray-700"},Rt=["value"],Ot={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},Ut={key:1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-gray-100 text-sm font-medium text-gray-400"},It=["onClick"],qt={key:3,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-gray-100 text-sm font-medium text-gray-400"},Zt={class:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto"},Gt={class:"flex items-center justify-between p-6 border-b border-gray-200"},Xt={class:"p-6"},Kt={class:"text-center"},Qt={class:"text-sm text-gray-500 mb-4"},Jt={class:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50"},Wt={class:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto"},Yt={class:"flex items-center justify-between p-6 border-b border-gray-200"},eo={class:"p-6"},to={class:"text-center"},oo={class:"text-sm text-gray-500 mb-4"},so={class:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50"},ro={class:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto"},ao={class:"flex items-center justify-between p-6 border-b border-gray-200"},lo={class:"p-6"},no={class:"text-center"},io={class:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50"},uo=Object.assign({layout:xe},{__name:"Index",props:{backups:{type:Array,default:()=>[]},stats:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({})},sorting:{type:Object,default:()=>({sort_by:"created_at",sort_direction:"desc"})},pagination:{type:Object,default:()=>({})},mysqldump_available:{type:Boolean,default:!1},total_backups:{type:Number,default:0},total_size:{type:Number,default:0}},setup(n){var R;const u=new be({duration:4e3,position:{x:"right",y:"top"},types:[{type:"success",background:"#10b981",icon:!1},{type:"error",background:"#ef4444",icon:!1},{type:"warning",background:"#f59e0b",icon:!1}]}),X=ue();ce(()=>{const o=X.props.flash;o!=null&&o.success&&u.success(o.success),o!=null&&o.error&&u.error(o.error)});const x=n,S=d(100),P=d(100),i=d({}),y=d(!1),b=d(!1),f=d(!1),j=d(!1),_=d(!1),E=d(!1),B=d(((R=x.filters)==null?void 0:R.search)??""),h=d("created_at-desc"),z=d({name:"",compress:!0,include_structure_only:!1}),V=d({daysOld:30}),c=d({show:!1,backup:null}),g=d({show:!1,backup:null});function K(o){var t;B.value=o,v.get(route("backup.index"),{search:o,sort_by:h.value.split("-")[0],sort_direction:h.value.split("-")[1]||"desc",per_page:((t=x.pagination)==null?void 0:t.per_page)||10,page:1},{preserveState:!0,preserveScroll:!0})}function Q(o){var t;h.value=o,v.get(route("backup.index"),{search:B.value,sort_by:o.split("-")[0],sort_direction:o.split("-")[1]||"desc",per_page:((t=x.pagination)==null?void 0:t.per_page)||10,page:1},{preserveState:!0,preserveScroll:!0})}const J=o=>{v.get(route("backup.index"),{...x.filters,...x.sorting,per_page:o,page:1},{preserveState:!0,preserveScroll:!0})},A=o=>{v.get(route("backup.index"),{...x.filters,...x.sorting,page:o},{preserveState:!0,preserveScroll:!0})},W=async()=>{if(!f.value){f.value=!0;try{const o=new FormData;o.append("name",z.value.name||""),o.append("compress",z.value.compress?"1":"0"),o.append("include_structure_only",z.value.include_structure_only?"1":"0"),await v.post(route("backup.create"),o,{onSuccess:()=>{z.value={name:"",compress:!0,include_structure_only:!1},u.success("Copia de seguridad creada exitosamente")},onError:t=>{console.error("Error creating backup:",t),u.error("Error al crear la copia de seguridad")},onFinish:()=>{f.value=!1}})}catch(o){console.error("Unexpected error:",o),f.value=!1}}},Y=o=>{c.value.backup=o,c.value.show=!0},ee=async()=>{if(!(j.value||!c.value.backup)){j.value=!0;try{await v.post(route("backup.restore",{filename:c.value.backup.name}),{},{onSuccess:()=>{c.value.show=!1,c.value.backup=null,u.success("Base de datos restaurada exitosamente")},onError:o=>{console.error("Error restoring backup:",o),u.error("Error al restaurar la base de datos")},onFinish:()=>{j.value=!1}})}catch(o){console.error("Unexpected error:",o),j.value=!1}}},te=o=>{g.value.backup=o,g.value.show=!0},oe=async()=>{if(!(_.value||!g.value.backup)){_.value=!0;try{await v.delete(route("backup.delete",{filename:g.value.backup.name}),{onSuccess:()=>{g.value.show=!1,g.value.backup=null,u.success("Copia de seguridad eliminada exitosamente")},onError:o=>{console.error("Error deleting backup:",o),u.error("Error al eliminar la copia de seguridad")},onFinish:()=>{_.value=!1}})}catch(o){console.error("Unexpected error:",o),_.value=!1}}},se=async()=>{if(b.value)try{const o=new FormData;o.append("days_old",V.value.daysOld.toString()),await v.post(route("backup.clean"),o,{onSuccess:()=>{b.value=!1,u.success("Copias antiguas eliminadas exitosamente")},onError:t=>{console.error("Error cleaning backups:",t),u.error("Error al limpiar las copias antiguas")}})}catch(o){console.error("Unexpected error:",o)}},re=o=>{const t=document.createElement("a");t.href=route("backup.download",{filename:o.name}),t.download=o.name,document.body.appendChild(t),t.click(),document.body.removeChild(t),u.success("Descarga iniciada")},ae=async()=>{E.value=!0;try{const o=await fetch(route("backup.monitoring"));o.ok&&(i.value=await o.json(),i.value.success&&(S.value=i.value.monitoring.overview.health_score||100,P.value=i.value.monitoring.overview.success_rate_30d||100));const t=await fetch(route("backup.security.stats"));t.ok&&(await t.json()).success}catch(o){console.error("Error loading advanced metrics:",o)}finally{E.value=!1}},le=()=>{y.value=!y.value,y.value&&ae()},ne=o=>o>=90?"text-green-700":o>=75?"text-yellow-700":o>=60?"text-orange-700":"text-red-700",D=o=>new Intl.NumberFormat("es-ES").format(o),ie=o=>{if(!o)return"Fecha no disponible";try{return new Date(o).toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return"Fecha inválida"}},de=o=>{if(!o)return"Hora no disponible";try{return new Date(o).toLocaleTimeString("es-MX",{hour:"2-digit",minute:"2-digit"})}catch{return"Hora inválida"}},T=o=>{if(!o||o===0)return"0 B";const t=1024,w=["B","KB","MB","GB","TB"],k=Math.floor(Math.log(o)/Math.log(t));return parseFloat((o/Math.pow(t,k)).toFixed(2))+" "+w[k]};return(o,t)=>{var w,k,O,U,I,q,Z;return l(),a(C,null,[ge(me(pe),{title:"Copias de Seguridad"}),e("div",ye,[e("div",he,[e("div",we,[e("div",ke,[e("div",Ce,[t[34]||(t[34]=e("div",{class:"flex items-center gap-3"},[e("h1",{class:"text-2xl font-bold text-slate-900"},"Copias de Seguridad")],-1)),e("div",Me,[e("button",{onClick:W,disabled:f.value,class:"inline-flex items-center gap-2.5 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(l(),a("svg",Be,t[19]||(t[19]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):(l(),a("svg",_e,t[18]||(t[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"},null,-1)]))),e("span",null,r(f.value?"Creando...":"Nueva Copia"),1)],8,je),e("button",{onClick:t[0]||(t[0]=s=>b.value=!0),class:"inline-flex items-center gap-2 px-4 py-3 bg-red-50 text-red-700 rounded-xl hover:bg-red-100 transition-all duration-200 border border-red-200"},t[20]||(t[20]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),e("span",{class:"text-sm font-medium"},"Limpiar Antiguos",-1)])),e("button",{onClick:le,class:p([y.value?"bg-blue-100 text-blue-800":"bg-blue-50 text-blue-700","inline-flex items-center gap-2 px-4 py-3 rounded-xl hover:bg-blue-100 transition-all duration-200 border border-blue-200"])},[t[21]||(t[21]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)),e("span",ze,r(y.value?"Ocultar Métricas":"Ver Métricas"),1)],2)]),e("div",Le,[e("div",Se,[t[22]||(t[22]=e("svg",{class:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})],-1)),t[23]||(t[23]=e("span",{class:"font-medium text-slate-700"},"Total:",-1)),e("span",Ee,r(D(n.stats.total)),1)]),e("div",Ve,[t[24]||(t[24]=e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),t[25]||(t[25]=e("span",{class:"font-medium text-slate-700"},"Comprimidos:",-1)),e("span",Ae,r(D(n.stats.compressed)),1)]),e("div",De,[t[26]||(t[26]=e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t[27]||(t[27]=e("span",{class:"font-medium text-slate-700"},"Sin Comprimir:",-1)),e("span",He,r(D(n.stats.uncompressed)),1)]),e("div",Ne,[t[28]||(t[28]=e("svg",{class:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),t[29]||(t[29]=e("span",{class:"font-medium text-slate-700"},"Tamaño Total:",-1)),e("span",Fe,r(T(n.stats.total_size)),1)]),e("div",$e,[t[30]||(t[30]=e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[31]||(t[31]=e("span",{class:"font-medium text-slate-700"},"Salud Sistema:",-1)),e("span",{class:p([ne(S.value),"font-bold text-lg"])},r(S.value)+"%",3)]),e("div",Pe,[t[32]||(t[32]=e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),t[33]||(t[33]=e("span",{class:"font-medium text-slate-700"},"Tasa Éxito:",-1)),e("span",Te,r(P.value)+"%",1)])])]),e("div",Re,[e("div",Oe,[N(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>B.value=s),onInput:t[2]||(t[2]=s=>K(s.target.value)),type:"text",placeholder:"Buscar por nombre...",class:"w-full sm:w-64 lg:w-80 pl-4 pr-10 py-3 border border-slate-300 rounded-xl bg-white text-slate-900 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all duration-200"},null,544),[[ve,B.value]]),t[35]||(t[35]=e("svg",{class:"absolute right-3 top-3.5 w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),N(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>h.value=s),onChange:t[4]||(t[4]=s=>Q(s.target.value)),class:"px-4 py-3 border border-slate-300 rounded-xl bg-white text-slate-900 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all duration-200"},t[36]||(t[36]=[F('<option value="created_at-desc" data-v-6eaad453>Más Recientes</option><option value="created_at-asc" data-v-6eaad453>Más Antiguos</option><option value="name-asc" data-v-6eaad453>Nombre A-Z</option><option value="name-desc" data-v-6eaad453>Nombre Z-A</option><option value="size-desc" data-v-6eaad453>Tamaño Mayor</option><option value="size-asc" data-v-6eaad453>Tamaño Menor</option>',6)]),544),[[G,h.value]])])])]),y.value?(l(),a("div",Ue,[t[54]||(t[54]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Métricas Avanzadas del Sistema"),e("p",{class:"text-sm text-gray-600 mt-1"},"Información detallada sobre el rendimiento y salud del sistema de respaldos")],-1)),e("div",Ie,[E.value?(l(),a("div",qe,t[37]||(t[37]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),e("span",{class:"ml-3 text-gray-600"},"Cargando métricas avanzadas...",-1)]))):i.value.monitoring?(l(),a("div",Ze,[e("div",Ge,[t[38]||(t[38]=e("div",{class:"flex items-center justify-between mb-2"},[e("h4",{class:"font-medium text-green-900"},"Salud General"),e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",Xe,r(i.value.monitoring.overview.health_score)+"%",1),e("div",Ke,r(i.value.monitoring.overview.system_health),1)]),e("div",Qe,[t[39]||(t[39]=e("div",{class:"flex items-center justify-between mb-2"},[e("h4",{class:"font-medium text-blue-900"},"Rendimiento"),e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",Je,r(i.value.monitoring.performance.avg_execution_time)+"s",1),t[40]||(t[40]=e("div",{class:"text-sm text-blue-600"},"Tiempo promedio",-1))]),e("div",We,[t[41]||(t[41]=e("div",{class:"flex items-center justify-between mb-2"},[e("h4",{class:"font-medium text-purple-900"},"Capacidad"),e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})])],-1)),e("div",Ye,r(i.value.monitoring.capacity.usage_percentage)+"%",1),t[42]||(t[42]=e("div",{class:"text-sm text-purple-600"},"Espacio utilizado",-1))]),i.value.monitoring.predictions.storage_growth?(l(),a("div",et,[t[43]||(t[43]=e("div",{class:"flex items-center justify-between mb-2"},[e("h4",{class:"font-medium text-orange-900"},"Crecimiento"),e("svg",{class:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})])],-1)),e("div",tt,r(i.value.monitoring.predictions.storage_growth.weekly_mb)+" MB/semana",1),t[44]||(t[44]=e("div",{class:"text-sm text-orange-600"},"Crecimiento estimado",-1))])):m("",!0),e("div",ot,[t[45]||(t[45]=e("div",{class:"flex items-center justify-between mb-2"},[e("h4",{class:"font-medium text-teal-900"},"Confiabilidad"),e("svg",{class:"w-5 h-5 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",st,r(i.value.monitoring.reliability.reliability_score)+"%",1),t[46]||(t[46]=e("div",{class:"text-sm text-teal-600"},"Puntuación de confiabilidad",-1))]),(w=i.value.monitoring.predictions.storage_growth)!=null&&w.time_to_full?(l(),a("div",rt,[t[47]||(t[47]=e("div",{class:"flex items-center justify-between mb-2"},[e("h4",{class:"font-medium text-red-900"},"Capacidad"),e("svg",{class:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",at,r(i.value.monitoring.predictions.storage_growth.time_to_full),1),t[48]||(t[48]=e("div",{class:"text-sm text-red-600"},"Tiempo hasta lleno",-1))])):m("",!0)])):m("",!0),((O=(k=i.value.monitoring)==null?void 0:k.alerts)==null?void 0:O.length)>0?(l(),a("div",lt,[t[51]||(t[51]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Alertas del Sistema",-1)),e("div",nt,[(l(!0),a(C,null,L(i.value.monitoring.alerts,s=>(l(),a("div",{key:s.timestamp,class:p([s.level==="critical"?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200","p-4 rounded-lg border"])},[e("div",it,[e("div",dt,[s.level==="critical"?(l(),a("svg",ut,t[49]||(t[49]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"},null,-1)]))):(l(),a("svg",ct,t[50]||(t[50]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"},null,-1)])))]),e("div",gt,[e("h5",{class:p(["text-sm font-medium",s.level==="critical"?"text-red-900":"text-yellow-900"])},r(s.message),3),e("p",{class:p(["text-sm mt-1",s.level==="critical"?"text-red-700":"text-yellow-700"])},r(s.description),3)])])],2))),128))])])):m("",!0),((I=(U=i.value.monitoring)==null?void 0:U.recommendations)==null?void 0:I.length)>0?(l(),a("div",mt,[t[53]||(t[53]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Recomendaciones",-1)),e("div",pt,[(l(!0),a(C,null,L(i.value.monitoring.recommendations,s=>(l(),a("div",{key:s.title,class:"bg-gray-50 rounded-lg p-4 border border-gray-200"},[e("div",vt,[e("h5",xt,r(s.title),1),e("span",{class:p([s.priority==="high"?"bg-red-100 text-red-800":s.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800","px-2 py-1 text-xs font-medium rounded-full"])},r(s.priority),3)]),e("p",bt,r(s.description),1),e("div",ft,[t[52]||(t[52]=e("span",{class:"font-medium"},"Esfuerzo estimado:",-1)),M(" "+r(s.estimated_effort),1)])]))),128))])])):m("",!0)])])):m("",!0),e("div",yt,[e("div",ht,[e("table",wt,[t[59]||(t[59]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Nombre"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Fecha de Creación"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Tamaño"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Tipo"),e("th",{class:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Acciones")])],-1)),e("tbody",kt,[(l(!0),a(C,null,L(n.backups,s=>(l(),a("tr",{key:s.path,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",Ct,[e("div",Mt,r(s.name),1)]),e("td",jt,[e("div",_t,r(ie(s.created_at)),1),e("div",Bt,r(de(s.created_at)),1)]),e("td",zt,[e("div",Lt,r(T(s.size)),1)]),e("td",St,[e("span",{class:p([s.compressed?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},r(s.compressed?"Comprimido":"Sin Comprimir"),3)]),e("td",Et,[e("div",Vt,[e("button",{onClick:H=>re(s),class:"w-8 h-8 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors duration-150",title:"Descargar"},t[55]||(t[55]=[e("svg",{class:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)]),8,At),e("button",{onClick:H=>Y(s),class:"w-8 h-8 bg-green-50 text-green-600 rounded-lg hover:bg-green-100 transition-colors duration-150",title:"Restaurar"},t[56]||(t[56]=[e("svg",{class:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)]),8,Dt),e("button",{onClick:H=>te(s),class:"w-8 h-8 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors duration-150",title:"Eliminar"},t[57]||(t[57]=[e("svg",{class:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Ht)])])]))),128)),n.backups.length===0?(l(),a("tr",Nt,t[58]||(t[58]=[e("td",{colspan:"5",class:"px-6 py-16 text-center"},[e("div",{class:"flex flex-col items-center space-y-4"},[e("div",{class:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})])]),e("div",{class:"space-y-1"},[e("p",{class:"text-gray-700 font-medium"},"No hay copias de seguridad"),e("p",{class:"text-sm text-gray-500"},"Las copias de seguridad aparecerán aquí cuando se creen")])])],-1)]))):m("",!0)])])]),n.pagination.lastPage>1?(l(),a("div",Ft,[e("div",$t,[e("div",Pt,[e("p",Tt," Mostrando "+r(n.pagination.from)+" - "+r(n.pagination.to)+" de "+r(n.pagination.total)+" resultados ",1),e("select",{value:n.pagination.perPage,onChange:t[5]||(t[5]=s=>J(parseInt(s.target.value))),class:"border border-gray-300 rounded-md text-sm py-1 px-2 bg-white"},t[60]||(t[60]=[e("option",{value:"10"},"10",-1),e("option",{value:"15"},"15",-1),e("option",{value:"25"},"25",-1),e("option",{value:"50"},"50",-1)]),40,Rt)]),e("nav",Ot,[n.pagination.prevPageUrl?(l(),a("button",{key:0,onClick:t[6]||(t[6]=s=>A(n.pagination.currentPage-1)),class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[61]||(t[61]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):(l(),a("span",Ut,t[62]||(t[62]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))),(l(!0),a(C,null,L([n.pagination.currentPage-1,n.pagination.currentPage,n.pagination.currentPage+1].filter(s=>s>0&&s<=n.pagination.lastPage),s=>(l(),a("button",{key:s,onClick:H=>A(s),class:p([s===n.pagination.currentPage?"bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},r(s),11,It))),128)),n.pagination.nextPageUrl?(l(),a("button",{key:2,onClick:t[7]||(t[7]=s=>A(n.pagination.currentPage+1)),class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[63]||(t[63]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]))):(l(),a("span",qt,t[64]||(t[64]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)])))])])])):m("",!0)]),c.value.show?(l(),a("div",{key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t[10]||(t[10]=$(s=>c.value.show=!1,["self"]))},[e("div",Zt,[e("div",Gt,[t[66]||(t[66]=e("h3",{class:"text-lg font-medium text-gray-900"}," Confirmar Restauración ",-1)),e("button",{onClick:t[8]||(t[8]=s=>c.value.show=!1),class:"text-gray-400 hover:text-gray-600 transition-colors"},t[65]||(t[65]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Xt,[e("div",Kt,[t[69]||(t[69]=e("div",{class:"w-12 h-12 mx-auto bg-yellow-100 rounded-full flex items-center justify-center mb-4"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t[70]||(t[70]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"¿Restaurar Base de Datos?",-1)),e("p",Qt,[t[67]||(t[67]=M(" ¿Estás seguro de que deseas restaurar la base de datos desde el respaldo ")),e("strong",null,r((q=c.value.backup)==null?void 0:q.name),1),t[68]||(t[68]=M("? Esta acción reemplazará todos los datos actuales. "))])])]),e("div",Jt,[e("button",{onClick:t[9]||(t[9]=s=>c.value.show=!1),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors"}," Cancelar "),e("button",{onClick:ee,class:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors"}," Restaurar ")])])])):m("",!0),g.value.show?(l(),a("div",{key:2,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t[13]||(t[13]=$(s=>g.value.show=!1,["self"]))},[e("div",Wt,[e("div",Yt,[t[72]||(t[72]=e("h3",{class:"text-lg font-medium text-gray-900"}," Confirmar Eliminación ",-1)),e("button",{onClick:t[11]||(t[11]=s=>g.value.show=!1),class:"text-gray-400 hover:text-gray-600 transition-colors"},t[71]||(t[71]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",eo,[e("div",to,[t[75]||(t[75]=e("div",{class:"w-12 h-12 mx-auto bg-red-100 rounded-full flex items-center justify-center mb-4"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1)),t[76]||(t[76]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"¿Eliminar Copia de Seguridad?",-1)),e("p",oo,[t[73]||(t[73]=M(" ¿Estás seguro de que deseas eliminar la copia de seguridad ")),e("strong",null,r((Z=g.value.backup)==null?void 0:Z.name),1),t[74]||(t[74]=M("? Esta acción no se puede deshacer. "))])])]),e("div",so,[e("button",{onClick:t[12]||(t[12]=s=>g.value.show=!1),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors"}," Cancelar "),e("button",{onClick:oe,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"}," Eliminar ")])])])):m("",!0),b.value?(l(),a("div",{key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t[17]||(t[17]=$(s=>b.value=!1,["self"]))},[e("div",ro,[e("div",ao,[t[78]||(t[78]=e("h3",{class:"text-lg font-medium text-gray-900"}," Limpiar Copias Antiguas ",-1)),e("button",{onClick:t[14]||(t[14]=s=>b.value=!1),class:"text-gray-400 hover:text-gray-600 transition-colors"},t[77]||(t[77]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",lo,[e("div",no,[t[80]||(t[80]=F('<div class="w-12 h-12 mx-auto bg-orange-100 rounded-full flex items-center justify-center mb-4" data-v-6eaad453><svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6eaad453><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" data-v-6eaad453></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2" data-v-6eaad453>¿Limpiar Copias Antiguas?</h3><p class="text-sm text-gray-500 mb-4" data-v-6eaad453> Se eliminarán las copias de seguridad más antiguas que: </p>',3)),N(e("select",{"onUpdate:modelValue":t[15]||(t[15]=s=>V.value.daysOld=s),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm"},t[79]||(t[79]=[F('<option value="7" data-v-6eaad453>7 días</option><option value="15" data-v-6eaad453>15 días</option><option value="30" data-v-6eaad453>30 días</option><option value="60" data-v-6eaad453>60 días</option><option value="90" data-v-6eaad453>90 días</option>',5)]),512),[[G,V.value.daysOld]])])]),e("div",io,[e("button",{onClick:t[16]||(t[16]=s=>b.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors"}," Cancelar "),e("button",{onClick:se,class:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors"}," Limpiar ")])])])):m("",!0)])])],64)}}}),xo=fe(uo,[["__scopeId","data-v-6eaad453"]]);export{xo as default};
