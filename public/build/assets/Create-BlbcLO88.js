import{r as f,T as ie,c as le,p as de,O as H,i as D,o as S,g as b,f as o,u as n,Z as ue,q as ce,l as d,v,z as k,x as F,F as L,m as pe,t as me,s as O,N as ge}from"./vendor-d19pJyVS.js";import{N as fe}from"./app-BcT2PLJy.js";import{A as ve}from"./AppLayout-CcnrZQKI.js";import{_ as be,a as xe,b as he}from"./BotonesAccion-DYwTTkJE.js";import{_ as ye,P as we}from"./ProductosSeleccionados-DXGsTgz6.js";import{_ as ke}from"./BuscarProducto-B_taEjGP.js";import{_ as _e}from"./VistaPreviaModal-CAwANwka.js";import"./utils-Dq7h7Pqt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Me={class:"ordenes-compra-create min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-6"},Ce={class:"max-w-6xl mx-auto"},Fe={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},$e={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},Ve={class:"relative"},je=["value"],Ne={class:"relative"},Pe={class:"mt-3 flex flex-wrap gap-2"},Be=["value"],De={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},Se={class:"p-6"},Ee={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},ze={class:"p-6"},Ae={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},qe={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},Ue={class:"md:col-span-2"},He={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},Le={class:"p-6"},Oe={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},Ie={class:"p-6"},Te={class:"space-y-4"},eo=Object.assign({layout:ve},{__name:"Create",props:{proveedores:{type:Array,default:()=>[]},productos:{type:Array,default:()=>[]},almacenes:{type:Array,default:()=>[]},proximoNumero:{type:String,default:"OC-001"}},setup(I){const T=new fe({duration:5e3,position:{x:"right",y:"top"},types:[{type:"success",background:"#10B981",icon:{className:"notyf__icon--success",tagName:"i",text:"✓"}},{type:"error",background:"#EF4444",icon:{className:"notyf__icon--error",tagName:"i",text:"✗"}},{type:"info",background:"#3B82F6",icon:{className:"notyf__icon--info",tagName:"i",text:"ℹ"}}]}),s=(r,e="success")=>{T.open({type:e,message:r})},G=I,{proveedores:R,productos:E,almacenes:Q,proximoNumero:$}=G,Y=f([...R]),V=()=>{const r=new Date,e=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),l=String(r.getDate()).padStart(2,"0");return`${e}-${a}-${l}`},t=ie({numero_orden:"",fecha_orden:V(),fecha_entrega_esperada:"",prioridad:"media",proveedor_id:"",almacen_id:"",direccion_entrega:"",terminos_pago:"30_dias",metodo_pago:"transferencia",subtotal:0,descuento_items:0,descuento_general:0,iva:0,total:0,items:[],observaciones:"",estado:"pendiente"}),Z=f(null),p=f(null),i=f([]),u=f({}),g=f({}),m=f({}),j=f(!1),_=f(!0),N=()=>{const r=V();t.fecha_orden!==r&&(t.fecha_orden=r)},y=r=>{const e=new Date;let a=new Date(e);switch(r){case"hoy":break;case"manana":a.setDate(e.getDate()+1);break;case"3dias":a.setDate(e.getDate()+3);break;case"semana":a.setDate(e.getDate()+7);break;case"mes":a.setMonth(e.getMonth()+1);break}const l=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),M=String(a.getDate()).padStart(2,"0"),C=`${l}-${c}-${M}`;t.fecha_entrega_esperada=C,s(`Fecha de entrega establecida: ${{hoy:"Hoy",manana:"Mañana","3dias":"En 3 días",semana:"En una semana",mes:"En un mes"}[r]} (${C})`,"success")},J=()=>{s("Usa los botones para establecer fechas de entrega comunes","info")},K=()=>{p.value&&i.value.length>0?j.value=!0:s("Selecciona un proveedor y al menos un producto","error")},W=r=>{var e;if(!r){p.value=null,t.proveedor_id="",h(),s("Selección de proveedor limpiada","info");return}((e=p.value)==null?void 0:e.id)!==r.id&&(p.value=r,t.proveedor_id=r.id,h(),s(`Proveedor seleccionado: ${r.nombre_razon_social}`))},X=r=>{if(!r||typeof r.id>"u"){s("Producto inválido","error");return}const e={id:r.id,tipo:"producto"};if(i.value.some(l=>l.id===r.id&&l.tipo==="producto"))s("Este producto ya está en la lista","info");else{i.value.push(e);const l=`producto-${r.id}`;u.value[l]=1;let c=0;r.precio_compra&&Number(r.precio_compra)>0?c=Number(r.precio_compra):r.precio_venta&&Number(r.precio_venta)>0&&(c=Number(r.precio_venta)),g.value[l]=c,m.value[l]=0,w(),h(),s(`Producto añadido: ${r.nombre||r.descripcion||"Producto"}`)}},ee=r=>{if(!r||typeof r.id>"u"||!r.tipo)return;const e=`${r.tipo}-${r.id}`;i.value=i.value.filter(a=>!(a.id===r.id&&a.tipo===r.tipo)),delete u.value[e],delete g.value[e],delete m.value[e],w(),h(),s(`Producto eliminado: ${r.nombre||r.descripcion||"Producto"}`,"info")},oe=(r,e)=>{const a=parseFloat(e);isNaN(a)||a<0||(u.value[r]=a,w(),h())},te=(r,e)=>{const a=parseFloat(e);isNaN(a)||a<0||a>100||(m.value[r]=a,w(),h())},x=le(()=>{let r=0,e=0;i.value.forEach(P=>{const B=`${P.tipo}-${P.id}`,A=parseFloat(u.value[B])||0,q=parseFloat(g.value[B])||0,se=parseFloat(m.value[B])||0;if(A>0&&q>=0){const U=A*q;e+=U*(se/100),r+=U}});const a=parseFloat(t.descuento_general)||0,l=Math.max(0,r-e),c=Math.max(0,l-a),M=c*.16,C=c+M;return{subtotal:parseFloat(r.toFixed(2)),descuentoItems:parseFloat(e.toFixed(2)),descuentoGeneral:a,subtotalConDescuentos:parseFloat(c.toFixed(2)),iva:parseFloat(M.toFixed(2)),total:parseFloat(C.toFixed(2))}}),w=()=>{t.subtotal=x.value.subtotal,t.descuento_items=x.value.descuentoItems,t.iva=x.value.iva,t.total=x.value.total},re=()=>{if(!t.fecha_orden)return s("Fecha de orden no disponible","error"),!1;if(!t.proveedor_id)return s("Selecciona un proveedor","error"),!1;if(i.value.length===0)return s("Agrega al menos un producto","error"),!1;for(const r of i.value){const e=`${r.tipo}-${r.id}`,a=parseFloat(m.value[e])||0,l=parseFloat(u.value[e])||0,c=parseFloat(g.value[e])||0;if(a<0||a>100)return s("Los descuentos deben estar entre 0% y 100%.","error"),!1;if(l<=0)return s("Las cantidades deben ser mayores a 0","error"),!1;if(c<0)return s("Los precios no pueden ser negativos","error"),!1}return!0},ae=()=>{re()&&(N(),t.items=i.value.map(r=>{const e=`producto-${r.id}`;return{id:r.id,tipo:"producto",cantidad:parseFloat(u.value[e])||1,precio:parseFloat(g.value[e])||0,descuento:parseFloat(m.value[e])||0}}),w(),t.numero_orden||(t.numero_orden=$),(!t.almacen_id||t.almacen_id==="")&&(t.almacen_id=null),console.log("Datos a enviar:",{numero_orden:t.numero_orden,fecha_orden:t.fecha_orden,fecha_entrega_esperada:t.fecha_entrega_esperada,prioridad:t.prioridad,proveedor_id:t.proveedor_id,almacen_id:t.almacen_id,direccion_entrega:t.direccion_entrega,terminos_pago:t.terminos_pago,metodo_pago:t.metodo_pago,subtotal:t.subtotal,descuento_items:t.descuento_items,descuento_general:t.descuento_general,iva:t.iva,total:t.total,items:t.items,observaciones:t.observaciones}),t.post(route("ordenescompra.store"),{onSuccess:()=>{i.value=[],u.value={},g.value={},m.value={},p.value=null,t.reset(),t.numero_orden="",t.fecha_orden=V(),t.prioridad="media",t.terminos_pago="30_dias",t.metodo_pago="transferencia",t.estado="pendiente",s("Orden de compra creada con éxito"),ge.visit(route("ordenescompra.index"))},onError:r=>{if(console.error("Errores de validación:",r),r&&typeof r=="object"&&r.message&&r.message.includes("CSRF token mismatch")){s("La sesión ha expirado. Refrescando la página...","error"),setTimeout(()=>{window.location.reload()},2e3);return}const e=Object.values(r)[0];Array.isArray(e)?s(e[0],"error"):s("Hubo errores de validación","error")}}))},ne=()=>{p.value=null,N(),t.numero_orden="",t.fecha_entrega_esperada="",t.prioridad="media",t.proveedor_id="",t.almacen_id="",t.direccion_entrega="",t.terminos_pago="30_dias",t.metodo_pago="transferencia",t.observaciones="",t.descuento_general=0,i.value=[],u.value={},g.value={},m.value={},s("Formulario limpiado correctamente")},h=()=>{t.fecha_orden,t.fecha_entrega_esperada,t.prioridad,t.proveedor_id,t.almacen_id,p.value,t.direccion_entrega,t.terminos_pago,t.metodo_pago,t.observaciones,t.descuento_general,i.value,u.value,g.value,m.value},z=r=>{(t.proveedor_id||i.value.length>0)&&(r.preventDefault(),r.returnValue="Tienes cambios sin guardar. ¿Estás seguro de que quieres salir?")};return de(()=>{const r=setInterval(()=>{N()},3e5);window.addEventListener("beforeunload",z),H(()=>{clearInterval(r)})}),H(()=>{window.removeEventListener("beforeunload",z)}),(r,e)=>(S(),D(L,null,[b(n(ue),{title:"Crear Orden de Compra"}),o("div",Me,[o("div",Ce,[b(be,{title:"Nueva Orden de Compra",description:"Crea una nueva orden de compra para tus proveedores","can-preview":p.value&&i.value.length>0,"back-url":r.route("ordenescompra.index"),"show-shortcuts":_.value,onPreview:K,onCloseShortcuts:e[0]||(e[0]=a=>_.value=!1)},null,8,["can-preview","back-url","show-shortcuts"]),o("form",{onSubmit:ce(ae,["prevent"]),class:"space-y-8"},[o("div",Fe,[e[37]||(e[37]=o("div",{class:"bg-gradient-to-r from-indigo-500 to-indigo-600 px-6 py-4"},[o("h2",{class:"text-lg font-semibold text-white flex items-center"},[o("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),d(" Información General ")])],-1)),o("div",$e,[o("div",null,[e[20]||(e[20]=o("label",{for:"numero_orden",class:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2"},[d(" Número de Orden * "),o("span",{class:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full"},[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),d(" Automático ")])],-1)),o("div",Ve,[o("input",{id:"numero_orden",value:n($),type:"text",class:"w-full bg-gray-50 text-gray-500 cursor-not-allowed border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",readonly:""},null,8,je),e[19]||(e[19]=o("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[o("svg",{class:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1))]),e[21]||(e[21]=o("p",{class:"mt-1 text-xs text-gray-500"}," Este número se asigna automáticamente al guardar la orden ",-1))]),o("div",null,[e[23]||(e[23]=o("label",{for:"fecha_orden",class:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2"},[d(" Fecha de Orden * "),o("span",{class:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full"},[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),d(" Automática ")])],-1)),o("div",Ne,[v(o("input",{id:"fecha_orden","onUpdate:modelValue":e[1]||(e[1]=a=>n(t).fecha_orden=a),type:"date",class:"w-full bg-gray-50 text-gray-500 cursor-not-allowed border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",readonly:"",required:""},null,512),[[k,n(t).fecha_orden]]),e[22]||(e[22]=o("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[o("svg",{class:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))]),e[24]||(e[24]=o("p",{class:"mt-1 text-xs text-gray-500"}," Esta fecha se establece automáticamente con la fecha de creación ",-1))]),o("div",null,[o("label",{for:"fecha_entrega_esperada",class:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2"},[e[26]||(e[26]=d(" Fecha de Entrega Esperada ")),o("button",{onClick:J,type:"button",class:"text-gray-400 hover:text-gray-600 transition-colors",title:"Opciones de fechas rápidas disponibles"},e[25]||(e[25]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]))]),v(o("input",{id:"fecha_entrega_esperada","onUpdate:modelValue":e[2]||(e[2]=a=>n(t).fecha_entrega_esperada=a),type:"date",class:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},null,512),[[k,n(t).fecha_entrega_esperada]]),o("div",Pe,[o("button",{onClick:e[3]||(e[3]=a=>y("hoy")),type:"button",class:"inline-flex items-center gap-1 px-3 py-2 bg-blue-50 text-blue-700 text-sm font-medium rounded-lg hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200"},e[27]||(e[27]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),d(" Hoy ")])),o("button",{onClick:e[4]||(e[4]=a=>y("manana")),type:"button",class:"inline-flex items-center gap-1 px-3 py-2 bg-green-50 text-green-700 text-sm font-medium rounded-lg hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200"},e[28]||(e[28]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})],-1),d(" Mañana ")])),o("button",{onClick:e[5]||(e[5]=a=>y("3dias")),type:"button",class:"inline-flex items-center gap-1 px-3 py-2 bg-yellow-50 text-yellow-700 text-sm font-medium rounded-lg hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 transition-colors duration-200"},e[29]||(e[29]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),d(" +3 días ")])),o("button",{onClick:e[6]||(e[6]=a=>y("semana")),type:"button",class:"inline-flex items-center gap-1 px-3 py-2 bg-purple-50 text-purple-700 text-sm font-medium rounded-lg hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-colors duration-200"},e[30]||(e[30]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),d(" Una semana ")])),o("button",{onClick:e[7]||(e[7]=a=>y("mes")),type:"button",class:"inline-flex items-center gap-1 px-3 py-2 bg-red-50 text-red-700 text-sm font-medium rounded-lg hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors duration-200"},e[31]||(e[31]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),d(" Un mes ")]))])]),o("div",null,[e[33]||(e[33]=o("label",{for:"prioridad",class:"block text-sm font-medium text-gray-700 mb-2"}," Prioridad ",-1)),v(o("select",{id:"prioridad","onUpdate:modelValue":e[8]||(e[8]=a=>n(t).prioridad=a),class:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},e[32]||(e[32]=[o("option",{value:"baja"},"Baja",-1),o("option",{value:"media"},"Media",-1),o("option",{value:"alta"},"Alta",-1),o("option",{value:"urgente"},"Urgente",-1)]),512),[[F,n(t).prioridad]])]),o("div",null,[e[35]||(e[35]=o("label",{for:"almacen_id",class:"block text-sm font-medium text-gray-700 mb-2"}," Almacén de Destino ",-1)),v(o("select",{id:"almacen_id","onUpdate:modelValue":e[9]||(e[9]=a=>n(t).almacen_id=a),class:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},[e[34]||(e[34]=o("option",{value:""},"Seleccionar almacén...",-1)),(S(!0),D(L,null,pe(n(Q),a=>(S(),D("option",{key:a.id,value:a.id},me(a.nombre),9,Be))),128))],512),[[F,n(t).almacen_id]]),e[36]||(e[36]=o("p",{class:"mt-1 text-xs text-gray-500"}," Almacén donde se recibirán los productos ",-1))])])]),o("div",De,[e[39]||(e[39]=o("div",{class:"bg-gradient-to-r from-blue-500 to-blue-600 px-6 py-4"},[o("h2",{class:"text-lg font-semibold text-white flex items-center"},[o("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),d(" Información del Proveedor ")])],-1)),o("div",Se,[b(ye,{proveedores:Y.value,"proveedor-seleccionado":p.value,"label-busqueda":"Proveedor","placeholder-busqueda":"Buscar proveedor por nombre, RFC, email...",requerido:"",onProveedorSeleccionado:W},null,8,["proveedores","proveedor-seleccionado"]),e[38]||(e[38]=O('<div class="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg"><div class="flex items-center gap-2 text-blue-700 text-sm"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="font-medium">Nota:</span><span>Las órdenes de compra solo incluyen productos físicos para inventario.</span></div></div>',1))])]),o("div",Ee,[e[40]||(e[40]=o("div",{class:"bg-gradient-to-r from-green-500 to-green-600 px-6 py-4"},[o("h2",{class:"text-lg font-semibold text-white flex items-center"},[o("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012 2v2M7 7h10"})]),d(" Productos ")])],-1)),o("div",ze,[b(ke,{ref_key:"buscarProductoRef",ref:Z,productos:n(E),servicios:[],"validar-stock":!1,onAgregarProducto:X},null,8,["productos"]),b(we,{"selected-products":i.value,productos:n(E),servicios:[],quantities:u.value,prices:g.value,discounts:m.value,onEliminarProducto:ee,onUpdateQuantity:oe,onUpdateDiscount:te},null,8,["selected-products","productos","quantities","prices","discounts"])])]),o("div",Ae,[e[46]||(e[46]=o("div",{class:"bg-gradient-to-r from-orange-500 to-orange-600 px-6 py-4"},[o("h2",{class:"text-lg font-semibold text-white flex items-center"},[o("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})]),d(" Condiciones de Entrega ")])],-1)),o("div",qe,[o("div",Ue,[e[41]||(e[41]=o("label",{for:"direccion_entrega",class:"block text-sm font-medium text-gray-700 mb-2"}," Dirección de Entrega ",-1)),v(o("textarea",{id:"direccion_entrega","onUpdate:modelValue":e[10]||(e[10]=a=>n(t).direccion_entrega=a),class:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-vertical",rows:"3",placeholder:"Especifica la dirección donde se debe entregar el pedido..."},null,512),[[k,n(t).direccion_entrega]])]),o("div",null,[e[43]||(e[43]=o("label",{for:"terminos_pago",class:"block text-sm font-medium text-gray-700 mb-2"}," Términos de Pago ",-1)),v(o("select",{id:"terminos_pago","onUpdate:modelValue":e[11]||(e[11]=a=>n(t).terminos_pago=a),class:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-orange-500 focus:border-transparent"},e[42]||(e[42]=[O('<option value="contado">Contado</option><option value="15_dias">15 días</option><option value="30_dias">30 días</option><option value="45_dias">45 días</option><option value="60_dias">60 días</option><option value="90_dias">90 días</option>',6)]),512),[[F,n(t).terminos_pago]])]),o("div",null,[e[45]||(e[45]=o("label",{for:"metodo_pago",class:"block text-sm font-medium text-gray-700 mb-2"}," Método de Pago ",-1)),v(o("select",{id:"metodo_pago","onUpdate:modelValue":e[12]||(e[12]=a=>n(t).metodo_pago=a),class:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-orange-500 focus:border-transparent"},e[44]||(e[44]=[o("option",{value:"transferencia"},"Transferencia Bancaria",-1),o("option",{value:"cheque"},"Cheque",-1),o("option",{value:"efectivo"},"Efectivo",-1),o("option",{value:"tarjeta"},"Tarjeta de Crédito",-1)]),512),[[F,n(t).metodo_pago]])])])]),o("div",He,[e[47]||(e[47]=o("div",{class:"bg-gradient-to-r from-purple-500 to-purple-600 px-6 py-4"},[o("h2",{class:"text-lg font-semibold text-white flex items-center"},[o("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})]),d(" Notas y Observaciones ")])],-1)),o("div",Le,[v(o("textarea",{"onUpdate:modelValue":e[13]||(e[13]=a=>n(t).observaciones=a),class:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-vertical",rows:"4",placeholder:"Agrega observaciones, especificaciones técnicas, términos y condiciones especiales..."},null,512),[[k,n(t).observaciones]])])]),o("div",Oe,[e[50]||(e[50]=o("div",{class:"bg-gradient-to-r from-red-500 to-red-600 px-6 py-4"},[o("h2",{class:"text-lg font-semibold text-white flex items-center"},[o("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})]),d(" Descuento General ")])],-1)),o("div",Ie,[o("div",Te,[o("div",null,[e[48]||(e[48]=o("label",{for:"descuento_general",class:"block text-sm font-medium text-gray-700 mb-2"}," Descuento General ($) ",-1)),v(o("input",{id:"descuento_general",type:"number",step:"0.01",min:"0","onUpdate:modelValue":e[14]||(e[14]=a=>n(t).descuento_general=a),class:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"0.00"},null,512),[[k,n(t).descuento_general]]),e[49]||(e[49]=o("p",{class:"mt-1 text-xs text-gray-500"}," Este descuento se aplica al subtotal después de los descuentos por item ",-1))])])])]),b(xe,{"show-margin-calculator":!1,"margin-data":{costoTotal:0,precioVenta:0,ganancia:0,margenPorcentaje:0},totals:x.value,"item-count":i.value.length,"total-quantity":Object.values(u.value).reduce((a,l)=>a+(l||0),0),"onUpdate:descuentoGeneral":e[15]||(e[15]=a=>n(t).descuento_general=a)},null,8,["totals","item-count","total-quantity"]),b(he,{"back-url":r.route("ordenescompra.index"),"is-processing":n(t).processing,"can-submit":n(t).proveedor_id&&i.value.length>0,"button-text":n(t).processing?"Guardando...":"Crear Orden de Compra",onLimpiar:ne},null,8,["back-url","is-processing","can-submit","button-text"])],32),o("button",{onClick:e[16]||(e[16]=a=>_.value=!_.value),class:"fixed bottom-4 left-4 bg-gray-600 text-white p-3 rounded-full shadow-lg hover:bg-gray-700 transition-colors duration-200",title:"Mostrar atajos de teclado"},e[51]||(e[51]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])),b(_e,{show:j.value,type:"ordenescompra",proveedor:p.value,productos:i.value,totals:x.value,notas:n(t).observaciones,"orden-data":{numero_orden:n($),fecha_orden:n(t).fecha_orden,fecha_entrega_esperada:n(t).fecha_entrega_esperada,prioridad:n(t).prioridad,direccion_entrega:n(t).direccion_entrega,terminos_pago:n(t).terminos_pago,metodo_pago:n(t).metodo_pago},onClose:e[17]||(e[17]=a=>j.value=!1),onPrint:e[18]||(e[18]=()=>r.window.print())},null,8,["show","proveedor","productos","totals","notas","orden-data"])])])],64))}});export{eo as default};
