import{c as Z,r as f,w as ye,D as ze,p as Ne,H as Re,i as a,o as r,k as m,b as ie,f as e,l as g,t as u,v as w,z as P,n as y,F as A,m as D,U as Ve,q as W,J as he,M as ke,x as U}from"./vendor-d19pJyVS.js";import{_ as He}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Fe={class:"relative"},Ue={key:0,class:"buscar-proveedor"},Oe={class:"mb-6"},Ge={class:"block text-sm font-medium text-gray-700 mb-2"},Xe={key:0,class:"text-red-500"},Ye={class:"relative"},Qe=["placeholder","disabled"],Je={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Ze={class:"absolute inset-y-0 right-0 pr-3 flex items-center"},We={key:1,class:"animate-spin w-5 h-5 border-2 border-green-500 border-t-transparent rounded-full"},Ke={key:2,class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},eo={key:0,class:"mt-2 text-sm text-red-600"},oo={key:1,class:"mt-2 text-sm text-gray-500"},to={key:2,class:"mt-2 text-sm text-gray-500"},so={key:3,class:"mt-3 flex flex-wrap gap-2"},ro=["onClick"],ao={key:1,class:"mt-6 p-6 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg shadow-sm"},io={class:"flex items-start justify-between mb-4"},lo={class:"text-lg font-semibold text-green-900 flex items-center"},no={class:"flex items-center space-x-2"},uo=["title"],co={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},mo={class:"space-y-2"},po={class:"text-lg font-semibold text-gray-900"},vo={key:0,class:"space-y-2"},go={class:"text-gray-900"},fo={key:1,class:"space-y-2"},xo={class:"text-gray-900"},bo={key:2,class:"space-y-2"},yo={class:"text-gray-900 font-mono"},ho={key:3,class:"space-y-2"},ko={class:"flex items-center"},wo={class:"text-gray-900 font-medium capitalize"},_o={key:4,class:"space-y-2"},Co={class:"text-gray-900 text-sm"},Mo={key:5,class:"space-y-2"},So={class:"text-gray-900 font-semibold"},Po={key:6,class:"space-y-2"},Bo={class:"text-gray-900 capitalize"},jo={key:0,class:"mt-4 space-y-2"},$o={key:2,class:"mt-6 p-6 border-2 border-dashed border-gray-300 rounded-lg text-center"},Ao={class:"text-gray-500 text-lg font-medium"},Do={class:"text-gray-400 text-sm mt-1"},Lo={key:0,class:"mt-4"},Eo={class:"p-2"},Io={class:"text-xs text-gray-500 mb-2 px-2 flex items-center justify-between"},qo={key:0,class:"text-gray-400"},To=["onClick","onMouseenter"],zo={class:"flex items-center justify-between"},No={class:"flex-1"},Ro={class:"font-medium text-gray-900 mb-1 flex items-center"},Vo=["innerHTML"],Ho={class:"ml-2 flex items-center space-x-1"},Fo=["title"],Uo={class:"text-sm text-gray-500 space-y-1"},Oo=["innerHTML"],Go=["innerHTML"],Xo=["innerHTML"],Yo={key:3,class:"text-xs text-green-600 capitalize"},Qo={key:0,class:"ml-3"},Jo=["innerHTML"],Zo={key:0,class:"border-t border-gray-200 p-3 bg-gray-50"},Wo={class:"text-center text-gray-500"},Ko={key:0,class:"fixed inset-0 z-[1000] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},et={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ot={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full"},tt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},st={class:"sm:flex sm:items-start"},rt={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},at={class:"border-b border-gray-200 pb-4"},it={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},lt={class:"md:col-span-2"},nt={key:0,class:"mt-1 text-sm text-red-600"},dt={key:0,class:"mt-1 text-sm text-red-600"},ut={for:"modal-rfc",class:"block text-sm font-medium text-gray-700"},ct={class:"text-xs text-gray-500"},mt=["maxlength","placeholder","value","disabled"],pt={key:0,class:"mt-1 text-sm text-red-600"},vt={key:1,class:"mt-1 text-xs text-gray-500"},gt={class:"border-b border-gray-200 pb-4"},ft={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xt=["disabled"],bt=["value"],yt={key:0,class:"mt-1 text-sm text-red-600"},ht={key:1,class:"mt-1 text-xs text-gray-500"},kt=["value"],wt={key:0,class:"mt-1 text-sm text-red-600"},_t={class:"border-b border-gray-200 pb-4"},Ct={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Mt={key:0,class:"mt-1 text-sm text-red-600"},St={key:0,class:"mt-1 text-sm text-red-600"},Pt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Bt={class:"md:col-span-2"},jt={key:0,class:"mt-1 text-sm text-red-600"},$t={key:0,class:"mt-1 text-sm text-red-600"},At={key:0,class:"mt-1 text-sm text-red-600"},Dt=["disabled"],Lt={value:""},Et=["value"],It={key:0,class:"mt-1 text-sm text-red-600"},qt={key:1,class:"mt-1 text-xs text-gray-500"},Tt=["value"],zt={key:0,class:"mt-1 text-sm text-red-600"},Nt={key:0,class:"mt-1 text-sm text-red-600"},Rt=["value"],Vt={key:0,class:"mt-1 text-sm text-red-600"},Ht={key:0,class:"mt-1 text-sm text-red-600"},Ft={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ut=["disabled"],Ot={key:0},Gt={key:1},Xt=["disabled"],Ps={__name:"BuscarProveedor",props:{proveedores:{type:Array,required:!0,default:()=>[]},proveedorSeleccionado:{type:Object,default:null},mostrarOpcionNuevoProveedor:{type:Boolean,default:!0},labelBusqueda:{type:String,default:"Buscar Proveedor"},placeholderBusqueda:{type:String,default:"Escribe para buscar proveedores..."},requerido:{type:Boolean,default:!1},iconoBusqueda:{type:Boolean,default:!0},deshabilitado:{type:Boolean,default:!1},mensajeAyuda:{type:String,default:""},tipoDocumento:{type:String,default:"Proveedor"},tituloProveedorSeleccionado:{type:String,default:"Proveedor Seleccionado"},mensajeVacio:{type:String,default:"No hay proveedor seleccionado"},submensajeVacio:{type:String,default:"Busca y selecciona un proveedor para continuar"},mostrarAccionRapida:{type:Boolean,default:!0},mostrarEstadoProveedor:{type:Boolean,default:!0},mostrarHistorial:{type:Boolean,default:!1},mostrarEditar:{type:Boolean,default:!1},mostrarInfoComercial:{type:Boolean,default:!0},mostrarFiltrosRapidos:{type:Boolean,default:!1},filtrosRapidos:{type:Array,default:()=>[]}},emits:["proveedor-seleccionado","crear-nuevo-proveedor","ver-historial","editar-proveedor"],setup(c,{expose:K,emit:B}){const h=c,z=Z(()=>{if(!h.proveedorSeleccionado)return null;const s=h.proveedorSeleccionado,o=[s.calle,s.numero_exterior,s.numero_interior,s.colonia,s.codigo_postal,s.municipio,s.estado,s.pais].filter(Boolean);return o.length>0?o.join(", "):null}),E=B,j=f(null),O=f(null),G=f(null),x=f(""),d=f(""),i=f(!1),p=f(-1),b=f(!1),C=f(""),$=f(""),N=f(!1),R=f(null),X=f(null),ee=f(0),I=f({top:0,left:0,height:0}),q=f(null),oe=f(null),te=f(!1),V=f(!1),l=f({nombre_razon_social:"",tipo_persona:"",rfc:"",regimen_fiscal:"",uso_cfdi:"",email:"",telefono:"",calle:"",numero_exterior:"",numero_interior:"",colonia:"",codigo_postal:"",municipio:"",estado:"",pais:"MX"}),n=f({}),S=f([]),Y=s=>s?s.toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s@.-]/g,"").trim():"",le=s=>Y(s).split(/\s+/).filter(o=>o.length>0),M=Z(()=>{if(!d.value||d.value.length<1)return[];const s=le(d.value);if(s.length===0)return[];const o=performance.now();let t=h.proveedores.filter(v=>{const _=[v.nombre_razon_social,v.email,v.telefono,v.rfc,v.categoria,v.tipo_proveedor].map(Y).join(" ");return s.every(T=>_.includes(T))});if(q.value){const v=h.filtrosRapidos.find(_=>_.value===q.value);v&&v.filter&&(t=t.filter(v.filter))}t=t.sort((v,_)=>{const T=Y(v.nombre_razon_social),ge=Y(_.nombre_razon_social),fe=s[0],xe=T.startsWith(fe),be=ge.startsWith(fe);return xe&&!be?-1:!xe&&be?1:T.localeCompare(ge)});const k=performance.now();return oe.value=Math.round(k-o),t.slice(0,50)}),ne=Z(()=>{if(!h.proveedorSeleccionado)return[];const s=[],o=h.proveedorSeleccionado;return o.estado==="suspendido"&&s.push({id:"suspendido",tipo:"warning",mensaje:"Este proveedor está suspendido temporalmente"}),o.estado==="inactivo"&&s.push({id:"inactivo",tipo:"error",mensaje:"Este proveedor está inactivo"}),o.credito_limite&&o.saldo_pendiente>o.credito_limite&&s.push({id:"credito_excedido",tipo:"error",mensaje:"El proveedor ha excedido su límite de crédito"}),s}),de=()=>{if(!j.value)return;const s=j.value.getBoundingClientRect(),o=window.scrollY||document.documentElement.scrollTop;ee.value=s.width,I.value={top:s.top+o,left:s.left+window.scrollX,height:s.height}},we=()=>{N.value=!0,ue()},_e=()=>{N.value=!0,i.value=!0},ue=()=>{clearTimeout(X.value),X.value=setTimeout(()=>{d.value=x.value,C.value="",x.value.length>=1?(de(),i.value=!0,p.value=-1):i.value=!1},300)},Ce=()=>{R.value=setTimeout(()=>{i.value=!1},150)},Me=s=>{var o;if(!(!i.value||M.value.length===0))switch(s.key){case"ArrowDown":s.preventDefault(),p.value=Math.min(p.value+1,M.value.length-1);break;case"ArrowUp":s.preventDefault(),p.value=Math.max(p.value-1,-1);break;case"Enter":s.preventDefault(),p.value>=0&&se(M.value[p.value],s);break;case"Escape":i.value=!1,(o=j.value)==null||o.blur();break}},se=(s,o)=>{o&&(o.preventDefault(),o.stopPropagation()),R.value&&clearTimeout(R.value),i.value=!1,x.value=s.nombre_razon_social,$.value="",N.value=!0,E("proveedor-seleccionado",s)},re=()=>{x.value="",d.value="",i.value=!1,C.value="",$.value="",q.value=null,N.value=!1},ce=()=>{re(),E("proveedor-seleccionado",null)},Se=s=>{q.value===s.value?q.value=null:q.value=s.value,d.value&&ue()},H=(s,o)=>{if(!s||!o)return s;const t=le(o);let k=s;return t.forEach(v=>{if(v.length>1){const _=new RegExp(`(${v})`,"gi");k=k.replace(_,'<mark class="bg-yellow-200 px-1 rounded">$1</mark>')}}),k},Pe=s=>s?new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(s):"$0.00",ae=()=>{i.value=!1,l.value.nombre_razon_social=x.value||"",n.value={},te.value=!0},Q=()=>{te.value=!1,l.value={nombre_razon_social:"",tipo_persona:"",rfc:"",regimen_fiscal:"",uso_cfdi:"",email:"",telefono:"",calle:"",numero_exterior:"",numero_interior:"",colonia:"",codigo_postal:"",municipio:"",estado:"",pais:"MX"},n.value={},S.value=[]},Be={Aguascalientes:"AGU","Baja California":"BCN","Baja California Sur":"BCS",Campeche:"CAM",Chihuahua:"CHH",Chiapas:"CHP","Ciudad de México":"CMX",Coahuila:"COA",Colima:"COL",Durango:"DUR",Guerrero:"GRO",Guanajuato:"GUA",Hidalgo:"HID",Jalisco:"JAL","Estado de México":"MEX",Michoacán:"MIC",Morelos:"MOR",Nayarit:"NAY","Nuevo León":"NLE",Oaxaca:"OAX",Puebla:"PUE",Querétaro:"QUE","Quintana Roo":"ROO",Sinaloa:"SIN","San Luis Potosí":"SLP",Sonora:"SON",Tabasco:"TAB",Tamaulipas:"TAM",Tlaxcala:"TLA",Veracruz:"VER",Yucatán:"YUC",Zacatecas:"ZAC"},je=[{value:"AGU",text:"AGU — Aguascalientes"},{value:"BCN",text:"BCN — Baja California"},{value:"BCS",text:"BCS — Baja California Sur"},{value:"CAM",text:"CAM — Campeche"},{value:"CHH",text:"CHH — Chihuahua"},{value:"CHP",text:"CHP — Chiapas"},{value:"CMX",text:"CMX — Ciudad de México"},{value:"COA",text:"COA — Coahuila"},{value:"COL",text:"COL — Colima"},{value:"DUR",text:"DUR — Durango"},{value:"GRO",text:"GRO — Guerrero"},{value:"GUA",text:"GUA — Guanajuato"},{value:"HID",text:"HID — Hidalgo"},{value:"JAL",text:"JAL — Jalisco"},{value:"MEX",text:"MEX — Estado de México"},{value:"MIC",text:"MIC — Michoacán"},{value:"MOR",text:"MOR — Morelos"},{value:"NAY",text:"NAY — Nayarit"},{value:"NLE",text:"NLE — Nuevo León"},{value:"OAX",text:"OAX — Oaxaca"},{value:"PUE",text:"PUE — Puebla"},{value:"QUE",text:"QUE — Querétaro"},{value:"ROO",text:"ROO — Quintana Roo"},{value:"SIN",text:"SIN — Sinaloa"},{value:"SLP",text:"SLP — San Luis Potosí"},{value:"SON",text:"SON — Sonora"},{value:"TAB",text:"TAB — Tabasco"},{value:"TAM",text:"TAM — Tamaulipas"},{value:"TLA",text:"TLA — Tlaxcala"},{value:"VER",text:"VER — Veracruz"},{value:"YUC",text:"YUC — Yucatán"},{value:"ZAC",text:"ZAC — Zacatecas"}],$e=[{codigo:"601",descripcion:"General de Ley Personas Morales",persona_moral:!0,persona_fisica:!1},{codigo:"603",descripcion:"Personas Morales con Fines no Lucrativos",persona_moral:!0,persona_fisica:!1},{codigo:"605",descripcion:"Sueldos y Salarios e Ingresos Asimilados a Salarios",persona_moral:!1,persona_fisica:!0},{codigo:"606",descripcion:"Arrendamiento",persona_moral:!0,persona_fisica:!0},{codigo:"607",descripcion:"Régimen de Enajenación o Adquisición de Bienes",persona_moral:!0,persona_fisica:!0},{codigo:"608",descripcion:"Demás ingresos",persona_moral:!0,persona_fisica:!0},{codigo:"609",descripcion:"Consolidación",persona_moral:!0,persona_fisica:!1},{codigo:"610",descripcion:"Residentes en el Extranjero sin Establecimiento Permanente en México",persona_moral:!0,persona_fisica:!0},{codigo:"611",descripcion:"Ingresos por Dividendos (socios y accionistas)",persona_moral:!0,persona_fisica:!0},{codigo:"612",descripcion:"Personas Físicas con Actividades Empresariales y Profesionales",persona_moral:!1,persona_fisica:!0},{codigo:"614",descripcion:"Ingresos por intereses",persona_moral:!0,persona_fisica:!0},{codigo:"615",descripcion:"Régimen de los ingresos por obtención de premios",persona_moral:!0,persona_fisica:!0},{codigo:"616",descripcion:"Sin obligaciones fiscales",persona_moral:!0,persona_fisica:!0},{codigo:"620",descripcion:"Sociedades Cooperativas de Producción que optan por diferir sus ingresos",persona_moral:!0,persona_fisica:!1},{codigo:"621",descripcion:"Incorporación Fiscal",persona_moral:!0,persona_fisica:!1},{codigo:"622",descripcion:"Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras",persona_moral:!0,persona_fisica:!0},{codigo:"623",descripcion:"Opcional para Grupos de Sociedades",persona_moral:!0,persona_fisica:!1},{codigo:"624",descripcion:"Coordinados",persona_moral:!0,persona_fisica:!1},{codigo:"625",descripcion:"Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas",persona_moral:!1,persona_fisica:!0},{codigo:"626",descripcion:"Régimen Simplificado de Confianza",persona_moral:!0,persona_fisica:!0}],Ae=[{codigo:"G01",descripcion:"Adquisición de mercancías"},{codigo:"G02",descripcion:"Devoluciones, descuentos o bonificaciones"},{codigo:"G03",descripcion:"Gastos en general"},{codigo:"I01",descripcion:"Construcciones"},{codigo:"I02",descripcion:"Mobiliario y equipo de oficina por inversiones"},{codigo:"I03",descripcion:"Equipo de transporte"},{codigo:"I04",descripcion:"Equipo de computo y accesorios"},{codigo:"I05",descripcion:"Dados, troqueles, moldes, matrices y herramental"},{codigo:"I06",descripcion:"Comunicaciones telefónicas"},{codigo:"I07",descripcion:"Comunicaciones satelitales"},{codigo:"I08",descripcion:"Otra maquinaria y equipo"},{codigo:"D01",descripcion:"Honorarios médicos, dentales y gastos hospitalarios"},{codigo:"D02",descripcion:"Gastos médicos por incapacidad o discapacidad"},{codigo:"D03",descripcion:"Gastos funerales"},{codigo:"D04",descripcion:"Donativos"},{codigo:"D05",descripcion:"Intereses reales efectivamente pagados por créditos hipotecarios (casa habitación)"},{codigo:"D06",descripcion:"Aportaciones voluntarias al SAR"},{codigo:"D07",descripcion:"Primas por seguros de gastos médicos"},{codigo:"D08",descripcion:"Gastos de transportación escolar obligatoria"},{codigo:"D09",descripcion:"Depósitos en cuentas para el ahorro, primas que tengan como base planes de pensiones"},{codigo:"D10",descripcion:"Pagos por servicios educativos (colegiaturas)"},{codigo:"P01",descripcion:"Por definir"}],De=Z(()=>l.value.tipo_persona?$e.filter(s=>l.value.tipo_persona==="moral"?s.persona_moral:s.persona_fisica):[]),Le=()=>{l.value.rfc="",l.value.regimen_fiscal="",n.value={...n.value,rfc:"",regimen_fiscal:""}},Ee=s=>{const o=s.target?s.target.value:s,t=String(o).toUpperCase().replace(/[^A-ZÑ&0-9]/g,""),k=l.value.tipo_persona==="fisica"?13:12;l.value.rfc=t.slice(0,k),n.value.rfc&&(n.value.rfc="")},Ie=async s=>{const o=s.target?s.target.value:s,t=String(o).replace(/\D/g,"");if(l.value.codigo_postal=t.slice(0,5),n.value.codigo_postal&&(n.value.codigo_postal=""),l.value.codigo_postal.length===5)try{const v=await(await fetch(`/api/cp/${l.value.codigo_postal}`)).json();if(v.estado){const _=Be[v.estado]||v.estado;l.value.estado=_}v.municipio&&(l.value.municipio=v.municipio),(!l.value.pais||l.value.pais.trim()==="")&&(l.value.pais=v.pais),S.value=v.colonias||[],v.colonias&&v.colonias.length===1?l.value.colonia=v.colonias[0]:v.colonias&&v.colonias.length>1&&(l.value.colonia=""),n.value={...n.value,estado:"",municipio:"",pais:""}}catch{S.value=[],l.value.colonia=""}else S.value=[],l.value.colonia=""},F=s=>{l.value[s]&&typeof l.value[s]=="string"&&(l.value[s]=l.value[s].toUpperCase().trim(),n.value[s]&&(n.value[s]=""))},me=async()=>{V.value=!0,n.value={};try{const s=await fetch(route("proveedores.store"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(l.value)}),o=await s.json();s.ok?(proveedoresList.value.push(o.proveedor||o),se(o.proveedor||o),Q()):n.value=o.errors||{}}catch(s){console.error("Error al crear proveedor:",s)}finally{V.value=!1}},qe=()=>{E("ver-historial",h.proveedorSeleccionado)},Te=()=>{E("editar-proveedor",h.proveedorSeleccionado)},pe=()=>h.requerido&&!h.proveedorSeleccionado?($.value="Este campo es requerido",!1):($.value="",!0),ve=s=>{var v,_,T;const o=s.target,t=(v=j.value)==null?void 0:v.contains(o),k=((_=O.value)==null?void 0:_.contains(o))||((T=G.value)==null?void 0:T.contains(o));!t&&!k&&(i.value=!1)},J=()=>{i.value&&de()};return ye(()=>h.proveedorSeleccionado,s=>{s?(x.value=s.nombre_razon_social||"",$.value=""):re()},{immediate:!0}),ye(()=>h.requerido,()=>{ze(()=>{pe()})}),Ne(()=>{document.addEventListener("click",ve),window.addEventListener("resize",J),window.addEventListener("scroll",J)}),Re(()=>{document.removeEventListener("click",ve),window.removeEventListener("resize",J),window.removeEventListener("scroll",J),R.value&&clearTimeout(R.value),X.value&&clearTimeout(X.value)}),K({validarCamposRequeridos:pe,limpiarProveedor:ce,enfocarBusqueda:()=>{var s;return(s=j.value)==null?void 0:s.focus()}}),(s,o)=>(r(),a("div",Fe,[c.proveedorSeleccionado?m("",!0):(r(),a("div",Ue,[e("div",Oe,[e("label",Ge,[g(u(c.labelBusqueda)+" ",1),c.requerido?(r(),a("span",Xe,"*")):m("",!0)]),e("div",Ye,[w(e("input",{ref_key:"inputBusqueda",ref:j,type:"text","onUpdate:modelValue":o[0]||(o[0]=t=>x.value=t),onInput:we,onFocus:_e,onBlur:Ce,onKeydown:Me,placeholder:c.placeholderBusqueda,class:y(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm transition-all duration-200",{"border-red-300 focus:ring-red-500 focus:border-red-500":C.value||c.requerido&&$.value,"pl-10":c.iconoBusqueda}]),autocomplete:"new-password",disabled:c.deshabilitado},null,42,Qe),[[P,x.value]]),c.iconoBusqueda?(r(),a("div",Je,o[19]||(o[19]=[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)]))):m("",!0),e("div",Ze,[x.value&&!b.value?(r(),a("button",{key:0,onClick:re,type:"button",class:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100 transition-colors duration-200",title:"Limpiar búsqueda"},o[20]||(o[20]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):b.value?(r(),a("div",We)):(r(),a("svg",Ke,o[21]||(o[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},null,-1)])))])]),C.value||c.requerido&&N.value&&$.value?(r(),a("div",eo,u(C.value||$.value),1)):c.mensajeAyuda&&!x.value?(r(),a("div",oo,u(c.mensajeAyuda),1)):m("",!0),x.value&&!i.value&&M.value.length===0&&!b.value?(r(),a("div",to,' No se encontraron proveedores que coincidan con "'+u(x.value)+'" ',1)):m("",!0),c.mostrarFiltrosRapidos&&!c.proveedorSeleccionado?(r(),a("div",so,[(r(!0),a(A,null,D(c.filtrosRapidos,t=>(r(),a("button",{key:t.value,onClick:k=>Se(t),class:y(["inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors duration-200",q.value===t.value?"bg-green-100 text-green-800 border border-green-300":"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200"])},[t.icon?(r(),ie(Ve(t.icon),{key:0,class:"w-3 h-3 mr-1"})):m("",!0),g(" "+u(t.label),1)],10,ro))),128))])):m("",!0)])])),c.proveedorSeleccionado?(r(),a("div",ao,[e("div",io,[e("h3",lo,[o[22]||(o[22]=e("svg",{class:"w-5 h-5 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),g(" "+u(c.tituloProveedorSeleccionado),1)]),e("div",no,[c.mostrarHistorial?(r(),a("button",{key:0,onClick:qe,type:"button",class:"text-green-500 hover:text-green-700 hover:bg-green-100 p-1 rounded-full transition-colors duration-200",title:"Ver historial"},o[23]||(o[23]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]))):m("",!0),c.mostrarEditar?(r(),a("button",{key:1,onClick:Te,type:"button",class:"text-blue-500 hover:text-blue-700 hover:bg-blue-100 p-1 rounded-full transition-colors duration-200",title:"Editar proveedor"},o[24]||(o[24]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]))):m("",!0),e("button",{type:"button",onClick:ce,class:"text-red-500 hover:text-red-700 hover:bg-red-100 p-1 rounded-full transition-colors duration-200",title:`Cambiar ${c.tipoDocumento.toLowerCase()}`},o[25]||(o[25]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,uo)])]),e("div",co,[e("div",mo,[o[26]||(o[26]=e("div",{class:"flex items-center text-sm font-medium text-green-700"},[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),g(" Razón Social ")],-1)),e("div",po,u(c.proveedorSeleccionado.nombre_razon_social),1)]),c.proveedorSeleccionado.email?(r(),a("div",vo,[o[27]||(o[27]=e("div",{class:"flex items-center text-sm font-medium text-green-700"},[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})]),g(" Email ")],-1)),e("div",go,u(c.proveedorSeleccionado.email),1)])):m("",!0),c.proveedorSeleccionado.telefono?(r(),a("div",fo,[o[28]||(o[28]=e("div",{class:"flex items-center text-sm font-medium text-green-700"},[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})]),g(" Teléfono ")],-1)),e("div",xo,u(c.proveedorSeleccionado.telefono),1)])):m("",!0),c.proveedorSeleccionado.rfc?(r(),a("div",bo,[o[29]||(o[29]=e("div",{class:"flex items-center text-sm font-medium text-green-700"},[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),g(" RFC ")],-1)),e("div",yo,u(c.proveedorSeleccionado.rfc),1)])):m("",!0),c.mostrarEstadoProveedor?(r(),a("div",ho,[o[30]||(o[30]=e("div",{class:"flex items-center text-sm font-medium text-green-700"},[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),g(" Estado ")],-1)),e("div",ko,[e("div",{class:y(["w-3 h-3 rounded-full mr-2",{"bg-green-500":c.proveedorSeleccionado.estado==="activo","bg-yellow-500":c.proveedorSeleccionado.estado==="suspendido","bg-red-500":c.proveedorSeleccionado.estado==="inactivo","bg-gray-500":!c.proveedorSeleccionado.estado}])},null,2),e("span",wo,u(c.proveedorSeleccionado.estado||"Pendiente"),1)])])):m("",!0),z.value?(r(),a("div",_o,[o[31]||(o[31]=e("div",{class:"flex items-center text-sm font-medium text-green-700"},[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]),g(" Dirección ")],-1)),e("div",Co,u(z.value),1)])):m("",!0),c.proveedorSeleccionado.credito_limite&&c.mostrarInfoComercial?(r(),a("div",Mo,[o[32]||(o[32]=e("div",{class:"flex items-center text-sm font-medium text-green-700"},[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})]),g(" Límite de Crédito ")],-1)),e("div",So,u(Pe(c.proveedorSeleccionado.credito_limite)),1)])):m("",!0),c.proveedorSeleccionado.tipo_proveedor?(r(),a("div",Po,[o[33]||(o[33]=e("div",{class:"flex items-center text-sm font-medium text-green-700"},[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})]),g(" Tipo de Proveedor ")],-1)),e("div",Bo,u(c.proveedorSeleccionado.tipo_proveedor),1)])):m("",!0)]),ne.value.length>0?(r(),a("div",jo,[(r(!0),a(A,null,D(ne.value,t=>(r(),a("div",{key:t.id,class:y(["flex items-center p-3 rounded-lg text-sm",{"bg-red-50 text-red-800 border border-red-200":t.tipo==="error","bg-yellow-50 text-yellow-800 border border-yellow-200":t.tipo==="warning","bg-blue-50 text-blue-800 border border-blue-200":t.tipo==="info"}])},[o[34]||(o[34]=e("svg",{class:"w-4 h-4 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),g(" "+u(t.mensaje),1)],2))),128))])):m("",!0)])):(r(),a("div",$o,[o[36]||(o[36]=e("svg",{class:"w-12 h-12 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),e("p",Ao,u(c.mensajeVacio),1),e("p",Do,u(c.submensajeVacio),1),c.mostrarAccionRapida?(r(),a("div",Lo,[e("button",{onClick:W(ae,["stop"]),class:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors duration-200"},o[35]||(o[35]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),g(" Crear Nuevo Proveedor ")]))])):m("",!0)])),(r(),ie(ke,{to:"#app"},[i.value&&M.value.length>0?(r(),a("div",{key:0,ref_key:"listaProveedoresRef",ref:O,class:"z-[9999] mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-[60vh] overflow-y-auto pointer-events-auto",style:he({position:"absolute",width:ee.value+"px",top:I.value.top+I.value.height+"px",left:I.value.left+"px",pointerEvents:"auto"})},[e("div",Eo,[e("div",Io,[e("span",null,u(M.value.length)+" proveedor"+u(M.value.length!==1?"es":"")+" encontrado"+u(M.value.length!==1?"s":""),1),oe.value?(r(),a("span",qo,"("+u(oe.value)+"ms)",1)):m("",!0)])]),(r(!0),a(A,null,D(M.value,(t,k)=>(r(),a("div",{key:t.id,onClick:v=>se(t,v),onMouseenter:v=>p.value=k,class:y(["px-4 py-3 hover:bg-green-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors duration-150 pointer-events-auto",{"bg-green-50":p.value===k}]),style:{pointerEvents:"auto"}},[e("div",zo,[e("div",No,[e("div",Ro,[e("span",{innerHTML:H(t.nombre_razon_social,x.value)},null,8,Vo),e("div",Ho,[t.estado?(r(),a("div",{key:0,class:y(["w-2 h-2 rounded-full",{"bg-green-500":t.estado==="activo","bg-yellow-500":t.estado==="suspendido","bg-red-500":t.estado==="inactivo"}]),title:t.estado},null,10,Fo)):m("",!0)])]),e("div",Uo,[t.email?(r(),a("div",{key:0,class:"flex items-center",innerHTML:H(t.email,x.value)},null,8,Oo)):m("",!0),t.telefono?(r(),a("div",{key:1,class:"flex items-center",innerHTML:H(t.telefono,x.value)},null,8,Go)):m("",!0),t.rfc?(r(),a("div",{key:2,class:"flex items-center font-mono text-xs",innerHTML:H(t.rfc,x.value)},null,8,Xo)):m("",!0),t.tipo_proveedor?(r(),a("div",Yo," Tipo: "+u(t.tipo_proveedor),1)):m("",!0)])]),t.categoria?(r(),a("div",Qo,[e("div",{class:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded-full whitespace-nowrap",innerHTML:H(t.categoria,x.value)},null,8,Jo)])):m("",!0)])],42,To))),128)),x.value&&c.mostrarOpcionNuevoProveedor?(r(),a("div",Zo,[e("button",{onClick:W(ae,["stop"]),class:"w-full text-left px-3 py-2 text-sm text-green-600 hover:text-green-800 hover:bg-green-50 rounded-md transition-colors duration-150 flex items-center"},[o[37]||(o[37]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)),g(' Crear nuevo proveedor: "'+u(x.value)+'" ',1)])])):m("",!0)],4)):m("",!0),i.value&&M.value.length===0&&d.value?(r(),a("div",{key:1,ref_key:"listaVaciaRef",ref:G,class:"z-[9999] mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4",style:he({position:"absolute",width:ee.value+"px",top:I.value.top+I.value.height+"px",left:I.value.left+"px"})},[e("div",Wo,[o[39]||(o[39]=e("p",{class:"text-sm font-medium mb-1"},"No se encontraron proveedores",-1)),o[40]||(o[40]=e("p",{class:"text-xs text-gray-400 mb-3"},"Intenta con otro término de búsqueda",-1)),e("button",{onClick:W(ae,["stop"]),class:"inline-flex items-center px-3 py-2 text-sm text-green-600 hover:text-green-800 hover:bg-green-50 rounded-md transition-colors duration-150"},o[38]||(o[38]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),g(" Crear nuevo proveedor ")]))])],4)):m("",!0)])),(r(),ie(ke,{to:"#app"},[te.value?(r(),a("div",Ko,[e("div",et,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:Q}),e("div",ot,[e("div",tt,[e("div",st,[e("div",rt,[e("div",{class:"flex items-center justify-between mb-6"},[o[42]||(o[42]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Crear Nuevo Proveedor ",-1)),e("button",{onClick:Q,class:"text-gray-400 hover:text-gray-600 transition-colors duration-200"},o[41]||(o[41]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:W(me,["prevent"]),class:"space-y-6"},[e("div",at,[o[48]||(o[48]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Información General",-1)),e("div",it,[e("div",lt,[o[43]||(o[43]=e("label",{for:"modal-nombre_razon_social",class:"block text-sm font-medium text-gray-700"},[g(" Nombre/Razón Social "),e("span",{class:"text-red-500"},"*")],-1)),w(e("input",{type:"text",id:"modal-nombre_razon_social","onUpdate:modelValue":o[1]||(o[1]=t=>l.value.nombre_razon_social=t),onBlur:o[2]||(o[2]=t=>F("nombre_razon_social")),autocomplete:"off",class:y(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",n.value.nombre_razon_social?"border-red-300 bg-red-50":"border-gray-300"]),required:""},null,34),[[P,l.value.nombre_razon_social]]),n.value.nombre_razon_social?(r(),a("div",nt,u(n.value.nombre_razon_social),1)):m("",!0)]),e("div",null,[o[45]||(o[45]=e("label",{for:"modal-tipo_persona",class:"block text-sm font-medium text-gray-700"},[g(" Tipo de Persona "),e("span",{class:"text-red-500"},"*")],-1)),w(e("select",{id:"modal-tipo_persona","onUpdate:modelValue":o[3]||(o[3]=t=>l.value.tipo_persona=t),onChange:Le,class:y(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",n.value.tipo_persona?"border-red-300 bg-red-50":"border-gray-300"]),required:""},o[44]||(o[44]=[e("option",{value:""},"Selecciona una opción",-1),e("option",{value:"fisica"},"Persona Física",-1),e("option",{value:"moral"},"Persona Moral",-1)]),34),[[U,l.value.tipo_persona]]),n.value.tipo_persona?(r(),a("div",dt,u(n.value.tipo_persona),1)):m("",!0)]),e("div",null,[e("label",ut,[o[46]||(o[46]=g(" RFC ")),o[47]||(o[47]=e("span",{class:"text-red-500"},"*",-1)),e("span",ct," ("+u(l.value.tipo_persona==="fisica"?"13 caracteres":l.value.tipo_persona==="moral"?"12 caracteres":"Selecciona tipo de persona")+") ",1)]),e("input",{type:"text",id:"modal-rfc",maxlength:l.value.tipo_persona==="fisica"?13:12,placeholder:l.value.tipo_persona==="fisica"?"ABCD123456EFG":"ABC123456EFG",value:l.value.rfc,onInput:Ee,disabled:!l.value.tipo_persona,autocomplete:"off",class:y(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",n.value.rfc?"border-red-300 bg-red-50":"border-gray-300",l.value.tipo_persona?"":"bg-gray-100 text-gray-400"]),required:""},null,42,mt),n.value.rfc?(r(),a("div",pt,u(n.value.rfc),1)):m("",!0),l.value.tipo_persona?m("",!0):(r(),a("div",vt," Primero selecciona el tipo de persona "))])])]),e("div",gt,[o[53]||(o[53]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Información Fiscal",-1)),e("div",ft,[e("div",null,[o[50]||(o[50]=e("label",{for:"modal-regimen_fiscal",class:"block text-sm font-medium text-gray-700"},[g(" Régimen Fiscal "),e("span",{class:"text-red-500"},"*")],-1)),w(e("select",{id:"modal-regimen_fiscal","onUpdate:modelValue":o[4]||(o[4]=t=>l.value.regimen_fiscal=t),disabled:!l.value.tipo_persona,class:y(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",n.value.regimen_fiscal?"border-red-300 bg-red-50":"border-gray-300",l.value.tipo_persona?"":"bg-gray-100 text-gray-400"]),required:""},[o[49]||(o[49]=e("option",{value:""},"Selecciona una opción",-1)),(r(!0),a(A,null,D(De.value,t=>(r(),a("option",{key:t.codigo,value:t.codigo},u(t.codigo)+" - "+u(t.descripcion),9,bt))),128))],10,xt),[[U,l.value.regimen_fiscal]]),n.value.regimen_fiscal?(r(),a("div",yt,u(n.value.regimen_fiscal),1)):m("",!0),l.value.tipo_persona?m("",!0):(r(),a("div",ht," Primero selecciona el tipo de persona "))]),e("div",null,[o[52]||(o[52]=e("label",{for:"modal-uso_cfdi",class:"block text-sm font-medium text-gray-700"},[g(" Uso CFDI "),e("span",{class:"text-red-500"},"*")],-1)),w(e("select",{id:"modal-uso_cfdi","onUpdate:modelValue":o[5]||(o[5]=t=>l.value.uso_cfdi=t),class:y(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",n.value.uso_cfdi?"border-red-300 bg-red-50":"border-gray-300"]),required:""},[o[51]||(o[51]=e("option",{value:""},"Selecciona una opción",-1)),(r(),a(A,null,D(Ae,t=>e("option",{key:t.codigo,value:t.codigo},u(t.codigo)+" - "+u(t.descripcion),9,kt)),64))],2),[[U,l.value.uso_cfdi]]),n.value.uso_cfdi?(r(),a("div",wt,u(n.value.uso_cfdi),1)):m("",!0)])])]),e("div",_t,[o[56]||(o[56]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Información de Contacto",-1)),e("div",Ct,[e("div",null,[o[54]||(o[54]=e("label",{for:"modal-email",class:"block text-sm font-medium text-gray-700"},[g(" Email "),e("span",{class:"text-red-500"},"*")],-1)),w(e("input",{type:"email",id:"modal-email","onUpdate:modelValue":o[6]||(o[6]=t=>l.value.email=t),autocomplete:"new-password",placeholder:"correo@ejemplo.com",class:y(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",n.value.email?"border-red-300 bg-red-50":"border-gray-300"]),required:""},null,2),[[P,l.value.email]]),n.value.email?(r(),a("div",Mt,u(n.value.email),1)):m("",!0)]),e("div",null,[o[55]||(o[55]=e("label",{for:"modal-telefono",class:"block text-sm font-medium text-gray-700"}," Teléfono ",-1)),w(e("input",{type:"tel",id:"modal-telefono",autocomplete:"new-password","onUpdate:modelValue":o[7]||(o[7]=t=>l.value.telefono=t),placeholder:"Opcional",class:y(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",n.value.telefono?"border-red-300 bg-red-50":"border-gray-300"])},null,2),[[P,l.value.telefono]]),n.value.telefono?(r(),a("div",St,u(n.value.telefono),1)):m("",!0)])])]),e("div",null,[o[69]||(o[69]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Dirección",-1)),e("div",Pt,[e("div",Bt,[o[57]||(o[57]=e("label",{for:"modal-calle",class:"block text-sm font-medium text-gray-700"},[g(" Calle "),e("span",{class:"text-red-500"},"*")],-1)),w(e("input",{type:"text",id:"modal-calle","onUpdate:modelValue":o[8]||(o[8]=t=>l.value.calle=t),onBlur:o[9]||(o[9]=t=>F("calle")),autocomplete:"new-password",class:y(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",n.value.calle?"border-red-300 bg-red-50":"border-gray-300"]),required:""},null,34),[[P,l.value.calle]]),n.value.calle?(r(),a("div",jt,u(n.value.calle),1)):m("",!0)]),e("div",null,[o[58]||(o[58]=e("label",{for:"modal-numero_exterior",class:"block text-sm font-medium text-gray-700"},[g(" Número Exterior "),e("span",{class:"text-red-500"},"*")],-1)),w(e("input",{type:"text",id:"modal-numero_exterior","onUpdate:modelValue":o[10]||(o[10]=t=>l.value.numero_exterior=t),onBlur:o[11]||(o[11]=t=>F("numero_exterior")),autocomplete:"new-password",class:y(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",n.value.numero_exterior?"border-red-300 bg-red-50":"border-gray-300"]),required:""},null,34),[[P,l.value.numero_exterior]]),n.value.numero_exterior?(r(),a("div",$t,u(n.value.numero_exterior),1)):m("",!0)]),e("div",null,[o[59]||(o[59]=e("label",{for:"modal-numero_interior",class:"block text-sm font-medium text-gray-700"}," Número Interior ",-1)),w(e("input",{type:"text",id:"modal-numero_interior","onUpdate:modelValue":o[12]||(o[12]=t=>l.value.numero_interior=t),onBlur:o[13]||(o[13]=t=>F("numero_interior")),autocomplete:"new-password",class:y(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",n.value.numero_interior?"border-red-300 bg-red-50":"border-gray-300"])},null,34),[[P,l.value.numero_interior]]),n.value.numero_interior?(r(),a("div",At,u(n.value.numero_interior),1)):m("",!0)]),e("div",null,[o[60]||(o[60]=e("label",{for:"modal-colonia",class:"block text-sm font-medium text-gray-700"},[g(" Colonia "),e("span",{class:"text-red-500"},"*")],-1)),w(e("select",{id:"modal-colonia","onUpdate:modelValue":o[14]||(o[14]=t=>l.value.colonia=t),disabled:S.value.length===0,class:y(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",n.value.colonia?"border-red-300 bg-red-50":"border-gray-300",S.value.length===0?"bg-gray-100 text-gray-400":""]),required:""},[e("option",Lt,u(S.value.length===0?"Ingresa un código postal primero":"Selecciona una colonia"),1),(r(!0),a(A,null,D(S.value,t=>(r(),a("option",{key:t,value:t},u(t),9,Et))),128))],10,Dt),[[U,l.value.colonia]]),n.value.colonia?(r(),a("div",It,u(n.value.colonia),1)):m("",!0),S.value.length===0?(r(),a("div",qt," Primero ingresa un código postal válido para cargar las colonias disponibles ")):m("",!0)]),e("div",null,[o[61]||(o[61]=e("label",{for:"modal-codigo_postal",class:"block text-sm font-medium text-gray-700"},[g(" Código Postal "),e("span",{class:"text-red-500"},"*")],-1)),e("input",{type:"text",id:"modal-codigo_postal",maxlength:"5",pattern:"[0-9]{5}",value:l.value.codigo_postal,onInput:Ie,placeholder:"12345",autocomplete:"new-password",class:y(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",n.value.codigo_postal?"border-red-300 bg-red-50":"border-gray-300"]),required:""},null,42,Tt),n.value.codigo_postal?(r(),a("div",zt,u(n.value.codigo_postal),1)):m("",!0),o[62]||(o[62]=e("div",{class:"mt-1 text-xs text-gray-500"}," Al ingresar un código postal válido, se autocompletarán automáticamente el estado y municipio. ",-1))]),e("div",null,[o[63]||(o[63]=e("label",{for:"modal-municipio",class:"block text-sm font-medium text-gray-700"},[g(" Municipio "),e("span",{class:"text-red-500"},"*")],-1)),w(e("input",{type:"text",id:"modal-municipio","onUpdate:modelValue":o[15]||(o[15]=t=>l.value.municipio=t),autocomplete:"new-password",class:y(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",n.value.municipio?"border-red-300 bg-red-50":"border-gray-300"]),required:""},null,2),[[P,l.value.municipio]]),n.value.municipio?(r(),a("div",Nt,u(n.value.municipio),1)):m("",!0)]),e("div",null,[o[65]||(o[65]=e("label",{for:"modal-estado",class:"block text-sm font-medium text-gray-700"}," Estado ",-1)),w(e("select",{id:"modal-estado","onUpdate:modelValue":o[16]||(o[16]=t=>l.value.estado=t),class:"mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border-gray-300"},[o[64]||(o[64]=e("option",{value:""},"Selecciona una opción",-1)),(r(),a(A,null,D(je,t=>e("option",{key:t.value,value:t.value},u(t.text||t.label),9,Rt)),64))],512),[[U,l.value.estado]]),n.value.estado?(r(),a("div",Vt,u(n.value.estado),1)):m("",!0),o[66]||(o[66]=e("div",{class:"mt-1 text-xs text-gray-500"}," Opcional para proveedores extranjeros ",-1))]),e("div",null,[o[67]||(o[67]=e("label",{for:"modal-pais",class:"block text-sm font-medium text-gray-700"}," País ",-1)),w(e("input",{type:"text",id:"modal-pais","onUpdate:modelValue":o[17]||(o[17]=t=>l.value.pais=t),onBlur:o[18]||(o[18]=t=>F("pais")),placeholder:"MX (México por defecto)",autocomplete:"new-password",class:y(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",n.value.pais?"border-red-300 bg-red-50":"border-gray-300"])},null,34),[[P,l.value.pais]]),n.value.pais?(r(),a("div",Ht,u(n.value.pais),1)):m("",!0),o[68]||(o[68]=e("div",{class:"mt-1 text-xs text-gray-500"}," Código de país (2-3 letras). México por defecto, cambia para proveedores extranjeros. ",-1))])])])],32)])])]),e("div",Ft,[e("button",{type:"button",onClick:me,disabled:V.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"},[V.value?(r(),a("span",Ot,"Creando...")):(r(),a("span",Gt,"Crear Proveedor"))],8,Ut),e("button",{type:"button",onClick:Q,disabled:V.value,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancelar ",8,Xt)])])])])):m("",!0)]))]))}},Yt={class:"productos-seleccionados"},Qt={key:0,class:"mt-6"},Jt={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},Zt={class:"ml-2 bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full"},Wt={class:"space-y-4"},Kt={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},es={class:"flex-1 min-w-0"},os={class:"flex items-start justify-between"},ts={class:"flex-1"},ss={class:"text-lg font-semibold text-gray-900 mb-1"},rs={key:0,class:"text-sm text-gray-600 mb-2"},as={class:"space-y-1"},is={class:"flex items-center text-sm text-gray-500"},ls={key:0,class:"flex items-center text-sm text-gray-400"},ns=["onClick"],ds={class:"grid grid-cols-1 sm:grid-cols-4 gap-4 lg:w-96"},us={class:"relative"},cs=["value","onInput"],ms={class:"relative"},ps=["value","onInput"],vs={class:"relative"},gs=["value"],fs={class:"px-3 py-2 text-sm font-semibold text-green-600 bg-green-50 border border-green-200 rounded-lg"},xs={key:0,class:"mt-4 pt-4 border-t border-gray-200"},bs={class:"grid grid-cols-2 gap-4 text-sm"},ys={class:"text-gray-600"},hs={class:"float-right"},ks={class:"text-orange-600"},ws={class:"float-right"},_s={key:1,class:"mt-6 p-8 border-2 border-dashed border-gray-300 rounded-xl text-center"},Cs={__name:"ProductosSeleccionados",props:{selectedProducts:{type:Array,required:!0},productos:{type:Array,default:()=>[]},quantities:{type:Object,required:!0},prices:{type:Object,required:!0},discounts:{type:Object,required:!0}},emits:["eliminar-producto","update-quantity","update-discount","calcular-total"],setup(c,{emit:K}){const B=c,h=K,L=d=>{var b;if(console.log("getItemInfo llamado con:",d),console.log("Productos disponibles:",((b=B.productos)==null?void 0:b.length)||0),!d||!d.id||!d.tipo)return console.error("Entrada inválida para getItemInfo:",d),{nombre:"Entrada inválida",descripcion:"",precio:0,precio_compra:0};if(d.tipo!=="producto")return console.warn("Tipo no soportado:",d.tipo),{nombre:"Tipo no soportado",descripcion:"",precio:0,precio_compra:0};let i=B.productos.find(C=>C.id===d.id);if(!i&&d.nombre&&(console.log("Producto no encontrado en lista, usando datos del entry:",d),i={id:d.id,nombre:d.nombre,descripcion:d.descripcion||"",precio:d.precio||0,precio_compra:d.precio_compra||0,precio_venta:d.precio_venta||d.precio||0}),!i)return console.warn("Producto no encontrado para ID:",d.id),console.log("Productos disponibles:",B.productos),{nombre:"Producto no encontrado",descripcion:"",precio:0,precio_compra:0};const p={nombre:i.nombre||"Sin nombre",descripcion:i.descripcion||"",precio:i.precio_venta||i.precio||0,precio_compra:i.precio_compra||0};return console.log("Información del producto retornada:",p),p},z=d=>{const i=`${d.tipo}-${d.id}`,p=Number.parseFloat(B.quantities[i])||1,b=Number.parseFloat(B.prices[i])||0;return p*b},E=d=>{const i=`${d.tipo}-${d.id}`,p=z(d),b=Number.parseFloat(B.discounts[i])||0;return p*(b/100)},j=d=>{const i=z(d),p=E(d);return i-p},O=d=>{h("eliminar-producto",d)},G=(d,i)=>{if(console.log("ProductosSeleccionados - updateQuantity:",{entry:d!=null&&d.tipo?`${d.tipo}-${d.id}`:"entry inválido",value:i,valueType:typeof i}),!d||!d.tipo||!d.id){console.error("Entry inválido:",d);return}const p=`${d.tipo}-${d.id}`;(i==null||i==="")&&(console.warn(`Valor vacío para ${p}, usando 1 como default`),i="1");const b=Number.parseFloat(i),C=isNaN(b)?1:Math.max(1,b);console.log("ProductosSeleccionados - Emitiendo:",{key:p,quantity:C}),h("update-quantity",p,C)},x=(d,i)=>{const p=`${d.tipo}-${d.id}`,b=Math.min(100,Math.max(0,Number.parseFloat(i)||0));h("update-discount",p,b)};return(d,i)=>(r(),a("div",Yt,[c.selectedProducts.length>0?(r(),a("div",Qt,[e("h3",Jt,[i[0]||(i[0]=e("svg",{class:"w-5 h-5 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),i[1]||(i[1]=g(" Productos Seleccionados ")),e("span",Zt,u(c.selectedProducts.length),1)]),e("div",Wt,[(r(!0),a(A,null,D(c.selectedProducts,p=>(r(),a("div",{key:`${p.tipo}-${p.id}`,class:"bg-gradient-to-r from-gray-50 to-white border border-gray-200 rounded-xl p-6 hover:shadow-md transition-all duration-200"},[e("div",Kt,[e("div",es,[e("div",os,[e("div",ts,[i[4]||(i[4]=e("div",{class:"flex items-center mb-2"},[e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mr-3 bg-blue-100 text-blue-800"},[e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})]),g(" Producto ")])],-1)),e("h4",ss,u(L(p).nombre),1),L(p).descripcion?(r(),a("p",rs,u(L(p).descripcion),1)):m("",!0),e("div",as,[e("div",is,[i[2]||(i[2]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),g(" Precio unitario: $"+u(L(p).precio.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),L(p).precio_compra>0?(r(),a("div",ls,[i[3]||(i[3]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 2.5M7 13l2.5 2.5"})],-1)),g(" Precio compra: $"+u(L(p).precio_compra.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})),1)])):m("",!0)])]),e("button",{type:"button",onClick:b=>O(p),class:"text-red-500 hover:text-red-700 hover:bg-red-100 p-2 rounded-full transition-colors duration-200 flex-shrink-0",title:"Eliminar producto"},i[5]||(i[5]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,ns)])]),e("div",ds,[e("div",null,[i[6]||(i[6]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Cantidad",-1)),e("div",us,[e("input",{type:"number",value:c.quantities[`${p.tipo}-${p.id}`]||1,onInput:b=>G(p,b.target.value),min:"1",step:"1",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,40,cs)])]),e("div",null,[i[8]||(i[8]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Descuento %",-1)),e("div",ms,[e("input",{type:"number",value:c.discounts[`${p.tipo}-${p.id}`]||0,onInput:b=>x(p,b.target.value),min:"0",max:"100",step:"0.01",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},null,40,ps),i[7]||(i[7]=e("div",{class:"absolute inset-y-0 right-0 pr-2 flex items-center pointer-events-none"},[e("span",{class:"text-gray-400 text-xs"},"%")],-1))])]),e("div",null,[i[10]||(i[10]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Precio Unit.",-1)),e("div",vs,[e("input",{type:"text",value:"$"+(c.prices[`${p.tipo}-${p.id}`]||0).toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2}),readonly:"",class:"w-full px-3 py-2 text-sm bg-gray-100 border border-gray-300 rounded-lg text-gray-600 cursor-not-allowed"},null,8,gs),i[9]||(i[9]=e("div",{class:"absolute inset-y-0 right-0 pr-2 flex items-center pointer-events-none"},[e("svg",{class:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1))])]),e("div",null,[i[11]||(i[11]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Subtotal",-1)),e("div",fs," $"+u(j(p).toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})),1)])])]),(c.discounts[`${p.tipo}-${p.id}`]||0)>0?(r(),a("div",xs,[e("div",bs,[e("div",ys,[i[12]||(i[12]=e("span",{class:"font-medium"},"Subtotal sin descuento:",-1)),e("span",hs,"$"+u(z(p).toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),e("div",ks,[i[13]||(i[13]=e("span",{class:"font-medium"},"Descuento aplicado:",-1)),e("span",ws,"-$"+u(E(p).toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})),1)])])])):m("",!0)]))),128))])])):(r(),a("div",_s,i[14]||(i[14]=[e("svg",{class:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),e("p",{class:"text-gray-500 text-lg font-medium"},"No hay productos seleccionados",-1),e("p",{class:"text-gray-400 text-sm mt-1"},"Busca y agrega productos para comenzar",-1)])))]))}},Bs=He(Cs,[["__scopeId","data-v-32bbe6b7"]]);export{Bs as P,Ps as _};
