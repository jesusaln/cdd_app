import{T as V,r as j,c as A,i,o as l,g as u,f as e,u as r,Z as M,e as h,l as p,A as b,k as x,F as v,m as _,v as y,y as H,t as a,z as S,E as T,n as B,q as L}from"./vendor-d19pJyVS.js";import{A as N}from"./AppLayout-CcnrZQKI.js";import"./utils-Dq7h7Pqt.js";import"./app-BcT2PLJy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"flex items-center justify-between mb-6"},F={class:"flex gap-3"},E={class:"mb-8"},U={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},$=["value"],q={class:"p-4 border-2 rounded-lg cursor-pointer transition-all peer-checked:border-blue-500 peer-checked:bg-blue-50 hover:bg-gray-50"},z={class:"font-medium text-gray-900"},G={class:"text-sm text-gray-600"},O={key:0,class:"text-sm text-red-600 mt-2"},R={class:"mb-8"},Z={class:"flex items-center justify-between mb-4"},I={class:"flex items-center gap-3"},J={class:"mb-4 p-3 bg-blue-50 rounded-lg"},K={class:"flex items-center justify-between"},P={class:"text-sm text-blue-800"},Q={class:"text-sm text-blue-600"},W={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto"},X=["value"],Y={class:"p-4 border-2 rounded-lg cursor-pointer transition-all peer-checked:border-green-500 peer-checked:bg-green-50 hover:bg-gray-50"},ee={class:"flex items-start gap-3"},te=["src"],se={key:1,class:"w-12 h-12 bg-gray-200 rounded flex items-center justify-center"},re={class:"flex-1"},oe={class:"font-medium text-gray-900"},ae={class:"text-sm text-gray-600"},ne={key:0,class:"text-center py-8 text-gray-500"},ie={key:1,class:"text-sm text-red-600 mt-2"},le={class:"flex items-center justify-between pt-6 border-t"},de=["disabled"],pe=Object.assign({layout:N},{__name:"Create",props:{tecnicos:{type:Array,default:()=>[]},herramientas:{type:Array,default:()=>[]}},setup(f){const g=f,s=V({tecnico_id:"",herramientas:[]}),c=j(""),w=()=>{s.herramientas.length===d.value.length?s.herramientas=[]:s.herramientas=d.value.map(n=>n.id)},d=A(()=>c.value?g.herramientas.filter(n=>n.nombre.toLowerCase().includes(c.value.toLowerCase())||n.numero_serie&&n.numero_serie.toLowerCase().includes(c.value.toLowerCase())):g.herramientas),k=n=>({disponible:"bg-green-100 text-green-800",asignada:"bg-blue-100 text-blue-800",mantenimiento:"bg-yellow-100 text-yellow-800",baja:"bg-red-100 text-red-800",perdida:"bg-red-100 text-red-800"})[n]||"bg-gray-100 text-gray-800",C=()=>s.post(route("herramientas.gestion.asignar"));return(n,t)=>(l(),i(v,null,[u(r(M),{title:"Asignar Herramientas"}),e("div",D,[t[5]||(t[5]=e("div",null,[e("h1",{class:"text-3xl font-bold text-slate-900"},"Asignar Herramientas"),e("p",{class:"text-gray-600 mt-1"},"Selecciona un técnico y asigna las herramientas disponibles")],-1)),e("div",F,[u(r(b),{class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",href:n.route("herramientas.gestion.index")},{default:h(()=>t[3]||(t[3]=[p(" ← Volver a Gestión ")])),_:1},8,["href"]),u(r(b),{class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",href:n.route("herramientas.dashboard")},{default:h(()=>t[4]||(t[4]=[p(" Dashboard ")])),_:1},8,["href"])])]),e("form",{onSubmit:L(C,["prevent"]),class:"bg-white rounded-lg shadow-sm border p-6"},[e("div",E,[t[6]||(t[6]=e("label",{class:"block text-lg font-medium text-gray-700 mb-3"},"Seleccionar Técnico",-1)),e("div",U,[(l(!0),i(v,null,_(g.tecnicos,o=>(l(),i("label",{key:o.id,class:"relative"},[y(e("input",{type:"radio",value:o.id,"onUpdate:modelValue":t[0]||(t[0]=m=>r(s).tecnico_id=m),name:"tecnico_id",class:"sr-only peer",required:""},null,8,$),[[H,r(s).tecnico_id]]),e("div",q,[e("div",z,a(o.nombre),1),e("div",G,a(o.telefono||"Sin teléfono"),1)])]))),128))]),r(s).errors.tecnico_id?(l(),i("div",O,a(r(s).errors.tecnico_id),1)):x("",!0)]),e("div",R,[e("div",Z,[t[7]||(t[7]=e("h2",{class:"text-lg font-medium text-gray-700"},"Herramientas Disponibles",-1)),e("div",I,[y(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>c.value=o),type:"search",placeholder:"Buscar herramientas...",class:"border rounded px-3 py-2 text-sm"},null,512),[[S,c.value]]),e("button",{type:"button",onClick:w,class:"px-3 py-2 text-sm bg-gray-600 text-white rounded hover:bg-gray-700"},a(r(s).herramientas.length===d.value.length?"Deseleccionar Todas":"Seleccionar Todas"),1)])]),e("div",J,[e("div",K,[e("span",P,a(r(s).herramientas.length)+" herramienta"+a(r(s).herramientas.length!==1?"s":"")+" seleccionada"+a(r(s).herramientas.length!==1?"s":""),1),e("span",Q,a(d.value.length)+" disponible"+a(d.value.length!==1?"s":""),1)])]),e("div",W,[(l(!0),i(v,null,_(d.value,o=>(l(),i("label",{key:o.id,class:"relative"},[y(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":t[2]||(t[2]=m=>r(s).herramientas=m),class:"sr-only peer"},null,8,X),[[T,r(s).herramientas]]),e("div",Y,[e("div",ee,[o.foto?(l(),i("img",{key:0,src:`/storage/${o.foto}`,alt:"Foto",class:"w-12 h-12 object-cover rounded"},null,8,te)):(l(),i("div",se,t[8]||(t[8]=[e("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)]))),e("div",re,[e("h3",oe,a(o.nombre),1),e("p",ae,"Serie: "+a(o.numero_serie||"N/A"),1),e("span",{class:B(["text-xs px-2 py-1 rounded-full mt-1 inline-block",k(o.estado)])},a(o.estado),3)])])])]))),128))]),d.value.length===0?(l(),i("div",ne,t[9]||(t[9]=[e("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),e("p",null,"No hay herramientas disponibles para asignar",-1)]))):x("",!0),r(s).errors.herramientas?(l(),i("div",ie,a(r(s).errors.herramientas),1)):x("",!0)]),e("div",le,[u(r(b),{href:n.route("herramientas.gestion.index"),class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700"},{default:h(()=>t[10]||(t[10]=[p(" Cancelar ")])),_:1},8,["href"]),e("button",{disabled:r(s).processing||!r(s).tecnico_id||r(s).herramientas.length===0,type:"submit",class:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed"},a(r(s).processing?"Asignando...":`Asignar ${r(s).herramientas.length} Herramienta${r(s).herramientas.length!==1?"s":""}`),9,de)])],32)],64))}});export{pe as default};
