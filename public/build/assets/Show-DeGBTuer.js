import{r as x,i,o as d,g as u,f as t,u as m,Z as c,k as b,t as r,F as p,m as y,l as g,e as h,A as k,N as f}from"./vendor-d19pJyVS.js";import{N as w}from"./app-BcT2PLJy.js";import"./utils-Dq7h7Pqt.js";const E={class:"pedidos-show"},N={key:0,class:"bg-white rounded-lg shadow-md p-6"},C={class:"mb-4"},$={class:"mb-4"},P={class:"mb-4"},V={class:"mb-4"},B={key:1},S={key:2,class:"mt-6 flex space-x-4"},j={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},O={__name:"Show",props:{pedido:Object},emits:["convertir-a-venta"],setup(o){const n=x(!1),a=new w({duration:3e3,position:{x:"right",y:"top"}}),v=async l=>{if(n.value=!0,confirm("¿Estás seguro de que deseas eliminar este pedido?"))try{await f.delete(`/pedidos/${l}`,{onSuccess:()=>{a.success("Pedido eliminado exitosamente."),f.visit(route("pedidos.index"))},onError:()=>a.error("Error al eliminar el pedido.")})}catch(e){a.error("Ocurrió un error inesperado."),console.error("Error al eliminar el pedido:",e)}finally{n.value=!1}};return(l,e)=>(d(),i(p,null,[u(m(c),{title:"Mostrar Pedido"}),t("div",E,[e[9]||(e[9]=t("h1",{class:"text-2xl font-semibold mb-6"},"Detalles del Pedido",-1)),o.pedido?(d(),i("div",N,[t("div",C,[e[2]||(e[2]=t("h2",{class:"text-lg font-medium text-gray-700"},"Cliente",-1)),t("p",null,r(o.pedido.cliente.nombre_razon_social),1)]),t("div",$,[e[3]||(e[3]=t("h2",{class:"text-lg font-medium text-gray-700"},"Productos",-1)),t("ul",null,[(d(!0),i(p,null,y(o.pedido.productos,s=>(d(),i("li",{key:s.id,class:"mb-2"},[t("strong",null,r(s.nombre),1),g(" - $"+r(s.pivot.precio)+" (Cantidad: "+r(s.pivot.cantidad)+") ",1)]))),128))])]),t("div",P,[e[4]||(e[4]=t("h2",{class:"text-lg font-medium text-gray-700"},"Total",-1)),t("p",null,"$"+r(o.pedido.total),1)]),t("div",V,[e[5]||(e[5]=t("h2",{class:"text-lg font-medium text-gray-700"},"Estado",-1)),t("p",null,r(o.pedido.estado),1)])])):(d(),i("div",B,e[6]||(e[6]=[t("p",null,"Cargando detalles del pedido...",-1)]))),o.pedido?(d(),i("div",S,[u(m(k),{href:l.route("pedidos.edit",o.pedido.id),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},{default:h(()=>e[7]||(e[7]=[g(" Editar ")])),_:1},8,["href"]),t("button",{onClick:e[0]||(e[0]=s=>v(o.pedido.id)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," Eliminar "),t("button",{onClick:e[1]||(e[1]=s=>l.$emit("convertir-a-venta",o.pedido)),class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"}," Enviar a Ventas ")])):b("",!0),n.value?(d(),i("div",j,e[8]||(e[8]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"},null,-1)]))):b("",!0)])],64))}};export{O as default};
