import{r as w,c as r,i as l,o as a,g as m,u as g,Z as $,e as b,f as t,t as n,k as u,l as d,n as F,F as z,m as V,b as C,A as k}from"./vendor-d19pJyVS.js";import{A as B}from"./AppLayout-CcnrZQKI.js";import{_ as E}from"./VistaPreviaModal-CAwANwka.js";import"./utils-Dq7h7Pqt.js";import"./app-BcT2PLJy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"cotizaciones-show min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-6"},P={class:"max-w-4xl mx-auto"},D={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden mb-6"},S={class:"px-6 py-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white"},A={class:"text-xl font-bold"},G={class:"p-6"},L={key:0,class:"mt-2"},T={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden mb-6"},j={class:"p-6"},I={class:"min-w-full divide-y divide-gray-200"},O={class:"divide-y divide-gray-200"},Z={class:"px-4 py-3 text-sm"},q={class:"px-4 py-3 text-sm text-right"},H={class:"px-4 py-3 text-sm text-right"},J={class:"px-4 py-3 text-sm text-right"},K={class:"px-4 py-3 text-sm text-right"},M={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden mb-6"},Q={class:"p-6"},R={class:"space-y-2 text-right"},U={key:0},W={class:"text-xl"},X={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},Y={class:"p-6 flex flex-wrap gap-3"},it={__name:"Show",props:{cotizacion:Object,canConvert:{type:Boolean,default:!0},canEdit:{type:Boolean,default:!0},canDelete:{type:Boolean,default:!0}},setup(o){w(null);const v=r(()=>cotizacion.subtotal||0),c=r(()=>cotizacion.descuento_general||0),p=r(()=>cotizacion.iva||0),y=r(()=>cotizacion.total||0),f=r(()=>cotizacion.productos.map(i=>{var e,s,h;return{id:i.id,nombre:i.nombre,tipo:i.tipo,cantidad:((e=i.pivot)==null?void 0:e.cantidad)||1,precio:((s=i.pivot)==null?void 0:s.precio)||0,descuento:((h=i.pivot)==null?void 0:h.descuento)||0}})),x=w(!1);return(i,e)=>(a(),l(z,null,[m(g($),{title:"Ver Cotización"}),m(B,null,{default:b(()=>[t("div",N,[t("div",P,[t("div",D,[t("div",S,[t("h1",A,"Cotización #"+n(o.cotizacion.id),1)]),t("div",G,[t("p",null,[e[4]||(e[4]=t("strong",null,"Cliente:",-1)),d(" "+n(o.cotizacion.cliente.nombre_razon_social),1)]),t("p",null,[e[5]||(e[5]=t("strong",null,"Estado:",-1)),t("span",{class:F(["ml-2 px-3 py-1 rounded-full text-sm font-medium",{"bg-green-100 text-green-800":o.cotizacion.estado==="aprobada","bg-yellow-100 text-yellow-800":o.cotizacion.estado==="pendiente","bg-red-100 text-red-800":o.cotizacion.estado==="rechazada","bg-gray-100 text-gray-800":o.cotizacion.estado==="borrador"}])},n(o.cotizacion.estado),3)]),o.cotizacion.notas?(a(),l("p",L,[e[6]||(e[6]=t("strong",null,"Notas:",-1)),d(" "+n(o.cotizacion.notas),1)])):u("",!0)])]),t("div",T,[t("div",j,[e[8]||(e[8]=t("h2",{class:"text-lg font-semibold mb-4"},"Productos y Servicios",-1)),t("table",I,[e[7]||(e[7]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-500"},"Nombre"),t("th",{class:"px-4 py-2 text-right text-sm font-medium text-gray-500"},"Cantidad"),t("th",{class:"px-4 py-2 text-right text-sm font-medium text-gray-500"},"Precio"),t("th",{class:"px-4 py-2 text-right text-sm font-medium text-gray-500"},"Descuento"),t("th",{class:"px-4 py-2 text-right text-sm font-medium text-gray-500"},"Subtotal")])],-1)),t("tbody",O,[(a(!0),l(z,null,V(f.value,s=>(a(),l("tr",{key:s.id},[t("td",Z,n(s.nombre),1),t("td",q,n(s.cantidad),1),t("td",H,"$"+n(s.precio.toFixed(2)),1),t("td",J,n(s.descuento)+"%",1),t("td",K," $"+n((s.cantidad*s.precio*(1-s.descuento/100)).toFixed(2)),1)]))),128))])])])]),t("div",M,[t("div",Q,[t("div",R,[t("p",null,[e[9]||(e[9]=t("strong",null,"Subtotal:",-1)),d(" $"+n(v.value.toFixed(2)),1)]),c.value>0?(a(),l("p",U,[e[10]||(e[10]=t("strong",null,"Descuento:",-1)),d(" $"+n(c.value.toFixed(2)),1)])):u("",!0),t("p",null,[e[11]||(e[11]=t("strong",null,"IVA:",-1)),d(" $"+n(p.value.toFixed(2)),1)]),t("p",W,[e[12]||(e[12]=t("strong",null,"Total:",-1)),d(" $"+n(y.value.toFixed(2)),1)])])])]),t("div",X,[t("div",Y,[o.canConvert?(a(),l("button",{key:0,onClick:e[0]||(e[0]=s=>x.value=!0),class:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors"}," Convertir a Pedido ")):u("",!0),o.canEdit?(a(),C(g(k),{key:1,href:i.route("cotizaciones.edit",o.cotizacion.id),class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors"},{default:b(()=>e[13]||(e[13]=[d(" Editar ")])),_:1},8,["href"])):u("",!0),o.canDelete?(a(),C(g(k),{key:2,href:i.route("cotizaciones.destroy",o.cotizacion.id),method:"delete",as:"button",class:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors"},{default:b(()=>e[14]||(e[14]=[d(" Eliminar ")])),_:1},8,["href"])):u("",!0),t("button",{onClick:e[1]||(e[1]=s=>x.value=!0),class:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors"}," Vista Previa ")])])])]),m(E,{show:x.value,type:"cotizacion",cliente:o.cotizacion.cliente,items:f.value,totals:{subtotal:v.value,descuentoGeneral:c.value,iva:p.value,total:y.value},"descuento-general":c.value,notas:o.cotizacion.notas,onClose:e[2]||(e[2]=s=>x.value=!1),onPrint:e[3]||(e[3]=()=>i.window.print())},null,8,["show","cliente","items","totals","descuento-general","notas"])]),_:1})],64))}};export{it as default};
