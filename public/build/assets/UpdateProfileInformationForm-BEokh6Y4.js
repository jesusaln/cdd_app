import{T as U,r as p,b as y,o as d,e as i,g as s,u as l,l as u,n as z,i as P,k as f,f as a,v,L as _,J as j,q as b,A as B,N as E}from"./vendor-d19pJyVS.js";import{_ as L}from"./ActionMessage-BNJmmhy2.js";import{_ as q}from"./FormSection-iVRkzoEe.js";import{_ as k}from"./InputError-DR3j2HKb.js";import{_ as g}from"./InputLabel-BboP45ES.js";import{_ as R}from"./PrimaryButton-D_2lIeSZ.js";import{_ as V}from"./SecondaryButton-BHgzZ2Qe.js";import{_ as S}from"./TextInput-CLu6pR_b.js";import"./utils-Dq7h7Pqt.js";import"./SectionTitle-BO8LIPnY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={key:0,class:"col-span-6 sm:col-span-4"},A={class:"mt-2"},D=["src","alt"],G={class:"mt-2"},O={class:"col-span-6 sm:col-span-4"},H={class:"col-span-6 sm:col-span-4"},J={key:0},M={class:"text-sm mt-2 text-black"},K={class:"mt-2 font-medium text-sm text-green-600"},re={__name:"UpdateProfileInformationForm",props:{user:Object},setup(w){const r=w,t=U({_method:"PUT",name:r.user.name,email:r.user.email,photo:null}),h=p(null),c=p(null),n=p(null),N=()=>{var o;(o=n.value)!=null&&o.files[0]&&(t.photo=n.value.files[0]),t.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,forceFormData:!0,onSuccess:()=>{x(),r.user.profile_photo_url=URL.createObjectURL(t.photo)}})},$=()=>{h.value=!0},C=()=>{n.value.click()},F=()=>{const o=n.value.files[0];if(!o)return;const e=new FileReader;e.onload=m=>{c.value=m.target.result},e.readAsDataURL(o)},I=()=>{E.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{c.value=null,x(),r.user.profile_photo_url=null}})},x=()=>{var o;(o=n.value)!=null&&o.value&&(n.value.value=null)};return(o,e)=>(d(),y(q,{onSubmitted:N},{title:i(()=>e[2]||(e[2]=[a("h2",{class:"text-black font-semibold text-xl leading-tight"}," Información del Perfil ",-1)])),description:i(()=>e[3]||(e[3]=[a("p",{class:"text-black"}," Actualiza la información del perfil y la dirección de correo electrónico de tu cuenta. ",-1)])),form:i(()=>[o.$page.props.jetstream.managesProfilePhotos?(d(),P("div",T,[a("input",{id:"photo",ref_key:"photoInput",ref:n,type:"file",class:"hidden",onChange:F},null,544),s(g,{for:"photo",value:"Foto",class:"text-black"}),v(a("div",A,[a("img",{src:r.user.profile_photo_url,alt:r.user.name,class:"rounded-full size-20 object-cover"},null,8,D)],512),[[_,!c.value&&r.user.profile_photo_url]]),v(a("div",G,[a("span",{class:"block rounded-full size-20 bg-cover bg-no-repeat bg-center",style:j("background-image: url('"+c.value+"');")},null,4)],512),[[_,c.value]]),s(V,{class:"mt-2 me-2 text-black",type:"button",onClick:b(C,["prevent"])},{default:i(()=>e[4]||(e[4]=[u(" Seleccionar Nueva Foto ")])),_:1}),r.user.profile_photo_path?(d(),y(V,{key:0,type:"button",class:"mt-2 text-black",onClick:b(I,["prevent"])},{default:i(()=>e[5]||(e[5]=[u(" Eliminar Foto ")])),_:1})):f("",!0),s(k,{message:l(t).errors.photo,class:"mt-2 text-black"},null,8,["message"])])):f("",!0),a("div",O,[s(g,{for:"name",value:"Nombre",class:"text-black"}),s(S,{id:"name",modelValue:l(t).name,"onUpdate:modelValue":e[0]||(e[0]=m=>l(t).name=m),type:"text",class:"mt-1 block w-full text-black",required:"",autocomplete:"name"},null,8,["modelValue"]),s(k,{message:l(t).errors.name,class:"mt-2 text-black"},null,8,["message"])]),a("div",H,[s(g,{for:"email",value:"Correo Electrónico",class:"text-black"}),s(S,{id:"email",modelValue:l(t).email,"onUpdate:modelValue":e[1]||(e[1]=m=>l(t).email=m),type:"email",class:"mt-1 block w-full text-black",required:"",autocomplete:"username"},null,8,["modelValue"]),s(k,{message:l(t).errors.email,class:"mt-2 text-black"},null,8,["message"]),o.$page.props.jetstream.hasEmailVerification&&r.user.email_verified_at===null?(d(),P("div",J,[a("p",M,[e[7]||(e[7]=u(" Tu dirección de correo electrónico no está verificada. ")),s(l(B),{href:o.route("verification.send"),method:"post",as:"button",class:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:b($,["prevent"])},{default:i(()=>e[6]||(e[6]=[u(" Haz clic aquí para reenviar el correo de verificación. ")])),_:1},8,["href"])]),v(a("div",K," Se ha enviado un nuevo enlace de verificación a tu dirección de correo electrónico. ",512),[[_,h.value]])])):f("",!0)])]),actions:i(()=>[s(L,{on:l(t).recentlySuccessful,class:"me-3 text-black"},{default:i(()=>e[8]||(e[8]=[u(" Guardado. ")])),_:1},8,["on"]),s(R,{class:z([{"opacity-25":l(t).processing},"text-black"]),disabled:l(t).processing},{default:i(()=>e[9]||(e[9]=[u(" Guardar ")])),_:1},8,["class","disabled"])]),_:1}))}};export{re as default};
