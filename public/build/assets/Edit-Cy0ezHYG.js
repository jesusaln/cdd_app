import{r as D,T as ue,p as me,c as w,w as H,i,o as n,g as Z,f as t,u as r,Z as pe,k as p,l as x,F as C,m as E,t as c,q as fe,v as g,z as _,n as b,E as ge,x as U,e as be,A as xe}from"./vendor-d19pJyVS.js";import{a as Q}from"./utils-Dq7h7Pqt.js";import{A as ve}from"./AppLayout-CcnrZQKI.js";import"./app-BcT2PLJy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const _e={class:"max-w-4xl mx-auto p-4"},ye={class:"bg-white shadow-sm rounded-lg p-6"},we={key:0,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},ke={class:"flex"},Ce={class:"ml-3"},he={class:"mt-2 text-sm text-red-700"},Ee={class:"list-disc list-inside space-y-1"},Se={key:1,class:"mb-6 p-4 bg-green-50 border border-green-200 rounded-md","aria-live":"polite"},Ue={class:"border-b border-gray-200 pb-6"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ae={class:"md:col-span-2"},De={class:"mb-4"},Fe={key:0,class:"mt-2 text-sm text-red-600"},Le={class:"mb-4"},Ve={key:0,class:"mt-2 text-sm text-red-600"},Be={class:"mb-4"},ze={key:0,class:"mt-2 text-sm text-red-600"},Ie={class:"border-b border-gray-200 pb-6"},Oe={class:"grid grid-cols-1 gap-6"},je={class:"mb-4"},Pe={class:"inline-flex items-center"},$e={class:"border-b border-gray-200 pb-6"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Re={class:"mb-4"},Te={key:0,class:"mt-2 text-sm text-red-600"},Ne={class:"mb-4"},Xe=["maxlength","placeholder","disabled"],Ge={key:0,class:"mt-2 text-sm text-red-600"},He={key:1,class:"mt-1 text-xs text-gray-500"},Ze={class:"mb-4"},Qe=["disabled","placeholder"],Ye={key:0,class:"mt-2 text-sm text-red-600"},Je={key:1,class:"mt-1 text-xs text-gray-500"},We={class:"mb-4"},Ke=["disabled"],eo=["value"],oo={key:0,class:"mt-2 text-sm text-red-600"},to={key:1,class:"mt-1 text-xs text-gray-500"},so={class:"mb-4"},ro=["value"],lo={key:0,class:"mt-2 text-sm text-red-600"},ao={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},io={class:"md:col-span-2"},no={class:"mb-4"},co={key:0,class:"mt-2 text-sm text-red-600"},uo={class:"mb-4"},mo={key:0,class:"mt-2 text-sm text-red-600"},po={class:"mb-4"},fo={key:0,class:"mt-2 text-sm text-red-600"},go={class:"mb-4"},bo=["disabled"],xo={value:""},vo=["value"],_o={key:0,class:"mt-2 text-sm text-red-600"},yo={key:1,class:"mt-1 text-xs text-gray-500"},wo={class:"mb-4"},ko=["value"],Co={key:0,class:"mt-2 text-sm text-red-600"},ho={class:"mb-4"},Eo={key:0,class:"mt-2 text-sm text-red-600"},So={class:"mb-4"},Uo=["value"],Mo={key:0,class:"mt-2 text-sm text-red-600"},Ao={class:"mb-4"},Do={key:0,class:"mt-2 text-sm text-red-600"},Fo={key:0,class:"bg-gray-50 p-4 rounded-md text-xs"},Lo={class:"mt-2"},Vo={class:"ml-4 list-disc"},Bo={class:"flex justify-between space-x-4 pt-6 border-t border-gray-200"},zo={class:"flex space-x-4"},Io=["disabled"],Oo=["disabled"],jo={key:0,class:"flex items-center"},Po={key:1},Xo=Object.assign({layout:ve},{__name:"Edit",props:{catalogs:{type:Object,required:!0},cliente:{type:Object,required:!0}},setup(F){const u=F,S=D(!1),Y=D(!1),f=D([]),L={Aguascalientes:"AGU","Baja California":"BCN","Baja California Sur":"BCS",Campeche:"CAM",Chiapas:"CHP",Chihuahua:"CHH",Coahuila:"COA",Colima:"COL","Ciudad de México":"CDMX",Durango:"DUR",Guanajuato:"GUA",Guerrero:"GRO",Hidalgo:"HID",Jalisco:"JAL",México:"MEX",Michoacán:"MIC",Morelos:"MOR",Nayarit:"NAY","Nuevo León":"NLE",Oaxaca:"OAX",Puebla:"PUE",Querétaro:"QUE","Quintana Roo":"ROO","San Luis Potosí":"SLP",Sinaloa:"SIN",Sonora:"SON",Tabasco:"TAB",Tamaulipas:"TAM",Tlaxcala:"TLA",Veracruz:"VER",Yucatán:"YUC",Zacatecas:"ZAC"},V=()=>{var l,o,s,a,d,m,v,y,h,P,$,q,R,T,N,X,G;return{nombre_razon_social:((l=u.cliente)==null?void 0:l.nombre_razon_social)||"",email:((o=u.cliente)==null?void 0:o.email)||"",telefono:((s=u.cliente)==null?void 0:s.telefono)||"",tipo_persona:((a=u.cliente)==null?void 0:a.tipo_persona)||"",rfc:((d=u.cliente)==null?void 0:d.rfc)||"",curp:((m=u.cliente)==null?void 0:m.curp)||"",regimen_fiscal:((v=u.cliente)==null?void 0:v.regimen_fiscal)||"",uso_cfdi:((y=u.cliente)==null?void 0:y.uso_cfdi)||"G03",calle:((h=u.cliente)==null?void 0:h.calle)||"",numero_exterior:((P=u.cliente)==null?void 0:P.numero_exterior)||"",numero_interior:(($=u.cliente)==null?void 0:$.numero_interior)||"",colonia:((q=u.cliente)==null?void 0:q.colonia)||"",codigo_postal:((R=u.cliente)==null?void 0:R.codigo_postal)||"",municipio:((T=u.cliente)==null?void 0:T.municipio)||"",estado:((N=u.cliente)==null?void 0:N.estado)||"SON",pais:((X=u.cliente)==null?void 0:X.pais)||"MX",activo:((G=u.cliente)==null?void 0:G.activo)??!0}},e=ue(V());me(async()=>{const l=e.codigo_postal;if(l&&l.length===5)try{const o=await fetch(`/api/cp/${l}`);if(o.ok){const s=await o.json();if(f.value=s.colonias||[],!(e.colonia&&s.colonias&&s.colonias.includes(e.colonia))){if(s.colonias&&s.colonias.length===1)e.colonia=s.colonias[0];else if(e.colonia&&s.colonias){const a=e.colonia.toLowerCase().trim(),d=s.colonias.find(m=>m.toLowerCase().trim()===a||m.toLowerCase().trim().includes(a)||a.includes(m.toLowerCase().trim()));d?e.colonia=d:(console.warn("Colonia del cliente no encontrada en el código postal, manteniendo valor actual:",e.colonia),f.value=[e.colonia,...s.colonias])}}}}catch(o){console.warn("Error al cargar colonias en edición:",o)}});const M=w(()=>Object.keys(e.errors).length>0),B=["nombre_razon_social","email","tipo_persona","rfc","regimen_fiscal","uso_cfdi","calle","numero_exterior","colonia","codigo_postal","municipio"],z=w(()=>B.every(l=>{const o=e[l];return o!=null&&String(o).trim()!==""&&String(o).trim()!=="null"&&String(o).trim()!=="undefined"})),A=w(()=>z.value&&!M.value&&!e.processing),I=w(()=>{var l;return((l=e.rfc)==null?void 0:l.toUpperCase())==="XEXX010101000"}),J=l=>{const o={...l};if(o.estado&&o.estado.length!==3){const s=L[o.estado];s&&(o.estado=s)}return I.value||(o.pais="MX"),o},W=w(()=>{var l,o;return Array.isArray((l=u.catalogs)==null?void 0:l.estados)&&((o=u.catalogs.estados[0])!=null&&o.clave)?u.catalogs.estados.map(s=>({value:s.clave,text:`${s.clave} — ${s.nombre}`})):Object.entries(L).map(([s,a])=>({value:a,text:`${a} — ${s}`}))}),K=w(()=>{var o,s;if(!e.tipo_persona)return[];const l=((o=u.catalogs)==null?void 0:o.regimenesFiscales)||((s=u.catalogs)==null?void 0:s.regimenes)||[];return console.log("Regímenes raw data:",l,"Tipo persona:",e.tipo_persona),l.filter(a=>!a.persona_moral&&!a.persona_fisica?!0:e.tipo_persona==="moral"?a.persona_moral:a.persona_fisica).map(a=>{const d=(a.clave||a.codigo||a.id||a.value||"").toString().trim();let m=(a.descripcion||a.nombre||a.text||a.label||d).toString().trim();return m.startsWith(`${d} —`)||(m=`${d} — ${m}`),{value:d,text:m}}).filter((a,d,m)=>d===m.findIndex(v=>v.value.toString().trim().toUpperCase()===a.value.toString().trim().toUpperCase()))}),ee=w(()=>{var o,s,a;const l=((o=u.catalogs)==null?void 0:o.usosCFDI)||((s=u.catalogs)==null?void 0:s.usos_cfdi)||((a=u.catalogs)==null?void 0:a.usos)||[];return console.log("Usos CFDI raw data:",l),l.map(d=>{const m=d.clave||d.codigo||d.id||d.value,v=d.descripcion||d.nombre||d.text||d.label||m;return{value:m,text:`${m} — ${v}`}})}),O=w(()=>e.tipo_persona==="fisica"?13:12),oe=w(()=>e.tipo_persona==="fisica"?"ABCD123456EFG":"ABC123456EF");H(()=>e.tipo_persona,(l,o)=>{l!==o&&o&&(e.rfc="",e.regimen_fiscal="",e.clearErrors(["rfc","regimen_fiscal"]))}),H(I,l=>{l||(e.pais="MX")});const te=()=>{var o;const l=(o=u.cliente)==null?void 0:o.tipo_persona;e.tipo_persona!==l&&(e.rfc="",e.regimen_fiscal="",e.clearErrors(["rfc","regimen_fiscal"]))},se=l=>{const o=l.target?l.target.value:l,s=String(o).toUpperCase().replace(/[^A-ZÑ&0-9]/g,""),a=O.value;e.rfc=s.slice(0,a),e.rfc&&e.errors.rfc&&e.clearErrors("rfc")},re=async l=>{const o=l.target?l.target.value:l,s=String(o).replace(/\D/g,"");if(e.codigo_postal=s.slice(0,5),e.codigo_postal&&e.errors.codigo_postal&&e.clearErrors("codigo_postal"),e.codigo_postal.length===5)try{const a=await fetch(`/api/cp/${e.codigo_postal}`);if(a.ok){const d=await a.json();d.estado&&(e.estado=d.estado),e.municipio=d.municipio,(!e.pais||e.pais.trim()==="")&&(e.pais=d.pais);const m=d.colonias||[];if(f.value=m,m.length===1)e.colonia=m[0];else if(m.length>1&&!(e.colonia&&m.includes(e.colonia)))if(e.colonia){const v=e.colonia.toLowerCase().trim(),y=m.find(h=>h.toLowerCase().trim()===v||h.toLowerCase().trim().includes(v)||v.includes(h.toLowerCase().trim()));y?e.colonia=y:e.colonia=""}else e.colonia="";e.clearErrors(["estado","municipio","pais"])}else f.value=[],e.colonia=""}catch(a){console.warn("Error al consultar código postal:",a),f.value=[],e.colonia=""}else f.value=[],e.colonia=""},k=l=>{e[l]&&typeof e[l]=="string"&&(e[l]=e[l].toUpperCase().trim(),e[l]&&e.errors[l]&&e.clearErrors(l))},j=()=>{e.email&&typeof e.email=="string"&&(e.email=e.email.toLowerCase().trim(),e.email&&e.errors.email&&e.clearErrors("email"))},le=l=>{const o=l.target?l.target.value:l,s=String(o).replace(/\D/g,"").slice(0,10);e.telefono=s,e.telefono&&e.errors.telefono&&e.clearErrors("telefono")},ae=async()=>{const l=V();Object.keys(l).forEach(s=>{e[s]=l[s]}),e.clearErrors(),S.value=!1;const o=e.codigo_postal;if(o&&o.length===5)try{const s=await fetch(`/api/cp/${o}`);if(s.ok){const d=(await s.json()).colonias||[];if(e.colonia&&!d.includes(e.colonia)){const m=e.colonia.toLowerCase().trim(),v=d.find(y=>y.toLowerCase().trim()===m||y.toLowerCase().trim().includes(m)||m.includes(y.toLowerCase().trim()));v?(e.colonia=v,f.value=d):f.value=[e.colonia,...d]}else f.value=d}else f.value=[]}catch(s){console.warn("Error al recargar colonias en resetForm:",s),f.value=[]}else f.value=[]},ie=l=>{const o=l.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"");e.curp=o.slice(0,18),e.curp&&e.errors.curp&&e.clearErrors("curp")},ne=async(l,o=null)=>{if(l.trim())try{const s={rfc:l.trim()};o&&(s.cliente_id=o);const a=await Q.get(route("clientes.validarRfc"),{params:s});a.data.success?(e.clearErrors("rfc"),a.data.exists&&e.setError("rfc",a.data.message)):e.setError("rfc",a.data.message)}catch(s){console.error("Error validating RFC:",s),e.setError("rfc","Error al validar RFC")}},de=async l=>{if(l.trim())try{const o=await Q.get(route("clientes.validarEmail"),{params:{email:l.trim()}});o.data.success?e.clearErrors("email"):e.setError("email",o.data.message)}catch(o){console.error("Error validating email:",o),e.setError("email","Error al validar email")}},ce=()=>{if(S.value=!1,!A.value){console.warn("Formulario no válido, evitando envío");return}j();const l=J(e.data());e.put(route("clientes.update",u.cliente.id),{data:l,preserveScroll:!0,onSuccess:()=>{S.value=!0,setTimeout(()=>{S.value=!1},3e3)},onError:o=>{console.error("Errores de validación:",o)}})};return(l,o)=>(n(),i(C,null,[Z(r(pe),{title:"Editar Cliente"}),t("div",_e,[t("div",ye,[o[58]||(o[58]=t("div",{class:"flex items-center justify-between mb-6"},[t("div",null,[t("h1",{class:"text-2xl font-semibold text-gray-800"},"Editar Cliente")]),t("div",{class:"text-sm text-gray-500"},[x(" Campos obligatorios marcados con "),t("span",{class:"text-red-500"},"*")])],-1)),M.value?(n(),i("div",we,[t("div",ke,[t("div",Ce,[o[24]||(o[24]=t("h3",{class:"text-sm font-medium text-red-800"},"Error en el formulario",-1)),t("div",he,[t("ul",Ee,[(n(!0),i(C,null,E(r(e).errors,(s,a)=>(n(),i("li",{key:a},c(Array.isArray(s)?s[0]:s),1))),128))])])])])])):p("",!0),S.value?(n(),i("div",Se,o[25]||(o[25]=[t("p",{class:"text-sm font-medium text-green-800"},"Cliente actualizado exitosamente",-1)]))):p("",!0),t("form",{onSubmit:fe(ce,["prevent"]),class:"space-y-8"},[t("div",Ue,[o[29]||(o[29]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Información General",-1)),t("div",Me,[t("div",Ae,[t("div",De,[o[26]||(o[26]=t("label",{for:"nombre_razon_social",class:"block text-sm font-medium text-gray-700"},[x(" Nombre/Razón Social "),t("span",{class:"text-red-500"},"*")],-1)),g(t("input",{type:"text",id:"nombre_razon_social","onUpdate:modelValue":o[0]||(o[0]=s=>r(e).nombre_razon_social=s),onBlur:o[1]||(o[1]=s=>k("nombre_razon_social")),autocomplete:"off",class:b(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",r(e).errors.nombre_razon_social?"border-red-300 bg-red-50":"border-gray-300"]),required:""},null,34),[[_,r(e).nombre_razon_social]]),r(e).errors.nombre_razon_social?(n(),i("div",Fe,c(r(e).errors.nombre_razon_social),1)):p("",!0)])]),t("div",Le,[o[27]||(o[27]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"},[x(" Email "),t("span",{class:"text-red-500"},"*")],-1)),g(t("input",{type:"email",id:"email","onUpdate:modelValue":o[2]||(o[2]=s=>r(e).email=s),onBlur:o[3]||(o[3]=()=>{j(),de(r(e).email)}),placeholder:"correo@ejemplo.com",autocomplete:"new-password",class:b(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",r(e).errors.email?"border-red-300 bg-red-50":"border-gray-300"]),required:""},null,34),[[_,r(e).email]]),r(e).errors.email?(n(),i("div",Ve,c(r(e).errors.email),1)):p("",!0)]),t("div",Be,[o[28]||(o[28]=t("label",{for:"telefono",class:"block text-sm font-medium text-gray-700"}," Teléfono ",-1)),g(t("input",{type:"tel",id:"telefono","onUpdate:modelValue":o[4]||(o[4]=s=>r(e).telefono=s),onInput:le,maxlength:"10",placeholder:"10 dígitos (opcional)",pattern:"[0-9]{10}",autocomplete:"tel-national",class:b(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",r(e).errors.telefono?"border-red-300 bg-red-50":"border-gray-300"])},null,34),[[_,r(e).telefono]]),r(e).errors.telefono?(n(),i("div",ze,c(r(e).errors.telefono),1)):p("",!0)])])]),t("div",Ie,[o[32]||(o[32]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Estado del Cliente",-1)),t("div",Oe,[t("div",je,[t("label",Pe,[g(t("input",{type:"checkbox","onUpdate:modelValue":o[5]||(o[5]=s=>r(e).activo=s),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[ge,r(e).activo]]),o[30]||(o[30]=t("span",{class:"ml-2 text-sm font-medium text-gray-700"},"Cliente Activo",-1))]),o[31]||(o[31]=t("p",{class:"mt-1 text-xs text-gray-500"}," Desmarca para inactivar el cliente. Los clientes inactivos no aparecerán en listas por defecto. ",-1))])])]),t("div",$e,[o[41]||(o[41]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Información Fiscal",-1)),t("div",qe,[t("div",Re,[o[34]||(o[34]=t("label",{for:"tipo_persona",class:"block text-sm font-medium text-gray-700"},[x(" Tipo de Persona "),t("span",{class:"text-red-500"},"*")],-1)),g(t("select",{id:"tipo_persona","onUpdate:modelValue":o[6]||(o[6]=s=>r(e).tipo_persona=s),onChange:te,class:b(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",r(e).errors.tipo_persona?"border-red-300 bg-red-50":"border-gray-300"]),required:""},o[33]||(o[33]=[t("option",{value:""},"Selecciona una opción",-1),t("option",{value:"fisica"},"Persona Física",-1),t("option",{value:"moral"},"Persona Moral",-1)]),34),[[U,r(e).tipo_persona]]),r(e).errors.tipo_persona?(n(),i("div",Te,c(r(e).errors.tipo_persona),1)):p("",!0)]),t("div",Ne,[o[35]||(o[35]=t("label",{for:"rfc",class:"block text-sm font-medium text-gray-700"},[x(" RFC "),t("span",{class:"text-red-500"},"*")],-1)),g(t("input",{type:"text",id:"rfc","onUpdate:modelValue":o[7]||(o[7]=s=>r(e).rfc=s),maxlength:O.value,placeholder:oe.value,onInput:se,onBlur:o[8]||(o[8]=()=>{k("rfc"),ne(r(e).rfc,u.cliente.id)}),disabled:!r(e).tipo_persona,autocomplete:"off",class:b(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",r(e).errors.rfc?"border-red-300 bg-red-50":"border-gray-300",r(e).tipo_persona?"":"bg-gray-100 text-gray-400"]),required:""},null,42,Xe),[[_,r(e).rfc]]),r(e).errors.rfc?(n(),i("div",Ge,c(r(e).errors.rfc),1)):p("",!0),r(e).tipo_persona?p("",!0):(n(),i("div",He," Primero selecciona el tipo de persona "))]),t("div",Ze,[o[36]||(o[36]=t("label",{for:"curp",class:"block text-sm font-medium text-gray-700"}," CURP ",-1)),g(t("input",{type:"text",id:"curp","onUpdate:modelValue":o[9]||(o[9]=s=>r(e).curp=s),onInput:ie,onBlur:o[10]||(o[10]=s=>k("curp")),disabled:r(e).tipo_persona==="moral",maxlength:18,placeholder:r(e).tipo_persona==="fisica"?"ABCD123456HMEFGH99":"Opcional",autocomplete:"off",class:b(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",r(e).errors.curp?"border-red-300 bg-red-50":"border-gray-300",r(e).tipo_persona==="moral"?"bg-gray-100 text-gray-400":""])},null,42,Qe),[[_,r(e).curp]]),r(e).errors.curp?(n(),i("div",Ye,c(r(e).errors.curp),1)):p("",!0),r(e).tipo_persona==="moral"?(n(),i("div",Je," Opcional para personas morales ")):p("",!0)]),t("div",We,[o[38]||(o[38]=t("label",{for:"regimen_fiscal",class:"block text-sm font-medium text-gray-700"},[x(" Régimen Fiscal "),t("span",{class:"text-red-500"},"*")],-1)),g(t("select",{id:"regimen_fiscal","onUpdate:modelValue":o[11]||(o[11]=s=>r(e).regimen_fiscal=s),disabled:!r(e).tipo_persona,class:b(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",r(e).errors.regimen_fiscal?"border-red-300 bg-red-50":"border-gray-300",r(e).tipo_persona?"":"bg-gray-100 text-gray-400"]),required:""},[o[37]||(o[37]=t("option",{value:""},"Selecciona una opción",-1)),(n(!0),i(C,null,E(K.value,s=>(n(),i("option",{key:s.value,value:s.value},c(s.text),9,eo))),128))],10,Ke),[[U,r(e).regimen_fiscal]]),r(e).errors.regimen_fiscal?(n(),i("div",oo,c(r(e).errors.regimen_fiscal),1)):p("",!0),r(e).tipo_persona?p("",!0):(n(),i("div",to," Primero selecciona el tipo de persona "))]),t("div",so,[o[40]||(o[40]=t("label",{for:"uso_cfdi",class:"block text-sm font-medium text-gray-700"},[x(" Uso CFDI "),t("span",{class:"text-red-500"},"*")],-1)),g(t("select",{id:"uso_cfdi","onUpdate:modelValue":o[12]||(o[12]=s=>r(e).uso_cfdi=s),class:b(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",r(e).errors.uso_cfdi?"border-red-300 bg-red-50":"border-gray-300"]),required:""},[o[39]||(o[39]=t("option",{value:""},"Selecciona una opción",-1)),(n(!0),i(C,null,E(ee.value,s=>(n(),i("option",{key:s.value,value:s.value},c(s.text),9,ro))),128))],2),[[U,r(e).uso_cfdi]]),r(e).errors.uso_cfdi?(n(),i("div",lo,c(r(e).errors.uso_cfdi),1)):p("",!0)])])]),t("div",null,[o[53]||(o[53]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Dirección",-1)),t("div",ao,[t("div",io,[t("div",no,[o[42]||(o[42]=t("label",{for:"calle",class:"block text-sm font-medium text-gray-700"},[x(" Calle "),t("span",{class:"text-red-500"},"*")],-1)),g(t("input",{type:"text",id:"calle","onUpdate:modelValue":o[13]||(o[13]=s=>r(e).calle=s),onBlur:o[14]||(o[14]=s=>k("calle")),autocomplete:"off",class:b(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",r(e).errors.calle?"border-red-300 bg-red-50":"border-gray-300"]),required:""},null,34),[[_,r(e).calle]]),r(e).errors.calle?(n(),i("div",co,c(r(e).errors.calle),1)):p("",!0)])]),t("div",uo,[o[43]||(o[43]=t("label",{for:"numero_exterior",class:"block text-sm font-medium text-gray-700"},[x(" Número Exterior "),t("span",{class:"text-red-500"},"*")],-1)),g(t("input",{type:"text",id:"numero_exterior","onUpdate:modelValue":o[15]||(o[15]=s=>r(e).numero_exterior=s),onBlur:o[16]||(o[16]=s=>k("numero_exterior")),autocomplete:"off",class:b(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",r(e).errors.numero_exterior?"border-red-300 bg-red-50":"border-gray-300"]),required:""},null,34),[[_,r(e).numero_exterior]]),r(e).errors.numero_exterior?(n(),i("div",mo,c(r(e).errors.numero_exterior),1)):p("",!0)]),t("div",po,[o[44]||(o[44]=t("label",{for:"numero_interior",class:"block text-sm font-medium text-gray-700"}," Número Interior ",-1)),g(t("input",{type:"text",id:"numero_interior","onUpdate:modelValue":o[17]||(o[17]=s=>r(e).numero_interior=s),onBlur:o[18]||(o[18]=s=>k("numero_interior")),autocomplete:"off",class:b(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",r(e).errors.numero_interior?"border-red-300 bg-red-50":"border-gray-300"])},null,34),[[_,r(e).numero_interior]]),r(e).errors.numero_interior?(n(),i("div",fo,c(r(e).errors.numero_interior),1)):p("",!0)]),t("div",go,[o[45]||(o[45]=t("label",{for:"colonia",class:"block text-sm font-medium text-gray-700"},[x(" Colonia "),t("span",{class:"text-red-500"},"*")],-1)),g(t("select",{id:"colonia","onUpdate:modelValue":o[19]||(o[19]=s=>r(e).colonia=s),disabled:f.value.length===0,class:b(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",r(e).errors.colonia?"border-red-300 bg-red-50":"border-gray-300",f.value.length===0?"bg-gray-100 text-gray-400":""]),required:""},[t("option",xo,c(f.value.length===0?"Ingresa un código postal primero":"Selecciona una colonia"),1),(n(!0),i(C,null,E(f.value,s=>(n(),i("option",{key:s,value:s},c(s),9,vo))),128))],10,bo),[[U,r(e).colonia]]),r(e).errors.colonia?(n(),i("div",_o,c(r(e).errors.colonia),1)):p("",!0),f.value.length===0?(n(),i("div",yo," Primero ingresa un código postal válido para cargar las colonias disponibles ")):p("",!0)]),t("div",wo,[o[46]||(o[46]=t("label",{for:"codigo_postal",class:"block text-sm font-medium text-gray-700"},[x(" Código Postal "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{type:"text",id:"codigo_postal",maxlength:"5",pattern:"[0-9]{5}",value:r(e).codigo_postal,onInput:re,placeholder:"12345",autocomplete:"off",class:b(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",r(e).errors.codigo_postal?"border-red-300 bg-red-50":"border-gray-300"]),required:""},null,42,ko),r(e).errors.codigo_postal?(n(),i("div",Co,c(r(e).errors.codigo_postal),1)):p("",!0)]),t("div",ho,[o[47]||(o[47]=t("label",{for:"municipio",class:"block text-sm font-medium text-gray-700"},[x(" Municipio "),t("span",{class:"text-red-500"},"*")],-1)),g(t("input",{type:"text",id:"municipio","onUpdate:modelValue":o[20]||(o[20]=s=>r(e).municipio=s),autocomplete:"off",class:b(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",r(e).errors.municipio?"border-red-300 bg-red-50":"border-gray-300"]),required:""},null,2),[[_,r(e).municipio]]),r(e).errors.municipio?(n(),i("div",Eo,c(r(e).errors.municipio),1)):p("",!0)]),t("div",So,[o[49]||(o[49]=t("label",{for:"estado",class:"block text-sm font-medium text-gray-700"}," Estado ",-1)),g(t("select",{id:"estado","onUpdate:modelValue":o[21]||(o[21]=s=>r(e).estado=s),class:"mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm border-gray-300"},[o[48]||(o[48]=t("option",{value:""},"Selecciona una opción",-1)),(n(!0),i(C,null,E(W.value,s=>(n(),i("option",{key:s.value,value:s.value},c(s.text),9,Uo))),128))],512),[[U,r(e).estado]]),r(e).errors.estado?(n(),i("div",Mo,c(r(e).errors.estado),1)):p("",!0),o[50]||(o[50]=t("div",{class:"mt-1 text-xs text-gray-500"}," Opcional para clientes extranjeros ",-1))]),t("div",Ao,[o[51]||(o[51]=t("label",{for:"pais",class:"block text-sm font-medium text-gray-700"}," País ",-1)),g(t("input",{type:"text",id:"pais","onUpdate:modelValue":o[22]||(o[22]=s=>r(e).pais=s),onBlur:o[23]||(o[23]=s=>k("pais")),placeholder:"MX (usa MEX sólo si tu backend lo admite)",autocomplete:"new-password",class:b(["mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",r(e).errors.pais?"border-red-300 bg-red-50":"border-gray-300"])},null,34),[[_,r(e).pais]]),r(e).errors.pais?(n(),i("div",Do,c(r(e).errors.pais),1)):p("",!0),o[52]||(o[52]=t("div",{class:"mt-1 text-xs text-gray-500"}," Código de país (2-3 letras). MX para México, USA para Estados Unidos, etc. ",-1))])])]),Y.value?(n(),i("div",Fo,[o[55]||(o[55]=t("h3",{class:"font-semibold mb-2"},"Debug Info:",-1)),t("p",null,"Formulario válido: "+c(A.value),1),t("p",null,"Campos requeridos llenos: "+c(z.value),1),t("p",null,"Sin errores: "+c(!M.value),1),t("p",null,"Datos modificados: "+c(r(e).isDirty),1),t("div",Lo,[o[54]||(o[54]=t("strong",null,"Valores actuales:",-1)),t("ul",Vo,[(n(),i(C,null,E(B,s=>t("li",{key:s},c(s)+': "'+c(r(e)[s])+'" ('+c(typeof r(e)[s])+") ",1)),64))])])])):p("",!0),t("div",Bo,[t("div",null,[Z(r(xe),{href:l.route("clientes.show",F.cliente.id),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},{default:be(()=>o[56]||(o[56]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),x(" Volver al Cliente ")])),_:1},8,["href"])]),t("div",zo,[t("button",{type:"button",onClick:ae,disabled:r(e).processing,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}," Restaurar ",8,Io),t("button",{type:"submit",disabled:r(e).processing||!A.value||!r(e).isDirty,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[r(e).processing?(n(),i("span",jo,o[57]||(o[57]=[t("svg",{class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" Guardando... ")]))):(n(),i("span",Po,"Actualizar Cliente"))],8,Oo)])])],32)])])],64))}});export{Xo as default};
