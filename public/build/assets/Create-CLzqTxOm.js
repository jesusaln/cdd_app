import{T as M,r as O,c as k,i as n,o as l,g as S,f as e,u as r,Z as V,q as F,k as i,v as m,x as w,F as C,m as D,t as a,z as b,s as q,N as h}from"./vendor-d19pJyVS.js";import{A as B}from"./AppLayout-CcnrZQKI.js";import{N as E}from"./app-BcT2PLJy.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Dq7h7Pqt.js";const A={class:"cobranza-create min-h-screen bg-gray-50"},I={class:"max-w-4xl mx-auto px-6 py-8"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},T={class:"md:col-span-2"},$=["value"],L={key:0,class:"mt-1 text-sm text-red-600"},G={key:0,class:"mt-1 text-sm text-red-600"},Z={key:0,class:"mt-1 text-sm text-red-600"},H={class:"relative"},J={key:0,class:"mt-1 text-sm text-red-600"},K={key:0,class:"md:col-span-2 bg-blue-50 border border-blue-200 rounded-lg p-4"},P={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},Q={class:"text-blue-900 ml-2"},W={class:"text-blue-900 ml-2"},X={class:"text-blue-900 ml-2 capitalize"},Y={class:"md:col-span-2"},ee={key:0,class:"mt-1 text-sm text-red-600"},oe={class:"flex justify-end gap-4 mt-8 pt-6 border-t border-gray-200"},te=["disabled"],z=p=>p?new Intl.NumberFormat("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2}).format(p):"0",re=Object.assign({layout:B},{__name:"Create",props:{rentas:{type:Array,default:()=>[]},errors:{type:Object,default:()=>({})},jetstream:{type:Object,default:()=>({})},auth:{type:Object,default:()=>({})},errorBags:{type:Object,default:()=>({})},flash:{type:Object,default:()=>({})},defaults:{type:Object,default:()=>({})}},setup(p){const f=new E({duration:4e3,position:{x:"right",y:"top"},types:[{type:"success",background:"#10b981",icon:!1},{type:"error",background:"#ef4444",icon:!1},{type:"warning",background:"#f59e0b",icon:!1}]}),g=p,t=M({renta_id:"",fecha_cobro:new Date().toISOString().split("T")[0],monto_cobrado:"",concepto:"mensualidad",notas:""}),u=O(!1),N=k(()=>g.rentas.filter(c=>c.estado==="activo")),d=k(()=>g.rentas.find(c=>c.id==t.renta_id)),j=()=>{u.value=!0,t.post(route("cobranza.store"),{onSuccess:()=>{f.success("Cobranza creada exitosamente"),h.visit(route("cobranza.index"))},onError:c=>{f.error("Error al crear la cobranza"),u.value=!1},onFinish:()=>{u.value=!1}})},v=()=>{d.value&&t.concepto==="mensualidad"&&(t.monto_cobrado=d.value.monto_mensual||"")},x=()=>{h.visit(route("cobranza.index"))};return(c,o)=>{var y;return l(),n(C,null,[S(r(V),{title:"Crear Cobranza"}),e("div",A,[e("div",I,[e("div",{class:"bg-white border border-slate-200 rounded-xl shadow-sm p-8 mb-6"},[e("div",{class:"flex items-center gap-3"},[e("button",{onClick:x,class:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors"},o[5]||(o[5]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),o[6]||(o[6]=e("div",null,[e("h1",{class:"text-2xl font-bold text-slate-900"},"Crear Nueva Cobranza"),e("p",{class:"text-slate-600 mt-1"},"Registra un nuevo cobro para una renta activa")],-1))])]),e("form",{onSubmit:F(j,["prevent"]),class:"bg-white rounded-xl shadow-sm border border-gray-100 p-8"},[e("div",R,[e("div",T,[o[8]||(o[8]=e("label",{for:"renta_id",class:"block text-sm font-medium text-gray-700 mb-2"}," Renta * ",-1)),m(e("select",{"onUpdate:modelValue":o[0]||(o[0]=s=>r(t).renta_id=s),onChange:v,id:"renta_id",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},[o[7]||(o[7]=e("option",{value:""},"Selecciona una renta",-1)),(l(!0),n(C,null,D(N.value,s=>{var _;return l(),n("option",{key:s.id,value:s.id},a(s.numero_contrato)+" - "+a((_=s.cliente)==null?void 0:_.nombre_razon_social)+" ($"+a(z(s.monto_mensual))+"/mes) ",9,$)}),128))],544),[[w,r(t).renta_id]]),r(t).errors.renta_id?(l(),n("p",L,a(r(t).errors.renta_id),1)):i("",!0)]),e("div",null,[o[9]||(o[9]=e("label",{for:"fecha_cobro",class:"block text-sm font-medium text-gray-700 mb-2"}," Fecha de Cobro * ",-1)),m(e("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>r(t).fecha_cobro=s),id:"fecha_cobro",type:"date",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},null,512),[[b,r(t).fecha_cobro]]),r(t).errors.fecha_cobro?(l(),n("p",G,a(r(t).errors.fecha_cobro),1)):i("",!0)]),e("div",null,[o[11]||(o[11]=e("label",{for:"concepto",class:"block text-sm font-medium text-gray-700 mb-2"}," Concepto * ",-1)),m(e("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>r(t).concepto=s),onChange:v,id:"concepto",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},o[10]||(o[10]=[q('<option value="mensualidad" data-v-fd4d95ec>Mensualidad</option><option value="deposito_garantia" data-v-fd4d95ec>Depósito de Garantía</option><option value="mora" data-v-fd4d95ec>Mora</option><option value="reparacion" data-v-fd4d95ec>Reparación</option><option value="otro" data-v-fd4d95ec>Otro</option>',5)]),544),[[w,r(t).concepto]]),r(t).errors.concepto?(l(),n("p",Z,a(r(t).errors.concepto),1)):i("",!0)]),e("div",null,[o[13]||(o[13]=e("label",{for:"monto_cobrado",class:"block text-sm font-medium text-gray-700 mb-2"}," Monto a Cobrar * ",-1)),e("div",H,[o[12]||(o[12]=e("span",{class:"absolute left-3 top-3 text-gray-500"},"$",-1)),m(e("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>r(t).monto_cobrado=s),id:"monto_cobrado",type:"number",step:"0.01",min:"0",class:"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",required:""},null,512),[[b,r(t).monto_cobrado]])]),r(t).errors.monto_cobrado?(l(),n("p",J,a(r(t).errors.monto_cobrado),1)):i("",!0)]),d.value?(l(),n("div",K,[o[17]||(o[17]=e("h3",{class:"text-sm font-medium text-blue-900 mb-2"},"Información de la Renta",-1)),e("div",P,[e("div",null,[o[14]||(o[14]=e("span",{class:"text-blue-700 font-medium"},"Cliente:",-1)),e("span",Q,a((y=d.value.cliente)==null?void 0:y.nombre_razon_social),1)]),e("div",null,[o[15]||(o[15]=e("span",{class:"text-blue-700 font-medium"},"Monto Mensual:",-1)),e("span",W,"$"+a(z(d.value.monto_mensual)),1)]),e("div",null,[o[16]||(o[16]=e("span",{class:"text-blue-700 font-medium"},"Estado:",-1)),e("span",X,a(d.value.estado),1)])])])):i("",!0),e("div",Y,[o[18]||(o[18]=e("label",{for:"notas",class:"block text-sm font-medium text-gray-700 mb-2"}," Notas ",-1)),m(e("textarea",{"onUpdate:modelValue":o[4]||(o[4]=s=>r(t).notas=s),id:"notas",rows:"3",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-vertical",placeholder:"Observaciones adicionales sobre este cobro..."},null,512),[[b,r(t).notas]]),r(t).errors.notas?(l(),n("p",ee,a(r(t).errors.notas),1)):i("",!0)])]),e("div",oe,[e("button",{type:"button",onClick:x,class:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-medium"}," Cancelar "),e("button",{type:"submit",disabled:u.value,class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium"},a(u.value?"Creando...":"Crear Cobranza"),9,te)])],32)])])],64)}}}),ie=U(re,[["__scopeId","data-v-fd4d95ec"]]);export{ie as default};
