import{Q as E,c as V,K as F,r as g,i as l,o as s,g as M,f as o,u as B,Z as G,q as _,v as d,k as i,l as c,z as m,n as p,t as u,x as U,s as w,F as D,N as H}from"./vendor-d19pJyVS.js";import{N as P}from"./app-BcT2PLJy.js";import{A as z}from"./AppLayout-CcnrZQKI.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Dq7h7Pqt.js";const q={class:"max-w-4xl mx-auto p-6"},A={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},L={key:0,class:"text-red-500 text-xs mt-1"},I={key:0,class:"text-red-500 text-xs mt-1"},O=["max"],T={key:0,class:"text-red-500 text-xs mt-1"},J={key:0,class:"text-red-500 text-xs mt-1"},R={class:"relative"},Y={key:0,class:"text-red-500 text-xs mt-1"},$={key:0,class:"text-red-500 text-xs mt-1"},K={key:0,class:"text-red-500 text-xs mt-1"},Q={class:"relative"},W={key:0,class:"text-red-500 text-xs mt-1"},X={key:0,class:"text-red-500 text-xs mt-1"},Z={class:"mt-6"},ee={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition duration-200"},oe={key:1,class:"relative"},te=["src"],re={key:0,class:"text-red-500 text-xs mt-1"},ae={class:"flex flex-col sm:flex-row justify-between items-center mt-8 space-y-4 sm:space-y-0"},le=["disabled"],se={key:0,class:"flex items-center"},ne={key:1},ie=Object.assign({layout:z},{__name:"Create",setup(ue){const k=E(),t=V(()=>k.props.errors||{}),v=new P({duration:4e3,position:{x:"right",y:"top"},types:[{type:"success",background:"#10B981",icon:{className:"fas fa-check-circle",tagName:"i",color:"#fff"}},{type:"error",background:"#EF4444",icon:{className:"fas fa-times-circle",tagName:"i",color:"#fff"}}]}),r=F({marca:"",modelo:"",anio:new Date().getFullYear(),color:"",precio:"",numero_serie:"",combustible:"Gasolina",kilometraje:0,placa:"",foto:null}),b=g(null),f=g(!1),x=g(null),C=n=>["image/jpeg","image/jpg","image/png","image/webp"].includes(n.type)?n.size>10485760?(v.error("El archivo es demasiado grande. Máximo 10MB"),!1):!0:(v.error("Solo se permiten archivos de imagen (JPG, PNG, WEBP)"),!1),h=n=>{const e=n.target.files[0];e&&C(e)?(r.foto=e,b.value=URL.createObjectURL(e)):(r.foto=null,b.value=null,n.target.value="")},j=()=>{r.foto=null,b.value=null,x.value&&(x.value.value="")},y=()=>{Object.assign(r,{marca:"",modelo:"",anio:new Date().getFullYear(),color:"",precio:"",numero_serie:"",combustible:"Gasolina",kilometraje:0,placa:"",foto:null}),b.value=null,x.value&&(x.value.value="")},N=async()=>{if(!f.value)try{f.value=!0;const n=new FormData;Object.keys(r).forEach(e=>{(e==="foto"&&r[e]||r[e]!==null&&r[e]!=="")&&n.append(e,r[e])}),await H.post(route("carros.store"),n,{forceFormData:!0,onSuccess:e=>{v.success("¡El carro ha sido creado exitosamente!"),y()},onError:e=>{console.error("Errores de validación:",e);const a=Object.values(e)[0];a?v.error(Array.isArray(a)?a[0]:a):v.error("Hubo errores en el formulario. Por favor revisa los campos.")},onFinish:()=>{f.value=!1}})}catch(n){console.error("Error inesperado:",n),v.error("Ocurrió un error inesperado. Por favor intenta de nuevo."),f.value=!1}};return(n,e)=>(s(),l(D,null,[M(B(G),{title:"Crear Carro"}),o("div",q,[e[26]||(e[26]=o("div",{class:"mb-8"},[o("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Crear Nuevo Carro"),o("p",{class:"text-gray-600"},"Completa los siguientes campos para registrar un nuevo vehículo")],-1)),o("form",{onSubmit:_(N,["prevent"]),class:"bg-white shadow-lg rounded-lg p-8"},[o("div",A,[o("div",null,[e[10]||(e[10]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-2"},[c(" Marca "),o("span",{class:"text-red-500"},"*")],-1)),d(o("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>r.marca=a),type:"text",class:p(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200",{"border-red-500":t.value.marca}]),placeholder:"Ej: Toyota, Honda, Ford",required:""},null,2),[[m,r.marca]]),t.value.marca?(s(),l("p",L,u(t.value.marca),1)):i("",!0)]),o("div",null,[e[11]||(e[11]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-2"},[c(" Modelo "),o("span",{class:"text-red-500"},"*")],-1)),d(o("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>r.modelo=a),type:"text",class:p(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200",{"border-red-500":t.value.modelo}]),placeholder:"Ej: Corolla, Civic, Focus",required:""},null,2),[[m,r.modelo]]),t.value.modelo?(s(),l("p",I,u(t.value.modelo),1)):i("",!0)]),o("div",null,[e[12]||(e[12]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-2"},[c(" Año "),o("span",{class:"text-red-500"},"*")],-1)),d(o("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>r.anio=a),type:"number",min:1900,max:new Date().getFullYear()+1,class:p(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200",{"border-red-500":t.value.anio}]),placeholder:"2024",required:""},null,10,O),[[m,r.anio,void 0,{number:!0}]]),t.value.anio?(s(),l("p",T,u(t.value.anio),1)):i("",!0)]),o("div",null,[e[13]||(e[13]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-2"},[c(" Color "),o("span",{class:"text-red-500"},"*")],-1)),d(o("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>r.color=a),type:"text",class:p(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200",{"border-red-500":t.value.color}]),placeholder:"Ej: Rojo, Azul, Blanco",required:""},null,2),[[m,r.color]]),t.value.color?(s(),l("p",J,u(t.value.color),1)):i("",!0)]),o("div",null,[e[15]||(e[15]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-2"},[c(" Precio "),o("span",{class:"text-red-500"},"*")],-1)),o("div",R,[e[14]||(e[14]=o("span",{class:"absolute left-3 top-3 text-gray-500"},"$",-1)),d(o("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>r.precio=a),type:"number",step:"0.01",min:"0",class:p(["w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200",{"border-red-500":t.value.precio}]),placeholder:"25000.00",required:""},null,2),[[m,r.precio,void 0,{number:!0}]])]),t.value.precio?(s(),l("p",Y,u(t.value.precio),1)):i("",!0)]),o("div",null,[e[16]||(e[16]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-2"},[c(" Número de Serie "),o("span",{class:"text-red-500"},"*")],-1)),d(o("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>r.numero_serie=a),type:"text",class:p(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200",{"border-red-500":t.value.numero_serie}]),placeholder:"Ej: 1HGBH41JXMN109186",required:""},null,2),[[m,r.numero_serie]]),t.value.numero_serie?(s(),l("p",$,u(t.value.numero_serie),1)):i("",!0)]),o("div",null,[e[18]||(e[18]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-2"},[c(" Tipo de Combustible "),o("span",{class:"text-red-500"},"*")],-1)),d(o("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>r.combustible=a),class:p(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200",{"border-red-500":t.value.combustible}]),required:""},e[17]||(e[17]=[w('<option value="Gasolina" data-v-ae961892>Gasolina</option><option value="Diésel" data-v-ae961892>Diésel</option><option value="Eléctrico" data-v-ae961892>Eléctrico</option><option value="Híbrido" data-v-ae961892>Híbrido</option><option value="Gas Natural" data-v-ae961892>Gas Natural</option>',5)]),2),[[U,r.combustible]]),t.value.combustible?(s(),l("p",K,u(t.value.combustible),1)):i("",!0)]),o("div",null,[e[20]||(e[20]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-2"}," Kilometraje ",-1)),o("div",Q,[d(o("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>r.kilometraje=a),type:"number",min:"0",class:p(["w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200",{"border-red-500":t.value.kilometraje}]),placeholder:"50000"},null,2),[[m,r.kilometraje,void 0,{number:!0}]]),e[19]||(e[19]=o("span",{class:"absolute right-3 top-3 text-gray-500 text-sm"},"km",-1))]),t.value.kilometraje?(s(),l("p",W,u(t.value.kilometraje),1)):i("",!0)]),o("div",null,[e[21]||(e[21]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-2"}," Placa ",-1)),d(o("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>r.placa=a),type:"text",class:p(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 uppercase",{"border-red-500":t.value.placa}]),placeholder:"ABC-123"},null,2),[[m,r.placa]]),t.value.placa?(s(),l("p",X,u(t.value.placa),1)):i("",!0)])]),o("div",Z,[e[24]||(e[24]=o("label",{class:"block text-gray-700 text-sm font-semibold mb-2"}," Foto del Vehículo ",-1)),o("div",ee,[o("input",{type:"file",onChange:h,accept:"image/*",class:"hidden",ref_key:"fileInput",ref:x},null,544),b.value?i("",!0):(s(),l("div",{key:0,class:"cursor-pointer",onClick:e[9]||(e[9]=a=>n.$refs.fileInput.click())},e[22]||(e[22]=[w('<svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" data-v-ae961892><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-ae961892></path></svg><p class="mt-2 text-sm text-gray-600" data-v-ae961892><span class="font-medium text-blue-600 hover:text-blue-500" data-v-ae961892>Haz clic para subir</span> o arrastra y suelta </p><p class="text-xs text-gray-500" data-v-ae961892>PNG, JPG, JPEG hasta 10MB</p>',3)]))),b.value?(s(),l("div",oe,[o("img",{src:b.value,alt:"Vista previa",class:"max-w-xs mx-auto rounded-lg shadow-md"},null,8,te),o("button",{type:"button",onClick:j,class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition duration-200"},e[23]||(e[23]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])):i("",!0)]),t.value.foto?(s(),l("p",re,u(t.value.foto),1)):i("",!0)]),o("div",ae,[o("button",{type:"button",onClick:y,class:"w-full sm:w-auto px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200"}," Limpiar Formulario "),o("button",{type:"submit",disabled:f.value,class:"w-full sm:w-auto px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition duration-200 font-semibold"},[f.value?(s(),l("span",se,e[25]||(e[25]=[o("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),c(" Creando... ")]))):(s(),l("span",ne,"Crear Carro"))],8,le)])],32)])],64))}}),ve=S(ie,[["__scopeId","data-v-ae961892"]]);export{ve as default};
