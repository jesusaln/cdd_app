import{c as E,T as v,b as P,o as l,e as b,f as t,t as d,n as c,q as M,v as x,i,k as f,u as o,z as p,g as h,A as _,l as k}from"./vendor-d19pJyVS.js";import{A as S}from"./AppLayout-CcnrZQKI.js";import"./utils-Dq7h7Pqt.js";import"./app-BcT2PLJy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"flex justify-between items-center"},A={class:"py-12"},F={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},B={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},D={class:"p-6 bg-white border-b border-gray-200"},I={class:"mb-6"},R={class:"bg-gray-50 p-4 rounded-lg"},U={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},j={class:"mt-1 text-sm text-gray-900"},z={class:"mt-1 text-sm text-gray-900"},q={class:"mt-1 text-sm text-gray-900"},G={class:"mb-6"},O={class:"bg-blue-50 p-4 rounded-lg"},X={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},L={class:"mt-1 text-lg font-semibold text-blue-900"},H={class:"mt-1 text-lg font-semibold text-green-600"},J={class:"mt-1 text-lg font-semibold text-red-600"},K={class:"mb-6"},Q={class:"bg-green-50 p-4 rounded-lg"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Y=["max"],Z={key:0,class:"mt-2 text-sm text-red-600"},$={key:0,class:"mt-2 text-sm text-red-600"},tt={class:"mt-4"},et=["disabled"],ot={key:0},st={key:1},nt={class:"mb-6"},rt={class:"bg-gray-50 p-4 rounded-lg"},at={class:"mb-4"},dt={key:0,class:"mt-2 text-sm text-red-600"},lt={class:"mb-4"},it={key:0,class:"mt-2 text-sm text-red-600"},mt={class:"flex items-center justify-end"},ut=["disabled"],ct={key:0},gt={key:1},vt={__name:"Edit",props:{cuenta:{type:Object,required:!0}},setup(r){const u=r,w=new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}),y=n=>{if(n==null)return 0;const e=Number(n);return Number.isFinite(e)?e:0},g=n=>w.format(y(n)),N=E(()=>{var n;return y((n=u.cuenta)==null?void 0:n.monto_pendiente)}),a=v({fecha_vencimiento:u.cuenta.fecha_vencimiento?new Date(u.cuenta.fecha_vencimiento).toISOString().split("T")[0]:"",notas:u.cuenta.notas||""}),s=v({monto:"",notas:""}),V=()=>{a.put(route("cuentas-por-cobrar.update",u.cuenta.id),{onSuccess:()=>{},onError:n=>{console.error("Errores:",n)}})},C=()=>{s.post(route("cuentas-por-cobrar.registrar-pago",u.cuenta.id),{onSuccess:()=>{s.reset(),window.location.reload()},onError:n=>{console.error("Errores:",n)}})};return(n,e)=>(l(),P(S,{title:"Editar Cuenta por Cobrar"},{header:b(()=>[t("div",T,[e[5]||(e[5]=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Editar Cuenta por Cobrar ",-1)),h(o(_),{href:n.route("cuentas-por-cobrar.index"),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"},{default:b(()=>e[4]||(e[4]=[k(" Cancelar ")])),_:1},8,["href"])])]),default:b(()=>[t("div",A,[t("div",F,[t("div",B,[t("div",D,[t("div",I,[e[10]||(e[10]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"InformaciÃƒÂ³n de la Venta",-1)),t("div",R,[t("div",U,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700"},"NÃƒÂºmero de Venta",-1)),t("p",j,d(r.cuenta.venta.numero_venta),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),t("p",z,d(r.cuenta.venta.cliente.nombre_razon_social),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Total de la Venta",-1)),t("p",q,d(r.cuenta.venta?g(r.cuenta.venta.total):"N/A"),1)]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700"},"Estado Actual",-1)),t("span",{class:c([{"bg-red-100 text-red-800":r.cuenta.estado==="vencido","bg-yellow-100 text-yellow-800":r.cuenta.estado==="parcial","bg-green-100 text-green-800":r.cuenta.estado==="pagado","bg-gray-100 text-gray-800":r.cuenta.estado==="pendiente"},"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},d(r.cuenta.estado),3)])])])]),t("div",G,[e[14]||(e[14]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Estado de Pagos",-1)),t("div",O,[t("div",X,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-blue-700"},"Monto Total",-1)),t("p",L,d(g(r.cuenta.monto_total)),1)]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-blue-700"},"Monto Pagado",-1)),t("p",H,d(g(r.cuenta.monto_pagado)),1)]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-blue-700"},"Monto Pendiente",-1)),t("p",J,d(g(r.cuenta.monto_pendiente)),1)])])])]),t("form",{onSubmit:M(V,["prevent"])},[t("div",K,[e[17]||(e[17]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Registrar Nuevo Pago",-1)),t("div",Q,[t("div",W,[t("div",null,[e[15]||(e[15]=t("label",{for:"monto_pago",class:"block text-sm font-medium text-gray-700"}," Monto del Pago ",-1)),x(t("input",{"onUpdate:modelValue":e[0]||(e[0]=m=>o(s).monto=m),type:"number",step:"0.01",id:"monto_pago",max:N.value,class:c(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",{"border-red-500":o(s).errors.monto}]),placeholder:"0.00"},null,10,Y),[[p,o(s).monto]]),o(s).errors.monto?(l(),i("p",Z,d(o(s).errors.monto),1)):f("",!0)]),t("div",null,[e[16]||(e[16]=t("label",{for:"notas_pago",class:"block text-sm font-medium text-gray-700"}," Notas del Pago ",-1)),x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=m=>o(s).notas=m),type:"text",id:"notas_pago",class:c(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",{"border-red-500":o(s).errors.notas}]),placeholder:"Referencia del pago..."},null,2),[[p,o(s).notas]]),o(s).errors.notas?(l(),i("p",$,d(o(s).errors.notas),1)):f("",!0)])]),t("div",tt,[t("button",{type:"button",onClick:C,disabled:o(s).processing||!o(s).monto,class:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50"},[o(s).processing?(l(),i("span",ot,"Registrando...")):(l(),i("span",st,"Registrar Pago"))],8,et)])])]),t("div",nt,[e[20]||(e[20]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Editar InformaciÃƒÂ³n",-1)),t("div",rt,[t("div",at,[e[18]||(e[18]=t("label",{for:"fecha_vencimiento",class:"block text-sm font-medium text-gray-700"}," Fecha de Vencimiento ",-1)),x(t("input",{"onUpdate:modelValue":e[2]||(e[2]=m=>o(a).fecha_vencimiento=m),type:"date",id:"fecha_vencimiento",class:c(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":o(a).errors.fecha_vencimiento}])},null,2),[[p,o(a).fecha_vencimiento]]),o(a).errors.fecha_vencimiento?(l(),i("p",dt,d(o(a).errors.fecha_vencimiento),1)):f("",!0)]),t("div",lt,[e[19]||(e[19]=t("label",{for:"notas",class:"block text-sm font-medium text-gray-700"}," Notas ",-1)),x(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=m=>o(a).notas=m),id:"notas",rows:"4",class:c(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":o(a).errors.notas}]),placeholder:"Notas adicionales sobre la cuenta por cobrar..."},null,2),[[p,o(a).notas]]),o(a).errors.notas?(l(),i("p",it,d(o(a).errors.notas),1)):f("",!0)])])]),t("div",mt,[h(o(_),{href:n.route("cuentas-por-cobrar.show",r.cuenta.id),class:"mr-4 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded"},{default:b(()=>e[21]||(e[21]=[k(" Ver Detalles ")])),_:1},8,["href"]),t("button",{type:"submit",disabled:o(a).processing,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50"},[o(a).processing?(l(),i("span",ct,"Guardando...")):(l(),i("span",gt,"Guardar Cambios"))],8,ut)])],32)])])])])]),_:1}))}};export{vt as default};
